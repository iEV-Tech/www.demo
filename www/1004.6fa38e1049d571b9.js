"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1004],{8623:(An,D,s)=>{s.r(D),s.d(D,{OrderInfoDetailPageModule:()=>Jn});var p=s(177),S=s(9417),c=s(9420),F=s(7625),m=s(467),G=s(5083),$=s(1806),V=s(9051),O=s(5970),h=s(8650),v=s(8833),n=s(4438),E=s(4842);const N=o=>({$implicit:o});function B(o,l){1&o&&(n.j41(0,"div",18),n.nrm(1,"ion-img",19),n.j41(2,"div",20),n.EFF(3),n.nI1(4,"translate"),n.k0s()()),2&o&&(n.R7$(3),n.JRh(n.bMT(4,1,"DataNotFound")))}function J(o,l){if(1&o&&(n.qex(0),n.j41(1,"div",21),n.eu8(2,22),n.k0s(),n.bVm()),2&o){const i=l.$implicit;n.XpG();const t=n.sdS(33);n.R7$(2),n.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",n.eq3(2,N,i))}}function A(o,l){if(1&o){const i=n.RV6();n.j41(0,"ion-infinite-scroll",23),n.bIt("ionInfinite",function(e){n.eBV(i);const r=n.XpG();return n.Njj(r.onIonInfinite(e))}),n.nrm(1,"ion-infinite-scroll-content"),n.k0s()}}function X(o,l){1&o&&(n.j41(0,"small",36),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&o&&(n.R7$(),n.SpI("(",n.bMT(2,1,"Default"),")"))}function U(o,l){if(1&o){const i=n.RV6();n.j41(0,"div",24)(1,"div",25)(2,"ion-radio",26)(3,"div",27)(4,"b",28),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.DNE(7,X,3,3,"small",29),n.k0s()(),n.j41(8,"div",30)(9,"ion-button",31),n.bIt("click",function(e){const r=n.eBV(i).$implicit,a=n.XpG();return n.Njj(a.editCustomerInvoice(e,r.CustomerInvoiceId))}),n.nrm(10,"ion-icon",32),n.k0s(),n.j41(11,"ion-button",33),n.bIt("click",function(e){const r=n.eBV(i).$implicit,a=n.XpG();return n.Njj(a.deleteCustomerInvoice(e,r.CustomerInvoiceId))}),n.nrm(12,"ion-icon",34),n.k0s()()(),n.nrm(13,"hr"),n.j41(14,"table",35)(15,"tr")(16,"td"),n.EFF(17),n.nI1(18,"translate"),n.k0s(),n.j41(19,"td")(20,"b"),n.EFF(21),n.k0s()()(),n.j41(22,"tr")(23,"td"),n.EFF(24),n.nI1(25,"translate"),n.k0s(),n.j41(26,"td")(27,"b"),n.EFF(28),n.k0s()()(),n.j41(29,"tr")(30,"td"),n.EFF(31),n.nI1(32,"translate"),n.k0s(),n.j41(33,"td")(34,"b"),n.EFF(35),n.k0s()()(),n.j41(36,"tr")(37,"td"),n.EFF(38),n.nI1(39,"translate"),n.k0s(),n.j41(40,"td")(41,"b"),n.EFF(42),n.k0s()()(),n.j41(43,"tr")(44,"td"),n.EFF(45),n.nI1(46,"translate"),n.k0s(),n.j41(47,"td")(48,"b"),n.EFF(49),n.k0s()()()()()}if(2&o){const i=l.$implicit;n.R7$(2),n.Y8G("value",i.CustomerInvoiceId),n.R7$(3),n.JRh(n.bMT(6,13,"ExportBillInfo")),n.R7$(2),n.Y8G("ngIf",i.IsDefault),n.R7$(10),n.JRh(n.bMT(18,15,"BillCompanyName")),n.R7$(4),n.JRh(i.CompanyName),n.R7$(3),n.JRh(n.bMT(25,17,"BillCompanyAddress")),n.R7$(4),n.JRh(i.Address),n.R7$(3),n.JRh(n.bMT(32,19,"BillCompanyTax")),n.R7$(4),n.JRh(i.TaxCode),n.R7$(3),n.JRh(n.bMT(39,21,"Email")),n.R7$(4),n.JRh(i.BuyerEmail),n.R7$(3),n.JRh(n.bMT(46,23,"Mobile")),n.R7$(4),n.JRh(i.BuyerPhone)}}let Y=(()=>{var o;class l{constructor(t,e,r,a){this.modalController=t,this.toastController=e,this.loadingController=r,this.animationController=a,this.APP_ROUTE=v._,this.paging={sortfield:null,sorttype:null,page:1,limit:10,loading:!1,active:!0},this.filter={},this.customerInvoices=[],this.limitLoad=0}close(t){this.modalController.dismiss(null,"close")}submit(t){this.modalController.dismiss(this.CustomerInvoiceId,"submit")}ngOnInit(){this.refreshData()}onIonRefresher(t){this.filter={},this.refreshData(()=>{t.target.complete()})}onIonInfinite(t){this.loadMore(()=>{t.target.complete()})}pushData(t){1==this.paging.page&&(this.customerInvoices.length=0),this.customerInvoices=this.customerInvoices.concat(t)}totalData(){return this.customerInvoices.length}refreshData(t){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit(t)}loadMore(t){this.paging.page+=1,this.loadData_Paging_Limit(t)}searchChange(t){this.filter={},this.filter.search=t.target.value.replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}sortChange(t,e){this.paging.sortfield=t||null,this.paging.sorttype=e||null,this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}filterChange(){this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}loadData_Paging_Limit(t){var e=this;return(0,m.A)(function*(){if(e.limitLoad>0)return void(t&&t());e.limitLoad=300;let r=setInterval(()=>{e.limitLoad-=100,e.limitLoad<=0&&(clearInterval(r),e.loadData_Paging(t))},100)})()}loadData_Paging(t){var e=this;return(0,m.A)(function*(){e.paging.loading=!0,(0,O.Ul)({loadingController:e.loadingController,params:{PageNumber:e.paging.page,PageSize:e.paging.limit},callback:r=>{var a;e.response=r,null!=r&&r.Succeeded?e.pushData(null!==(a=r.Data)&&void 0!==a?a:[]):(0,h.cX)(e.toastController,{},r).then(d=>d.present()),e.paging.loading=!1,e.paging.active=!(null==r||!r.HasNextPage),t&&t()}})})()}editCustomerInvoice(t,e){this.presentModalAddCustomerInvoice(t,e)}deleteCustomerInvoice(t,e){e&&(0,h.Yy)(this.modalController,this.animationController,{selectedId:e,message:{TitleConfirm:"Delete_Confirm",TextConfirm:"Delete"},fnConfirm:r=>{(0,O.NT)({loadingController:this.loadingController,params:{CustomerInvoiceId:r},callback:a=>{null!=a&&a.Succeeded?this.refreshData():(0,h.cX)(this.toastController,{},a).then(d=>d.present())}})}})}changeCustomerInvoice(t){this.CustomerInvoiceId=t.detail.value}presentModalAddCustomerInvoice(t,e){var r=this;return(0,m.A)(function*(){const a=yield r.modalController.create({component:$.$,componentProps:{CustomerInvoiceId:e}});a.onDidDismiss().then(d=>{"success"==d.role&&r.refreshData()}),a.present()})()}}return(o=l).\u0275fac=function(t){return new(t||o)(n.rXU(c.W3),n.rXU(c.K_),n.rXU(c.Xi),n.rXU(c.Hx))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-modal-customer-invoice"]],inputs:{CustomerInvoiceId:"CustomerInvoiceId"},decls:34,vars:16,consts:[["templateCustomerInvoice",""],["slot","start"],[3,"click"],["src","../../../assets/icon/ion-icon/arrow-left.svg"],["slot","fixed",3,"ionRefresh"],["class","container container-loading py-5 text-center",4,"ngIf"],["mode","md",3,"ionChange","value"],[1,"container"],[1,"row"],[4,"ngFor","ngForOf"],[1,"col-12"],["color","primary","expand","block","shape","round","fill","outline",3,"click"],["slot","start","src","../../../assets/icon/ion-icon/plus-circle.svg"],[1,"col-12","my-3","text-center"],[1,"text-muted"],[3,"ionInfinite",4,"ngIf"],[1,"p-3"],["color","primary","expand","block","shape","round",3,"click"],[1,"container","container-loading","py-5","text-center"],["src","../../../assets/icon/ion-img/no-data.svg"],[1,"text-muted","mt-4"],[1,"col-12","mb-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ionInfinite"],[1,"card-customer-invoice","rounded","bg-white"],[1,"d-flex","justify-content-between"],["label-placement","end",3,"value"],[1,"text-wrap"],[1,"mr-1"],["class","text-primary d-inline-block",4,"ngIf"],[1,"text-nowrap"],["size","small","color","medium","fill","clear",3,"click"],["src","../../../assets/icon/ion-icon/edit.svg",1,"fs-4"],["size","small","color","danger","fill","clear",3,"click"],["name","close-outline",1,"fs-5"],[1,"table","table-borderless","m-0"],[1,"text-primary","d-inline-block"]],template:function(t,e){if(1&t){const r=n.RV6();n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),n.bIt("click",function(d){return n.eBV(r),n.Njj(e.close(d))}),n.nrm(4,"ion-icon",3),n.k0s()(),n.j41(5,"ion-title"),n.EFF(6),n.nI1(7,"translate"),n.k0s()()(),n.j41(8,"ion-content")(9,"ion-refresher",4),n.bIt("ionRefresh",function(d){return n.eBV(r),n.Njj(e.onIonRefresher(d))}),n.nrm(10,"ion-refresher-content"),n.k0s(),n.DNE(11,B,5,3,"div",5),n.j41(12,"ion-radio-group",6),n.bIt("ionChange",function(d){return n.eBV(r),n.Njj(e.changeCustomerInvoice(d))}),n.j41(13,"div",7)(14,"div",8),n.DNE(15,J,3,4,"ng-container",9),n.j41(16,"div",10)(17,"ion-button",11),n.bIt("click",function(d){return n.eBV(r),n.Njj(e.presentModalAddCustomerInvoice(d))}),n.nrm(18,"ion-icon",12),n.j41(19,"ion-label"),n.EFF(20),n.nI1(21,"translate"),n.k0s()()(),n.j41(22,"div",13)(23,"small",14),n.EFF(24),n.nI1(25,"translate"),n.k0s()()()()(),n.DNE(26,A,2,0,"ion-infinite-scroll",15),n.k0s(),n.j41(27,"ion-footer")(28,"div",16)(29,"ion-button",17),n.bIt("click",function(d){return n.eBV(r),n.Njj(e.submit(d))}),n.EFF(30),n.nI1(31,"translate"),n.k0s()()(),n.DNE(32,U,50,25,"ng-template",null,0,n.C5r)}2&t&&(n.R7$(6),n.JRh(n.bMT(7,8,"CustomerInvoiceSaved")),n.R7$(5),n.Y8G("ngIf",e.response&&!e.customerInvoices.length),n.R7$(),n.Y8G("value",e.CustomerInvoiceId),n.R7$(3),n.Y8G("ngForOf",e.customerInvoices),n.R7$(5),n.JRh(n.bMT(21,10,"Create")),n.R7$(4),n.JRh(n.bMT(25,12,"CustomerInvoiceNotice")),n.R7$(2),n.Y8G("ngIf",e.paging.active),n.R7$(4),n.JRh(n.bMT(31,14,"Choice")))},dependencies:[p.Sq,p.bT,p.T3,c.Jm,c.QW,c.W9,c.M0,c.eU,c.iq,c.KW,c.Ax,c.Hp,c.he,c.KO,c.f0,c.To,c.Ki,c.BC,c.ai,c.Je,E.D9],styles:[".table[_ngcontent-%COMP%]{table-layout:fixed}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;vertical-align:top}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40%;padding-left:0;padding-right:.5rem;color:var(--ion-color-medium-shade)}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;text-align:right}.card-customer-invoice[_ngcontent-%COMP%]{padding:1rem}.card-customer-invoice.rounded[_ngcontent-%COMP%]{border-radius:1.5rem!important}.card-customer-invoice[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important}.card-customer-invoice[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:2rem;height:2rem;min-width:2rem;min-height:2rem;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--border-radius: .5rem}"]}),l})();var x=s(6944),P=s(9061),w=s(6539),L=s(2313),C=s(8517),I=s(3588),y=s(6037);const H=function(){var o=(0,m.A)(function*(l){var i,t,e,r,a,d,_;l.params=l.params||{},(0,y.Ll)({url:"api/Einvoice/createmyinvoice",params:{IsCompany:null!==(i=l.params.IsCompany)&&void 0!==i?i:null,TaxCode:null!==(t=l.params.TaxCode)&&void 0!==t?t:null,CompanyName:null!==(e=l.params.CompanyName)&&void 0!==e?e:null,Address:null!==(r=l.params.Address)&&void 0!==r?r:null,BuyerPhone:null!==(a=l.params.BuyerPhone)&&void 0!==a?a:null,BuyerEmail:null!==(d=l.params.BuyerEmail)&&void 0!==d?d:null,BillId:null!==(_=l.params.BillId)&&void 0!==_?_:null},success:u=>{"function"==typeof l.callback&&l.callback(u.data||null)},error:u=>{var f;"function"==typeof l.callback&&l.callback(null==u||null===(f=u.response)||void 0===f?void 0:f.data),console.error(u)},loading:l.loading,loadingController:l.loadingController})});return function(i){return o.apply(this,arguments)}}(),K=function(){var o=(0,m.A)(function*(l){var i;l.params=l.params||{},(0,y.IH)({url:"api/Einvoice/noeinvoice",params:{BillId:null!==(i=l.params.BillId)&&void 0!==i?i:null},success:t=>{"function"==typeof l.callback&&l.callback(t.data||null)},error:t=>{var e;"function"==typeof l.callback&&l.callback(null==t||null===(e=t.response)||void 0===e?void 0:e.data),console.error(t)},loading:l.loading,loadingController:l.loadingController})});return function(i){return o.apply(this,arguments)}}();var z=s(7586),W=s.n(z),Q=s(9762),q=s(6116);const Z=["modalAddCustomerInvoiceSuccess"],nn=()=>["android","ios"],en=(o,l,i)=>[o,l,i],tn=()=>[];function on(o,l){if(1&o){const i=n.RV6();n.j41(0,"ion-buttons",9),n.bIt("click",function(e){n.eBV(i);const r=n.XpG();return n.Njj(r.shareOrder(e))}),n.j41(1,"ion-chip",10)(2,"ion-label"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.nrm(5,"ion-icon",11),n.k0s()()}2&o&&(n.R7$(3),n.JRh(n.bMT(4,1,"Share")))}function rn(o,l){1&o&&(n.qex(0),n.j41(1,"div",13),n.nrm(2,"ion-spinner",14),n.k0s(),n.bVm())}function an(o,l){if(1&o&&(n.j41(0,"tr")(1,"td"),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"td"),n.EFF(5),n.k0s()()),2&o){const i=n.XpG(3);n.R7$(2),n.JRh(n.bMT(3,2,"PaymentMethod")),n.R7$(3),n.JRh(i.orderInfo.KindOfCard)}}function ln(o,l){if(1&o&&(n.j41(0,"tr",22)(1,"td"),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"td"),n.EFF(5),n.k0s()()),2&o){const i=n.XpG(3);n.R7$(2),n.JRh(n.bMT(3,2,"Discount")),n.R7$(3),n.SpI("-",i.APP_FUNC_FormatMoney(i.orderInfo.PromoteValue),"\u0111")}}function dn(o,l){if(1&o&&(n.qex(0),n.j41(1,"tr")(2,"td")(3,"small"),n.EFF(4),n.k0s()(),n.j41(5,"td"),n.EFF(6),n.k0s(),n.j41(7,"td"),n.EFF(8),n.k0s(),n.j41(9,"td"),n.EFF(10),n.k0s()(),n.bVm()),2&o){let i,t,e;const r=l.$implicit,a=n.XpG(5);n.R7$(4),n.JRh(r.ProductName),n.R7$(2),n.JRh(a.APP_FUNC_FormatMoney(null!==(i=r.AftertaxUnitPrice)&&void 0!==i?i:0)),n.R7$(2),n.JRh(a.APP_FUNC_RoundNumber(null!==(t=r.Quantity)&&void 0!==t?t:0,100)),n.R7$(2),n.JRh(a.APP_FUNC_FormatMoney(null!==(e=r.AftertaxValue)&&void 0!==e?e:0))}}function cn(o,l){if(1&o&&(n.nrm(0,"hr",18),n.j41(1,"div",27)(2,"table",28)(3,"thead")(4,"tr")(5,"th"),n.EFF(6),n.nI1(7,"translate"),n.k0s(),n.j41(8,"th"),n.EFF(9),n.nI1(10,"translate"),n.k0s(),n.j41(11,"th"),n.EFF(12),n.nI1(13,"translate"),n.k0s(),n.j41(14,"th"),n.EFF(15),n.nI1(16,"translate"),n.nrm(17,"br"),n.j41(18,"small"),n.EFF(19),n.nI1(20,"translate"),n.k0s()()()(),n.j41(21,"tbody"),n.DNE(22,dn,11,4,"ng-container",29),n.j41(23,"tr")(24,"td")(25,"b"),n.EFF(26),n.nI1(27,"translate"),n.k0s()(),n.nrm(28,"td")(29,"td"),n.j41(30,"td")(31,"b"),n.EFF(32),n.k0s()()()()()()),2&o){let i;const t=n.XpG(4);n.R7$(6),n.JRh(n.bMT(7,8,"ProductName")),n.R7$(3),n.JRh(n.bMT(10,10,"Price")),n.R7$(3),n.JRh(n.bMT(13,12,"Quantity")),n.R7$(3),n.JRh(n.bMT(16,14,"IntoMoney")),n.R7$(4),n.JRh(n.bMT(20,16,"IncludedVAT")),n.R7$(3),n.Y8G("ngForOf",null!==(i=null==t.billInfo?null:t.billInfo.DetailBillDetails)&&void 0!==i?i:n.lJ4(20,tn)),n.R7$(4),n.JRh(n.bMT(27,18,"Total")),n.R7$(6),n.SpI("",t.APP_FUNC_FormatMoney(t.billInfo.AftertaxBillValue),"\u0111")}}function sn(o,l){1&o&&(n.j41(0,"b",32),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&o&&(n.R7$(),n.JRh(n.bMT(2,1,"RefundYes")))}function _n(o,l){1&o&&(n.j41(0,"b",32),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&o&&(n.R7$(),n.JRh(n.bMT(2,1,"RefundRequested")))}function un(o,l){if(1&o&&(n.qex(0),n.j41(1,"div",30)(2,"table",17)(3,"tr")(4,"td"),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.j41(7,"td"),n.DNE(8,sn,3,3,"b",31)(9,_n,3,3,"b",31),n.k0s()(),n.j41(10,"tr")(11,"td"),n.EFF(12),n.nI1(13,"translate"),n.k0s(),n.j41(14,"td")(15,"b"),n.EFF(16),n.k0s()()()()(),n.bVm()),2&o){const i=n.XpG(4);n.R7$(5),n.JRh(n.bMT(6,5,"Refund")),n.R7$(3),n.Y8G("ngIf",i.orderInfo.IsRefund&&i.orderInfo.RefundFinish),n.R7$(),n.Y8G("ngIf",i.orderInfo.IsRefund&&!i.orderInfo.RefundFinish),n.R7$(3),n.JRh(n.bMT(13,7,"RefundValue")),n.R7$(4),n.SpI("",i.APP_FUNC_FormatMoney(i.orderInfo.RefundValue),"\u0111")}}function mn(o,l){if(1&o&&(n.qex(0),n.j41(1,"div",33)(2,"div",26)(3,"b"),n.EFF(4),n.nI1(5,"translate"),n.k0s()(),n.j41(6,"table",17)(7,"tr")(8,"td"),n.EFF(9),n.nI1(10,"translate"),n.k0s(),n.j41(11,"td")(12,"b"),n.EFF(13),n.k0s()()()()(),n.bVm()),2&o){const i=n.XpG(4);n.R7$(4),n.JRh(n.bMT(5,3,"Exchange")),n.R7$(5),n.JRh(n.bMT(10,5,"ExchangeValue")),n.R7$(4),n.SpI("",i.APP_FUNC_FormatMoney(i.orderInfo.ExchangeValue),"\u0111")}}function gn(o,l){if(1&o&&(n.qex(0),n.j41(1,"div",34)(2,"div",26)(3,"b"),n.EFF(4),n.nI1(5,"translate"),n.k0s()(),n.j41(6,"table",17)(7,"tr")(8,"td"),n.EFF(9),n.nI1(10,"translate"),n.k0s(),n.j41(11,"td")(12,"b"),n.EFF(13),n.k0s()()()()(),n.bVm()),2&o){const i=n.XpG(4);n.R7$(4),n.JRh(n.bMT(5,3,"BillVAT")),n.R7$(5),n.JRh(n.bMT(10,5,"Status")),n.R7$(4),n.JRh(i.orderInfo.VEinvoiceStatusName)}}function fn(o,l){if(1&o&&(n.j41(0,"tr")(1,"td"),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"td")(5,"b"),n.EFF(6),n.k0s()()()),2&o){const i=n.XpG(7);n.R7$(2),n.JRh(n.bMT(3,2,"Email")),n.R7$(4),n.JRh(i.customerInvoice.BuyerEmail)}}function hn(o,l){if(1&o&&(n.j41(0,"tr")(1,"td"),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"td")(5,"b"),n.EFF(6),n.k0s()()()),2&o){const i=n.XpG(7);n.R7$(2),n.JRh(n.bMT(3,2,"Mobile")),n.R7$(4),n.JRh(i.customerInvoice.BuyerPhone)}}function In(o,l){if(1&o&&(n.j41(0,"table",17)(1,"tr")(2,"td"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"td")(6,"b"),n.EFF(7),n.k0s()()(),n.j41(8,"tr")(9,"td"),n.EFF(10),n.nI1(11,"translate"),n.k0s(),n.j41(12,"td")(13,"b"),n.EFF(14),n.k0s()()(),n.j41(15,"tr")(16,"td"),n.EFF(17),n.nI1(18,"translate"),n.k0s(),n.j41(19,"td")(20,"b"),n.EFF(21),n.k0s()()(),n.DNE(22,fn,7,4,"tr",5)(23,hn,7,4,"tr",5),n.k0s()),2&o){const i=n.XpG(6);n.R7$(3),n.JRh(n.bMT(4,8,"BillCompanyName")),n.R7$(4),n.JRh(i.customerInvoice.CompanyName),n.R7$(3),n.JRh(n.bMT(11,10,"BillCompanyAddress")),n.R7$(4),n.JRh(i.customerInvoice.Address),n.R7$(3),n.JRh(n.bMT(18,12,"BillCompanyTax")),n.R7$(4),n.JRh(i.customerInvoice.TaxCode),n.R7$(),n.Y8G("ngIf",i.customerInvoice.BuyerEmail),n.R7$(),n.Y8G("ngIf",i.customerInvoice.BuyerPhone)}}function pn(o,l){if(1&o){const i=n.RV6();n.j41(0,"div",39)(1,"div",40)(2,"b"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"ion-button",41),n.bIt("click",function(e){n.eBV(i);const r=n.XpG(5);return n.Njj(r.presentModalCustomerInvoice(e))}),n.nrm(6,"ion-icon",42),n.k0s()(),n.nrm(7,"hr"),n.DNE(8,In,24,14,"table",43),n.k0s()}if(2&o){const i=n.XpG(5);n.R7$(3),n.JRh(n.bMT(4,2,"ExportBillInfo")),n.R7$(5),n.Y8G("ngIf",i.customerInvoice)}}function vn(o,l){if(1&o){const i=n.RV6();n.qex(0),n.j41(1,"div",35)(2,"ion-radio-group",36),n.bIt("ionChange",function(e){n.eBV(i);const r=n.XpG(4);return n.Njj(r.changeIsGetBill(e))}),n.j41(3,"ion-radio",37),n.EFF(4),n.nI1(5,"translate"),n.k0s(),n.j41(6,"ion-radio",37),n.EFF(7),n.nI1(8,"translate"),n.k0s()()(),n.DNE(9,pn,9,4,"div",38),n.bVm()}if(2&o){const i=n.XpG(4);n.R7$(2),n.Y8G("value",0),n.R7$(),n.Y8G("value",0),n.R7$(),n.JRh(n.bMT(5,6,"NoGetBill")),n.R7$(2),n.Y8G("value",1),n.R7$(),n.JRh(n.bMT(8,8,"YesGetBill")),n.R7$(2),n.Y8G("ngIf",i.IsGetBill)}}function bn(o,l){if(1&o&&(n.qex(0)(1),n.j41(2,"div",25)(3,"div",26)(4,"b"),n.EFF(5),n.nI1(6,"translate"),n.k0s()(),n.j41(7,"table",17)(8,"tr")(9,"td"),n.EFF(10),n.nI1(11,"translate"),n.k0s(),n.j41(12,"td"),n.EFF(13),n.k0s()(),n.j41(14,"tr")(15,"td"),n.EFF(16),n.nI1(17,"translate"),n.k0s(),n.j41(18,"td"),n.EFF(19),n.k0s()()()(),n.DNE(20,cn,33,21),n.bVm(),n.DNE(21,un,17,9,"ng-container",5)(22,mn,14,7,"ng-container",5)(23,gn,14,7,"ng-container",5)(24,vn,10,10,"ng-container",5),n.bVm()),2&o){let i,t;const e=n.XpG(3);n.R7$(5),n.JRh(n.bMT(6,11,"Used")),n.R7$(5),n.JRh(n.bMT(11,13,"UsedElectricValue")),n.R7$(3),n.Lme("",e.APP_FUNC_RoundNumber(null!==(i=e.orderInfo.ElectricUsed)&&void 0!==i?i:0),"",null!==(i=e.orderInfo.Unit)&&void 0!==i?i:"kWh",""),n.R7$(3),n.JRh(n.bMT(17,15,"UsedMoneyValue")),n.R7$(3),n.SpI("",e.APP_FUNC_FormatMoney(null!==(t=e.orderInfo.AftertaxBillValue)&&void 0!==t?t:0),"\u0111"),n.R7$(),n.vxM(20,e.billInfo?20:-1),n.R7$(),n.Y8G("ngIf",e.orderInfo.RefundValue),n.R7$(),n.Y8G("ngIf",e.orderInfo.ExchangeValue),n.R7$(),n.Y8G("ngIf",e.orderInfo.VEinvoiceStatus&&e.orderInfo.VEinvoiceStatus!=e.v_einvoice_status.ChuaXacNhan),n.R7$(),n.Y8G("ngIf",e.orderInfo.VEinvoiceStatus==e.v_einvoice_status.ChuaXacNhan)}}function Cn(o,l){if(1&o&&(n.qex(0),n.j41(1,"div",15)(2,"div",16)(3,"table",17)(4,"tr")(5,"td"),n.EFF(6),n.nI1(7,"translate"),n.k0s(),n.j41(8,"td")(9,"b"),n.EFF(10),n.k0s()()(),n.j41(11,"tr")(12,"td"),n.EFF(13),n.nI1(14,"translate"),n.k0s(),n.j41(15,"td")(16,"b"),n.EFF(17),n.k0s()()(),n.j41(18,"tr")(19,"td"),n.EFF(20),n.nI1(21,"translate"),n.k0s(),n.j41(22,"td")(23,"b"),n.EFF(24),n.k0s()()(),n.DNE(25,an,6,4,"tr",5),n.j41(26,"tr")(27,"td"),n.EFF(28),n.nI1(29,"translate"),n.k0s(),n.j41(30,"td"),n.EFF(31),n.k0s()()()(),n.nrm(32,"hr",18),n.j41(33,"div",19)(34,"div",20)(35,"b"),n.EFF(36),n.nI1(37,"translate"),n.k0s()(),n.j41(38,"table",17)(39,"tr")(40,"td"),n.EFF(41),n.nI1(42,"translate"),n.k0s(),n.j41(43,"td")(44,"b"),n.EFF(45),n.k0s()()(),n.DNE(46,ln,6,4,"tr",21),n.j41(47,"tr",22)(48,"td",23)(49,"b"),n.EFF(50),n.nI1(51,"translate"),n.k0s()(),n.j41(52,"td",24)(53,"strong"),n.EFF(54),n.k0s()()()()()(),n.DNE(55,bn,25,17,"ng-container",5),n.bVm()),2&o){let i,t,e;const r=n.XpG(2);n.R7$(6),n.JRh(n.bMT(7,19,"OrderCode")),n.R7$(4),n.JRh(r.orderInfo.OrderCode),n.R7$(3),n.JRh(n.bMT(14,21,"OrderValue")),n.R7$(4),n.SpI("",r.APP_FUNC_FormatMoney(r.orderInfo.PayValue),"\u0111"),n.R7$(3),n.JRh(n.bMT(21,23,"OrderStatus")),n.R7$(3),n.ZvI("text-",r.APP_FUNC_GetColor_VOrderStatus(r.orderInfo.VOrderStatus),""),n.R7$(),n.JRh(r.orderInfo.VOrderStatusName),n.R7$(),n.Y8G("ngIf",r.orderInfo.Paymethod),n.R7$(3),n.JRh(n.bMT(29,25,"LastUpdateTime")),n.R7$(3),n.JRh(r.APP_FUNC_FormatDate(r.getLastUpdateTime())),n.R7$(5),n.JRh(n.bMT(37,27,"Detail")),n.R7$(5),n.JRh(n.bMT(42,29,"ChargingPackage")),n.R7$(4),n.SpI("",r.APP_FUNC_FormatMoney(null!==(i=r.orderInfo.PayValue)&&void 0!==i?i:0),"\u0111"),n.R7$(),n.Y8G("ngIf",r.orderInfo.PromoteValue),n.R7$(4),n.JRh(n.bMT(51,31,"PayValue")),n.R7$(4),n.SpI("",r.APP_FUNC_FormatMoney(null!==(t=r.orderInfo.RealValue)&&void 0!==t?t:0),"\u0111"),n.R7$(),n.Y8G("ngIf",n.sMw(33,en,r.v_order_status.DaHoanTien,r.v_order_status.DaYeuCauHoanTien,r.v_order_status.HoanTat).includes(null!==(e=r.orderInfo.VOrderStatus)&&void 0!==e?e:0))}}function Rn(o,l){if(1&o&&(n.qex(0),n.j41(1,"div",12),n.DNE(2,rn,3,0,"ng-container",5)(3,Cn,56,37,"ng-container",5),n.k0s(),n.bVm()),2&o){const i=n.XpG();n.R7$(2),n.Y8G("ngIf",(null==i.orderInfo?null:i.orderInfo.VOrderStatus)==i.v_order_status.DangThanhToan),n.R7$(),n.Y8G("ngIf",i.orderInfo)}}function Fn(o,l){if(1&o){const i=n.RV6();n.j41(0,"div",44),n.nrm(1,"ion-img",45),n.j41(2,"h4"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"div")(6,"small"),n.EFF(7),n.nI1(8,"translate"),n.k0s()(),n.j41(9,"div",46)(10,"ion-button",47),n.bIt("click",function(){n.eBV(i),n.XpG();const e=n.sdS(13);return n.Njj(null==e?null:e.dismiss())}),n.EFF(11),n.nI1(12,"translate"),n.k0s()()()}2&o&&(n.R7$(3),n.JRh(n.bMT(4,3,"InvoiceRequestSent")),n.R7$(4),n.JRh(n.bMT(8,5,"InvoiceRequestSentMessage")),n.R7$(4),n.JRh(n.bMT(12,7,"Close")))}function On(o,l){if(1&o){const i=n.RV6();n.qex(0),n.j41(1,"ion-footer")(2,"div",48)(3,"ion-button",49),n.bIt("click",function(e){n.eBV(i);const r=n.XpG();return n.Njj(r.cancelOrder(e))}),n.j41(4,"ion-label"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()()(),n.bVm()}2&o&&(n.R7$(5),n.JRh(n.bMT(6,1,"CancelOrder")))}function Pn(o,l){if(1&o){const i=n.RV6();n.qex(0),n.j41(1,"ion-footer")(2,"div",48)(3,"ion-button",50),n.bIt("click",function(e){n.eBV(i);const r=n.XpG(2);return n.Njj(r.openDetailChargingSession(e))}),n.j41(4,"ion-label"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()()(),n.bVm()}2&o&&(n.R7$(5),n.JRh(n.bMT(6,1,"GoToChargingSession")))}function Mn(o,l){if(1&o){const i=n.RV6();n.qex(0),n.j41(1,"div",51)(2,"div")(3,"small"),n.EFF(4),n.nI1(5,"translate"),n.nI1(6,"translate"),n.k0s()(),n.j41(7,"div")(8,"b"),n.EFF(9),n.k0s()(),n.j41(10,"small"),n.EFF(11),n.nI1(12,"translate"),n.k0s()(),n.j41(13,"div")(14,"ion-button",50),n.bIt("click",function(e){n.eBV(i);const r=n.XpG(3);return n.Njj(r.chargingStart(e))}),n.j41(15,"ion-label"),n.EFF(16),n.nI1(17,"translate"),n.k0s()()(),n.bVm()}if(2&o){const i=n.XpG(3);n.R7$(4),n.E5c("",n.bMT(5,6,"OrderWillExpireLater")," ",i.APP_FUNC_RoundNumber(i.timeout/6e4,1)," ",n.bMT(6,8,"Minute"),"!"),n.R7$(5),n.JRh(i.getTimeCountdown()),n.R7$(2),n.JRh(n.bMT(12,10,"PleaseStartChargingSession")),n.R7$(5),n.JRh(n.bMT(17,12,"StartChargingSession"))}}function Tn(o,l){if(1&o){const i=n.RV6();n.qex(0),n.j41(1,"div",52)(2,"div",53)(3,"small"),n.EFF(4),n.nI1(5,"translate"),n.k0s()(),n.j41(6,"div",54)(7,"ion-button",47),n.bIt("click",function(e){n.eBV(i);const r=n.XpG(3);return n.Njj(r.sendFeedback(e))}),n.j41(8,"ion-label"),n.EFF(9),n.nI1(10,"translate"),n.k0s()()()(),n.bVm()}2&o&&(n.R7$(4),n.JRh(n.bMT(5,2,"OrderHasExpired")),n.R7$(5),n.JRh(n.bMT(10,4,"Feedback")))}function kn(o,l){if(1&o&&(n.qex(0),n.j41(1,"ion-footer")(2,"div",48),n.DNE(3,Mn,18,14,"ng-container",5)(4,Tn,11,6,"ng-container",5),n.k0s()(),n.bVm()),2&o){const i=n.XpG(2);n.R7$(3),n.Y8G("ngIf",i.timeCountdown>0),n.R7$(),n.Y8G("ngIf",i.timeCountdown<=0)}}function jn(o,l){if(1&o&&(n.qex(0),n.DNE(1,Pn,7,3,"ng-container",5)(2,kn,5,2,"ng-container",5),n.bVm()),2&o){const i=n.XpG();n.R7$(),n.Y8G("ngIf",i.chargingSession),n.R7$(),n.Y8G("ngIf",!i.chargingSession)}}function Dn(o,l){if(1&o){const i=n.RV6();n.qex(0),n.j41(1,"ion-footer")(2,"div",48)(3,"ion-button",50),n.bIt("click",function(e){n.eBV(i);const r=n.XpG(2);return n.Njj(r.openDetailChargingSession(e))}),n.j41(4,"ion-label"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()()(),n.bVm()}2&o&&(n.R7$(5),n.JRh(n.bMT(6,1,"GoToChargingSession")))}function $n(o,l){if(1&o&&(n.qex(0),n.DNE(1,Dn,7,3,"ng-container",5),n.bVm()),2&o){const i=n.XpG();n.R7$(),n.Y8G("ngIf",i.chargingSession)}}function En(o,l){if(1&o){const i=n.RV6();n.qex(0),n.j41(1,"ion-footer")(2,"div",48)(3,"ion-button",55),n.bIt("click",function(e){n.eBV(i);const r=n.XpG();return n.Njj(r.sendFeedback(e))}),n.j41(4,"ion-label"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()()(),n.bVm()}2&o&&(n.R7$(5),n.JRh(n.bMT(6,1,"SendFeedback")))}function xn(o,l){if(1&o){const i=n.RV6();n.j41(0,"div",48)(1,"ion-button",57),n.bIt("click",function(e){n.eBV(i);const r=n.XpG(3);return n.Njj(r.completeOrder(e))}),n.j41(2,"ion-label"),n.EFF(3),n.nI1(4,"translate"),n.k0s()()()}2&o&&(n.R7$(3),n.JRh(n.bMT(4,1,"Complete")))}function yn(o,l){if(1&o){const i=n.RV6();n.j41(0,"div",48)(1,"div",58)(2,"div",59)(3,"ion-chip",60),n.bIt("click",function(){n.eBV(i);const e=n.XpG(3);return n.Njj(e.navigateByUrl(e.APP_ROUTE.DEFAULT))}),n.nrm(4,"ion-icon",61),n.j41(5,"ion-label"),n.EFF(6),n.nI1(7,"translate"),n.k0s()()(),n.j41(8,"div",62)(9,"ion-button",63),n.bIt("click",function(e){n.eBV(i);const r=n.XpG(3);return n.Njj(r.openDetailBill(e))}),n.nrm(10,"ion-icon",64),n.j41(11,"ion-label"),n.EFF(12),n.nI1(13,"translate"),n.k0s()()()()()}2&o&&(n.R7$(6),n.JRh(n.bMT(7,2,"Home")),n.R7$(6),n.JRh(n.bMT(13,4,"ViewBill")))}function Sn(o,l){if(1&o&&(n.j41(0,"ion-footer"),n.DNE(1,xn,5,3,"div",56)(2,yn,14,6,"div",56),n.k0s()),2&o){const i=n.XpG(2);n.R7$(),n.Y8G("ngIf",(null==i.orderInfo?null:i.orderInfo.VEinvoiceStatus)==i.v_einvoice_status.ChuaXacNhan),n.R7$(),n.Y8G("ngIf",(null==i.orderInfo?null:i.orderInfo.VEinvoiceStatus)!=i.v_einvoice_status.ChuaXacNhan)}}function Gn(o,l){if(1&o&&(n.qex(0),n.DNE(1,Sn,3,2,"ion-footer",5),n.bVm()),2&o){const i=n.XpG();n.R7$(),n.Y8G("ngIf",null==i.orderInfo?null:i.orderInfo.BillId)}}const Vn=[{path:"",component:(()=>{var o;class l{constructor(t,e,r,a,d,_){var u,f;this.router=t,this.loadingController=r,this.toastController=a,this.modalController=d,this.animationController=_,this.platform=G.Ii.getPlatform(),this.APP_ROUTE=v._,this.APP_FUNC_FormatMoney=C.xi,this.APP_FUNC_FormatDate=C.Rv,this.APP_FUNC_GetColor_VOrderStatus=C.qM,this.APP_FUNC_RoundNumber=C.Rw,this.v_order_status=I.TL,this.v_einvoice_status=I.XM,this.v_sale_type=I.aD,this.customerInvoices=[],this.timeout=18e4,this.timeCountdown=0,this.intervalCountdown=null;let b=null!==(u=e.snapshot.params.id)&&void 0!==u?u:"";b&&(this.OrderId=parseInt(b));let g=null!==(f=e.snapshot.params.code)&&void 0!==f?f:"";g&&(this.OrderCode=g)}ngOnInit(){var t=this;this.IsOnInit=!0,(0,m.A)(function*(){(yield(0,w.kU)())&&t.refreshData()})()}ngOnDestroy(){this.IsOnInit=!1,this.destroyTimeout()}ionViewDidEnter(){this.IsOnInit||this.ngOnInit()}ionViewDidLeave(){this.ngOnDestroy()}onIonRefresher(t){this.refreshData(()=>{t.target.complete()})}refreshTimeoutOrder(){clearTimeout(this.timeoutOrder),this.timeoutOrder=setTimeout(()=>{var t,e;this.orderInfo&&[I.TL.DangThanhToan,I.TL.DaThanhToan].includes(null!==(t=null===(e=this.orderInfo)||void 0===e?void 0:e.VOrderStatus)&&void 0!==t?t:0)&&this.refreshOrder()},5e3)}destroyTimeout(){clearTimeout(this.timeoutOrder)}refreshData(t){var e=this;return(0,m.A)(function*(){e.refreshOrder(t)})()}refreshOrder(t){var e=this;return(0,m.A)(function*(){var r=()=>{var a,d,_,u,f;if(e.refreshTimeoutOrder(),[I.TL.DaThanhToan,I.TL.DangSac].includes(null!==(a=null===(d=e.orderInfo)||void 0===d?void 0:d.VOrderStatus)&&void 0!==a?a:0))(0,x.KX)({params:{OrderCode:null===(f=e.orderInfo)||void 0===f?void 0:f.OrderCode},callback:g=>{var R,M,T;if(null!=g&&g.Succeeded){if(e.chargingSession=(null!==(R=g.Data)&&void 0!==R?R:[]).find(k=>{var j;return[I.jT.KhoiTaoPhienSac,I.jT.DangSac].includes(null!==(j=k.VSessionStatus)&&void 0!==j?j:0)}),e.chargingSession)return void e.router.navigateByUrl(v._.CHARGING_SESSION_DETAIL.replace(":id",null!==(M=null===(T=e.chargingSession.ChargeSessionId)||void 0===T?void 0:T.toString())&&void 0!==M?M:""),{replaceUrl:!0})}else(0,h.cX)(e.toastController,{},g).then(k=>k.present());e.setTimeCountdown()}});else if([I.TL.HoanTat].includes(null!==(_=null===(u=e.orderInfo)||void 0===u?void 0:u.VOrderStatus)&&void 0!==_?_:0)){var b;null!==(b=e.orderInfo)&&void 0!==b&&b.BillId&&(0,q.q)({loadingController:e.loadingController,params:{BillId:e.orderInfo.BillId},callback:g=>{null!=g&&g.Succeeded?e.billInfo=g.Data:(0,h.cX)(e.toastController,{},g).then(R=>R.present())}})}};e.OrderId?(0,P.vp)({loadingController:e.loadingController,params:{OrderId:e.OrderId},callback:a=>{e.response=a,null!=a&&a.Succeeded?(e.orderInfo=a.Data,r()):(0,h.cX)(e.toastController,{},a).then(d=>d.present()),t&&t()}}):e.OrderCode&&(0,P.FS)({loadingController:e.loadingController,params:{OrderCode:e.OrderCode},callback:a=>{e.response=a,null!=a&&a.Succeeded?(e.orderInfo=a.Data,r()):(0,h.cX)(e.toastController,{},a).then(d=>d.present()),t&&t()}})})()}chargingStart(t){var e=this;return(0,m.A)(function*(){var r,a,d;(0,x.aN)({loadingController:e.loadingController,params:{StationCode:null===(r=e.orderInfo)||void 0===r?void 0:r.StationCode,ConnectorId:null===(a=e.orderInfo)||void 0===a?void 0:a.ConnectorId,OrderCode:null===(d=e.orderInfo)||void 0===d?void 0:d.OrderCode},callback:_=>{null!=_&&_.Succeeded?e.router.navigateByUrl(v._.CHARGING_SESSION_DETAIL.replace(":id",_.Data)):(0,h.cX)(e.toastController,{},_).then(u=>u.present())}})})()}sendFeedback(t){var e=this;return(0,m.A)(function*(){var r;(yield e.modalController.create({component:V.l,componentProps:{feedback:{DocType:L.v.ORDER_INFO,DocId:null===(r=e.orderInfo)||void 0===r?void 0:r.OrderId}},cssClass:"ion-modal-breakpoint",breakpoints:[0,.5,1],initialBreakpoint:1})).present()})()}shareOrder(t){var e=this;return(0,m.A)(function*(){(0,C.HU)(document.getElementById("orderShare")).then(r=>{var a;r&&(0,Q.C)(r,`${null===(a=e.orderInfo)||void 0===a?void 0:a.OrderCode}.png`)})})()}changeIsGetBill(t){this.IsGetBill=t.detail.value,this.GetCustomerinvoices()}selectCustomerInvoice(t){this.presentModalCustomerInvoice(t)}editCustomerInvoice(t){var e;this.presentModalAddCustomerInvoice(t,null===(e=this.customerInvoice)||void 0===e?void 0:e.CustomerInvoiceId)}GetCustomerinvoices(){var t=this;return(0,m.A)(function*(){(0,O.Ul)({loadingController:t.loadingController,params:{PageNumber:1,PageSize:100},callback:e=>{var r;if(null!=e&&e.Succeeded)if(t.customerInvoices=null!==(r=e.Data)&&void 0!==r?r:[],t.customerInvoices.length)if(1==t.customerInvoices.length)t.customerInvoice=t.customerInvoices[0];else{var a;t.customerInvoice=null!==(a=t.customerInvoices.filter(d=>d.IsDefault)[0])&&void 0!==a?a:t.customerInvoices[0]}else t.presentModalAddCustomerInvoice()}})})()}GetCustomerinvoice(t){var e=this;return(0,m.A)(function*(){t&&(0,O.kT)({loadingController:e.loadingController,params:{CustomerInvoiceId:t},callback:r=>{null!=r&&r.Succeeded&&(e.customerInvoice=r.Data)}})})()}completeOrder(t){var e=this;return(0,m.A)(function*(){var r;if(null!==(r=e.orderInfo)&&void 0!==r&&r.BillId&&!e.isCompleteOrder)if(e.isCompleteOrder=!0,e.IsGetBill){var a;H({loadingController:e.loadingController,params:Object.assign({},e.customerInvoice,{BillId:null===(a=e.orderInfo)||void 0===a?void 0:a.BillId}),callback:_=>{var u;null!=_&&_.Succeeded?(e.refreshData(),null===(u=e.modalAddCustomerInvoiceSuccessRef)||void 0===u||u.present()):((0,h.cX)(e.toastController,{},_).then(f=>f.present()),e.isCompleteOrder=!1)}})}else{var d;K({loadingController:e.loadingController,params:{BillId:null===(d=e.orderInfo)||void 0===d?void 0:d.BillId},callback:_=>{null!=_&&_.Succeeded?e.refreshData():((0,h.cX)(e.toastController,{},_).then(u=>u.present()),e.isCompleteOrder=!1)}})}})()}cancelOrder(t){var e=this;return(0,m.A)(function*(){var r;(0,h.Yy)(e.modalController,e.animationController,{selectedId:null===(r=e.orderInfo)||void 0===r?void 0:r.OrderId,message:{TitleConfirm:"CancelOrder",TextConfirm:"Confirm"},fnConfirm:a=>{(0,P.rZ)({loadingController:e.loadingController,params:{OrderId:a},callback:d=>{null!=d&&d.Succeeded?e.refreshData():(0,h.cX)(e.toastController,{},d).then(_=>_.present())}})}})})()}presentModalCustomerInvoice(t){var e=this;return(0,m.A)(function*(){var r;const a=yield e.modalController.create({component:Y,componentProps:{CustomerInvoiceId:null===(r=e.customerInvoice)||void 0===r?void 0:r.CustomerInvoiceId}});a.onDidDismiss().then(d=>{"submit"==d.role&&e.GetCustomerinvoice(d.data)}),a.present()})()}presentModalAddCustomerInvoice(t,e){var r=this;return(0,m.A)(function*(){const a=yield r.modalController.create({component:$.$,componentProps:{CustomerInvoiceId:e}});a.onDidDismiss().then(d=>{"success"==d.role&&r.GetCustomerinvoices()}),a.present()})()}navigateByUrl(t){this.router.navigateByUrl(t)}openDetailBill(t){var e=this;return(0,m.A)(function*(){var r,a;e.router.navigateByUrl(v._.BILL_INFO_DETAIL.replace(":id",null!==(r=null===(a=e.orderInfo)||void 0===a||null===(a=a.BillId)||void 0===a?void 0:a.toString())&&void 0!==r?r:""))})()}openDetailChargingSession(t){var e=this;return(0,m.A)(function*(){var r,a;e.router.navigateByUrl(v._.CHARGING_SESSION_DETAIL.replace(":id",null!==(r=null===(a=e.chargingSession)||void 0===a||null===(a=a.ChargeSessionId)||void 0===a?void 0:a.toString())&&void 0!==r?r:""))})()}getLastUpdateTime(){var t,e,r,a,d;return null!==(t=null!==(e=null===(r=this.orderInfo)||void 0===r?void 0:r.ModifiedDate)&&void 0!==e?e:null===(a=this.orderInfo)||void 0===a?void 0:a.PurchaseDate)&&void 0!==t?t:null===(d=this.orderInfo)||void 0===d?void 0:d.OrderDate}getTimeCountdown(){return W()(this.timeCountdown).format("mm:ss")}setTimeCountdown(){var t;let e=this.getLastUpdateTime(),r=null===(t=this.orderInfo)||void 0===t?void 0:t.ServerTime;if(e&&r){let a=new Date(e).getTime()-new Date(r).getTime()+this.timeout;if(a>0){this.timeCountdown=a,clearInterval(this.intervalCountdown);let d=1e3;this.intervalCountdown=setInterval(()=>{if(this.timeCountdown<=d)return this.timeCountdown=0,void clearInterval(this.intervalCountdown);this.timeCountdown-=d},d)}}}}return(o=l).\u0275fac=function(t){return new(t||o)(n.rXU(F.Ix),n.rXU(F.nX),n.rXU(c.Xi),n.rXU(c.K_),n.rXU(c.W3),n.rXU(c.Hx))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-order-info-detail"]],viewQuery:function(t,e){if(1&t&&n.GBs(Z,5),2&t){let r;n.mGM(r=n.lsd())&&(e.modalAddCustomerInvoiceSuccessRef=r.first)}},decls:21,vars:13,consts:[["modalAddCustomerInvoiceSuccess",""],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","end","class","ion-no-margin",3,"click",4,"ngIf"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],[1,"ion-modal-small"],[3,"ngSwitch"],[4,"ngSwitchCase"],["slot","end",1,"ion-no-margin",3,"click"],["color","primary",1,"no-opacity"],["src","../../../assets/icon/ion-icon/share.svg"],[1,"container","mb-5"],[1,"text-center","line-height-0","mb-3"],["color","primary","name","crescent"],["id","orderShare",1,"container-order"],[1,"card-order","rounded","bg-white"],[1,"table","table-borderless","m-0"],[1,"border-dashed"],[1,"card-order-detail","rounded","bg-white"],[1,"mt-3","mb-2"],["class","border-top",4,"ngIf"],[1,"border-top"],[1,"pt-3"],[1,"pt-3","text-primary"],[1,"card-order","rounded","bg-white","mt-3"],[1,"mb-2","d-flex","justify-content-between"],[1,"card-bill-detail","rounded","bg-white"],[1,"table","table-bill-detail","mb-0","border-0"],[4,"ngFor","ngForOf"],[1,"card-order-refund","rounded","bg-white","mt-3"],["class","text-primary",4,"ngIf"],[1,"text-primary"],[1,"card-order-exchange","rounded","bg-white","mt-3"],[1,"card-order-einvoice","rounded","bg-white","mt-3"],[1,"mt-5","mb-3","bill-group-radio"],["mode","md",3,"ionChange","value"],["label-placement","end",3,"value"],["class","card-bill rounded bg-white mt-3",4,"ngIf"],[1,"card-bill","rounded","bg-white","mt-3"],[1,"d-flex","align-items-center","justify-content-between"],["size","small","fill","clear",3,"click"],["src","../../../assets/icon/ion-icon/chevron-right.svg",1,"fs-4"],["class","table table-borderless m-0",4,"ngIf"],[1,"container","p-4","text-center","container-success"],["src","../../../assets/icon/ion-img/success.svg"],[1,"mt-5"],["color","medium","shape","round","fill","outline","expand","block",3,"click"],[1,"container","py-3"],["color","danger","shape","round","fill","outline","expand","block",3,"click"],["color","primary","expand","block","shape","round",3,"click"],[1,"mb-3","text-center"],[1,"row","align-items-center"],[1,"col","pr-2"],[1,"col-auto","pl-2"],["color","warning","shape","round","fill","outline","expand","block",3,"click"],["class","container py-3",4,"ngIf"],["color","primary","shape","round","expand","block",3,"click"],[1,"d-flex","align-items-center"],[1,"pr-3"],["color","primary",3,"click"],["name","home-outline",1,"fs-24"],[1,"flex-grow-1"],["color","primary","shape","round","fill","outline","expand","block",3,"click"],["slot","start","src","../../../assets/icon/ion-icon/view-circle.svg",1,"fs-4"]],template:function(t,e){if(1&t){const r=n.RV6();n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),n.nrm(3,"ion-back-button",2),n.k0s(),n.j41(4,"ion-title"),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.DNE(7,on,6,3,"ion-buttons",3),n.k0s()(),n.j41(8,"ion-content")(9,"ion-refresher",4),n.bIt("ionRefresh",function(d){return n.eBV(r),n.Njj(e.onIonRefresher(d))}),n.nrm(10,"ion-refresher-content"),n.k0s(),n.DNE(11,Rn,4,2,"ng-container",5),n.j41(12,"ion-modal",6,0),n.DNE(14,Fn,13,9,"ng-template"),n.k0s()(),n.qex(15,7),n.DNE(16,On,7,3,"ng-container",8)(17,jn,3,2,"ng-container",8)(18,$n,2,1,"ng-container",8)(19,En,7,3,"ng-container",8)(20,Gn,2,1,"ng-container",8),n.bVm()}2&t&&(n.R7$(3),n.Y8G("defaultHref",e.APP_ROUTE.DEFAULT),n.R7$(2),n.JRh(n.bMT(6,10,"OrderInfo")),n.R7$(2),n.Y8G("ngIf",n.lJ4(12,nn).includes(e.platform)),n.R7$(4),n.Y8G("ngIf",null==e.response?null:e.response.Succeeded),n.R7$(4),n.Y8G("ngSwitch",null==e.orderInfo?null:e.orderInfo.VOrderStatus),n.R7$(),n.Y8G("ngSwitchCase",e.v_order_status.DangThanhToan),n.R7$(),n.Y8G("ngSwitchCase",e.v_order_status.DaThanhToan),n.R7$(),n.Y8G("ngSwitchCase",e.v_order_status.DangSac),n.R7$(),n.Y8G("ngSwitchCase",e.v_order_status.KhongThanhCong),n.R7$(),n.Y8G("ngSwitchCase",e.v_order_status.HoanTat||e.v_order_status.DaHoanTien||e.v_order_status.DaYeuCauHoanTien))},dependencies:[p.Sq,p.bT,p.ux,p.e1,c.Jm,c.QW,c.ZB,c.W9,c.M0,c.eU,c.iq,c.KW,c.he,c.KO,c.f0,c.To,c.Ki,c.w2,c.BC,c.ai,c.Sb,c.Je,c.el,E.D9],styles:['ion-spinner[_ngcontent-%COMP%]{width:3rem;height:3rem}.table[_ngcontent-%COMP%]{table-layout:fixed}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{color:var(--ion-color-medium-shade)}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child   b[_ngcontent-%COMP%]{color:var(--ion-color-dark)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;vertical-align:top}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:0;padding-right:.5rem;font-size:.75rem}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child, .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;text-align:right}.card-order[_ngcontent-%COMP%]{padding:1rem}.card-order.rounded[_ngcontent-%COMP%]{border-top-left-radius:1.5rem!important;border-top-right-radius:1.5rem!important;border-bottom-left-radius:0!important;border-bottom-right-radius:0!important}.card-order-detail[_ngcontent-%COMP%]{padding:1rem}.card-order-detail.rounded[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-top-right-radius:0!important;border-bottom-left-radius:1.5rem!important;border-bottom-right-radius:1.5rem!important}.card-bill-detail[_ngcontent-%COMP%]{padding:1rem .5rem}.card-bill-detail.rounded[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-top-right-radius:0!important;border-bottom-left-radius:1.5rem!important;border-bottom-right-radius:1.5rem!important}.card-bill-detail[_ngcontent-%COMP%]   .table-bill-detail[_ngcontent-%COMP%]{border-radius:.75rem;overflow:hidden;font-size:.75rem}.card-bill-detail[_ngcontent-%COMP%]   .table-bill-detail[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle;border:0}.card-bill-detail[_ngcontent-%COMP%]   .table-bill-detail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .card-bill-detail[_ngcontent-%COMP%]   .table-bill-detail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem;text-align:right}.card-bill-detail[_ngcontent-%COMP%]   .table-bill-detail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child, .card-bill-detail[_ngcontent-%COMP%]   .table-bill-detail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:right}.card-bill-detail[_ngcontent-%COMP%]   .table-bill-detail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, .card-bill-detail[_ngcontent-%COMP%]   .table-bill-detail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{text-align:left}.card-order-used[_ngcontent-%COMP%], .card-order-exchange[_ngcontent-%COMP%], .card-order-refund[_ngcontent-%COMP%], .card-order-einvoice[_ngcontent-%COMP%]{padding:1rem}.card-order-used.rounded[_ngcontent-%COMP%], .card-order-exchange.rounded[_ngcontent-%COMP%], .card-order-refund.rounded[_ngcontent-%COMP%], .card-order-einvoice.rounded[_ngcontent-%COMP%]{border-radius:1.5rem!important}.card-bill[_ngcontent-%COMP%]{padding:1rem}.card-bill.rounded[_ngcontent-%COMP%]{border-radius:1.5rem!important}.card-bill[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important}.card-bill[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-size:.875rem}.bill-group-radio[_ngcontent-%COMP%]   ion-radio[_ngcontent-%COMP%]{margin:0 2rem .5rem 0}hr.border-dashed[_ngcontent-%COMP%]{margin:0;position:relative;z-index:1}hr.border-dashed[_ngcontent-%COMP%]:before, hr.border-dashed[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;z-index:2;bottom:0;margin-bottom:-1rem;width:2rem;height:2rem;border-radius:50%;background-color:var(--ion-background-color-primary)}hr.border-dashed[_ngcontent-%COMP%]:before{left:-1rem}hr.border-dashed[_ngcontent-%COMP%]:after{right:-1rem}.container-success[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:3.5rem;margin:1rem auto}']}),l})()}];let Nn=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[F.iI.forChild(Vn),F.iI]}),l})();var Bn=s(3890);let Jn=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[p.MD,S.YN,c.bv,Nn,Bn.x]}),l})()}}]);