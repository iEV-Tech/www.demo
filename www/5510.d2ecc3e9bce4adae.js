"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5510],{5510:(me,I,d)=>{d.r(I),d.d(I,{UserPageModule:()=>de});var h=d(177),E=d(9417),s=d(9420),U=d(7625),m=d(467),N=d(23),M=d(1038),b=d(9946),F=d(6539),P=d(8517),j=d(8833),k=d(5312),p=d(8650),A=d(4393),T=d(6171),O=d(6757),v=d(6037);const $=function(){var a=(0,m.A)(function*(l){var o,t;l.params=l.params||{},(0,v.hm)({url:"api/OwnerCompany/get-ownercompany",params:{PageNumber:null!==(o=l.params.PageNumber)&&void 0!==o?o:1,PageSize:null!==(t=l.params.PageSize)&&void 0!==t?t:10},success:n=>{"function"==typeof l.callback&&l.callback(n.data||null)},error:n=>{var i;"function"==typeof l.callback&&l.callback(null==n||null===(i=n.response)||void 0===i?void 0:i.data),console.error(n)},loading:l.loading,loadingController:l.loadingController})});return function(o){return a.apply(this,arguments)}}(),V=function(){var a=(0,m.A)(function*(l){var o,t;l.params=l.params||{},(0,v.hm)({url:"api/UserClassifyHistory/get-history",params:{PageNumber:null!==(o=l.params.PageNumber)&&void 0!==o?o:1,PageSize:null!==(t=l.params.PageSize)&&void 0!==t?t:10},success:n=>{"function"==typeof l.callback&&l.callback(n.data||null)},error:n=>{var i;"function"==typeof l.callback&&l.callback(null==n||null===(i=n.response)||void 0===i?void 0:i.data),console.error(n)},loading:l.loading,loadingController:l.loadingController})});return function(o){return a.apply(this,arguments)}}();var e=d(4438),y=d(4842);function w(a,l){1&a&&(e.j41(0,"div",9),e.nrm(1,"img",10),e.j41(2,"div",11),e.EFF(3),e.nI1(4,"translate"),e.k0s()()),2&a&&(e.R7$(3),e.JRh(e.bMT(4,1,"DataNotFound")))}function B(a,l){if(1&a&&(e.qex(0),e.j41(1,"div",12)(2,"div",13)(3,"div",14)(4,"b"),e.EFF(5),e.k0s()(),e.j41(6,"div",15)(7,"small",16),e.EFF(8),e.k0s(),e.j41(9,"small",17),e.EFF(10),e.nI1(11,"translate"),e.k0s()()()(),e.bVm()),2&a){const o=l.$implicit,t=e.XpG();e.R7$(5),e.JRh(o.UserClassifyName),e.R7$(3),e.SpI(" ",t.APP_FUNC_FormatDate(o.CreatedDate)," "),e.R7$(2),e.SpI(" ",e.bMT(11,3,o.IsOwnerChange?"User":"Admin")," ")}}function G(a,l){if(1&a){const o=e.RV6();e.j41(0,"ion-infinite-scroll",18),e.bIt("ionInfinite",function(n){e.eBV(o);const i=e.XpG();return e.Njj(i.onIonInfinite(n))}),e.nrm(1,"ion-infinite-scroll-content"),e.k0s()}}let S=(()=>{var a;class l{constructor(t,n,i,r){this.router=t,this.loadingController=n,this.toastController=i,this.modalController=r,this.APP_FUNC_FormatDate=P.Rv,this.paging={sortfield:null,sorttype:null,page:1,limit:20,loading:!1,active:!0},this.filter={},this.userClassifyHistories=[],this.limitLoad=0}ngOnInit(){var t=this;(0,m.A)(function*(){(yield(0,F.kU)())&&t.refreshData()})()}modalClose(){this.modalController.dismiss()}onIonRefresher(t){this.filter={},this.refreshData(()=>{t.target.complete()})}onIonInfinite(t){this.loadMore(()=>{t.target.complete()})}pushData(t){1==this.paging.page&&(this.userClassifyHistories.length=0),this.userClassifyHistories=this.userClassifyHistories.concat(t)}refreshData(t){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit(t)}loadMore(t){this.paging.page+=1,this.loadData_Paging_Limit(t)}searchChange(t){this.filter.search=t.target.value.replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}sortChange(t,n){this.paging.sortfield=t||null,this.paging.sorttype=n||null,this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}filterChange(){this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}loadData_Paging_Limit(t){var n=this;return(0,m.A)(function*(){if(n.limitLoad>0)return void(t&&t());n.limitLoad=300;let i=setInterval(()=>{n.limitLoad-=100,n.limitLoad<=0&&(clearInterval(i),n.loadData_Paging(t))},100)})()}loadData_Paging(t){var n=this;return(0,m.A)(function*(){n.paging.loading=!0,V({loadingController:n.loadingController,params:{PageNumber:n.paging.page,PageSize:n.paging.limit},callback:i=>{var r;n.response=i,null!=i&&i.Succeeded?n.pushData(null!==(r=null==i?void 0:i.Data)&&void 0!==r?r:[]):(0,p.cX)(n.toastController,{},i).then(c=>c.present()),n.paging.loading=!1,n.paging.active=!(null==i||!i.HasNextPage),t&&t()}})})()}}return(a=l).\u0275fac=function(t){return new(t||a)(e.rXU(U.Ix),e.rXU(s.Xi),e.rXU(s.K_),e.rXU(s.W3))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-modal-user-classify-history"]],decls:16,vars:6,consts:[["slot","end"],[3,"click"],["slot","icon-only","name","close-outline"],["slot","fixed",3,"ionRefresh"],["class","container py-5 text-center",4,"ngIf"],[1,"container"],[1,"row"],[4,"ngFor","ngForOf"],[3,"ionInfinite",4,"ngIf"],[1,"container","py-5","text-center"],["src","../../../assets/image/default/no-info.svg"],[1,"text-muted","mt-4"],[1,"col-12","col-lg-6","mb-3"],[1,"card-order"],[1,"d-flex","align-items-start","justify-content-between"],[1,"d-flex","align-items-end","justify-content-between","mt-2"],[1,"text-primary"],[1,"text-muted","fw-500"],[3,"ionInfinite"]],template:function(t,n){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-buttons",0)(6,"ion-button",1),e.bIt("click",function(){return n.modalClose()}),e.nrm(7,"ion-icon",2),e.k0s()()()(),e.j41(8,"ion-content")(9,"ion-refresher",3),e.bIt("ionRefresh",function(r){return n.onIonRefresher(r)}),e.nrm(10,"ion-refresher-content"),e.k0s(),e.DNE(11,w,5,3,"div",4),e.j41(12,"div",5)(13,"div",6),e.DNE(14,B,12,5,"ng-container",7),e.k0s()(),e.DNE(15,G,2,0,"ion-infinite-scroll",8),e.k0s()),2&t&&(e.R7$(3),e.JRh(e.bMT(4,4,"UpgradeHistory")),e.R7$(8),e.Y8G("ngIf",n.response&&!n.userClassifyHistories.length),e.R7$(3),e.Y8G("ngForOf",n.userClassifyHistories),e.R7$(),e.Y8G("ngIf",n.paging.active))},dependencies:[h.Sq,h.bT,s.Jm,s.QW,s.W9,s.eU,s.iq,s.Ax,s.Hp,s.To,s.Ki,s.BC,s.ai,y.D9],styles:[".card-order[_ngcontent-%COMP%]{padding:1rem;border-radius:1rem;background-color:var(--ion-color-light);color:var(--ion-color-light-contrast)}.card-order[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{min-height:1.25rem;padding-top:.25rem;padding-bottom:.25rem}.card-order[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem;line-height:0}"]}),l})();const D=function(){var a=(0,m.A)(function*(l){l.params=l.params||{},(0,v.hm)({url:"api/UserClassify/get-available-catg",params:{},success:o=>{"function"==typeof l.callback&&l.callback(o.data||null)},error:o=>{var t;"function"==typeof l.callback&&l.callback(null==o||null===(t=o.response)||void 0===t?void 0:t.data),console.error(o)},loading:l.loading,loadingController:l.loadingController})});return function(o){return a.apply(this,arguments)}}(),X=function(){var a=(0,m.A)(function*(l){l.params=l.params||{},(0,v.IH)({url:"api/UserClassify/upgrade",params:{UserClassifyCode:l.params.UserClassifyCode,UserClassifyUpgradeValues:l.params.UserClassifyUpgradeValues},success:o=>{"function"==typeof l.callback&&l.callback(o.data||null)},error:o=>{var t;"function"==typeof l.callback&&l.callback(null==o||null===(t=o.response)||void 0===t?void 0:t.data),console.error(o)},loading:l.loading,loadingController:l.loadingController})});return function(o){return a.apply(this,arguments)}}();function H(a,l){if(1&a&&(e.j41(0,"ion-select-option",8),e.EFF(1),e.k0s()),2&a){const o=l.$implicit;e.Y8G("value",o.UcWorkflowId),e.R7$(),e.SpI(" ",o.UserClassifyName," ")}}function J(a,l){1&a&&(e.j41(0,"ion-text",6),e.EFF(1,"*"),e.k0s())}function Y(a,l){if(1&a){const o=e.RV6();e.j41(0,"ion-input",11),e.bIt("ionInput",function(n){e.eBV(o);const i=e.XpG().$implicit,r=e.XpG();return e.Njj(r.changeUserClassifyUpgradeValue_string(n,i.UcCode))}),e.k0s()}if(2&a){const o=e.XpG().$implicit,t=e.XpG();e.Y8G("color",t.validUserClassifyUpgrade(o)?"success":"danger")("placeholder",o.UcName)("value",t.getUserClassifyUpgradeValue(o.UcCode))}}function L(a,l){if(1&a){const o=e.RV6();e.j41(0,"ion-thumbnail",13),e.bIt("click",function(n){e.eBV(o);const i=e.XpG(2).$implicit,r=e.XpG();return e.Njj(r.changeUserClassifyUpgradeValue_filepath(n,i.UcCode))}),e.nrm(1,"img",14),e.k0s()}if(2&a){const o=e.XpG(2).$implicit,t=e.XpG();e.R7$(),e.Y8G("src",t.getUserClassifyUpgradeUrl(o.UcCode),e.B4B)}}function W(a,l){if(1&a){const o=e.RV6();e.j41(0,"ion-input",15),e.bIt("ionFocus",function(n){e.eBV(o);const i=e.XpG(2).$implicit,r=e.XpG();return e.Njj(r.changeUserClassifyUpgradeValue_filepath(n,i.UcCode))}),e.j41(1,"ion-label",16),e.EFF(2),e.nI1(3,"translate"),e.k0s()()}if(2&a){const o=e.XpG(2).$implicit,t=e.XpG();e.Y8G("color",t.validUserClassifyUpgrade(o)?"success":"danger")("placeholder",o.UcName)("value",t.getUserClassifyUpgradeValue(o.UcCode)),e.R7$(2),e.SpI(" ",e.bMT(3,4,"Upload")," ")}}function x(a,l){if(1&a&&e.DNE(0,L,2,1,"ion-thumbnail",12)(1,W,4,6),2&a){const o=e.XpG().$implicit,t=e.XpG();e.vxM(0,t.getUserClassifyUpgradeUrl(o.UcCode)?0:1)}}function z(a,l){if(1&a&&(e.j41(0,"div",5)(1,"div"),e.EFF(2),e.DNE(3,J,2,0,"ion-text",6),e.k0s(),e.DNE(4,Y,1,3)(5,x,2,1),e.k0s()),2&a){let o;const t=l.$implicit;e.R7$(2),e.SpI(" ",t.UcName," "),e.R7$(),e.vxM(3,t.IsRequired?3:-1),e.R7$(),e.vxM(4,"string"===(o=t.DataType)?4:"filepath"===o?5:-1)}}let K=(()=>{var a;class l{constructor(t,n,i){this.loadingController=t,this.toastController=n,this.modalController=i,this.readfile_url=k.c.readfile_url,this.ucWorkflows=[],this.userClassifyUpgradeCatgs=[],this.userClassifyUpgradeValues=[]}ngOnInit(){D({callback:t=>{null!=t&&t.Succeeded?this.ucWorkflows=t.Data||[]:(0,p.cX)(this.toastController,{},t).then(n=>n.present())}}),(0,b.z)({callback:t=>{if(null!=t&&t.Succeeded){var n,i;let c=null!==(n=t.Data)&&void 0!==n?n:{};var r;c.FullName&&this.changeUserClassifyUpgradeValue("HO-TEN",c.FullName),null!==(i=c.Person)&&void 0!==i&&i.Address&&this.changeUserClassifyUpgradeValue("DIA-CHI",null===(r=c.Person)||void 0===r?void 0:r.Address)}}})}modalClose(){this.modalController.dismiss()}get modalSubmit_disabled(){return!this.userClassifyUpgradeCatgs.length||this.userClassifyUpgradeCatgs.map(t=>this.validUserClassifyUpgrade(t)?0:1).includes(1)}modalSubmit(){let t=()=>{var i,r;X({params:{UserClassifyCode:null!==(i=null===(r=this.ucWorkflow)||void 0===r?void 0:r.UserClassifyCode)&&void 0!==i?i:"",UserClassifyUpgradeValues:this.userClassifyUpgradeValues},callback:c=>{var u;null!=c&&c.Succeeded?(this.modalController.dismiss(null,"success"),(0,p.cX)(this.toastController,{color:"success",message:null!==(u=c.Message)&&void 0!==u?u:"Th\u1ef1c hi\u1ec7n n\xe2ng c\u1ea5p t\xe0i kho\u1ea3n th\xe0nh c\xf4ng"}).then(g=>g.present())):(0,p.cX)(this.toastController,{},c).then(g=>g.present())}})},n=this.userClassifyUpgradeValues.filter(i=>i.file).map(i=>new Promise((r,c)=>{(0,M.v)({loadingController:this.loadingController,params:{file:i.file,subFolder:"classify",fileType:"image"},callback:u=>{0==(null==u?void 0:u.ReturnCode)?this.changeUserClassifyUpgradeValue(i.UcCode,`${u.path}/${u.file.name}`):(0,p.cX)(this.toastController,{},u).then(g=>g.present()),r(u)}})}));n.length?Promise.all(n).then(()=>{t()}):t()}changeUcWorkflow(t){var n,i;let r=t.detail.value;this.ucWorkflow=this.ucWorkflows.find(c=>c.UcWorkflowId==r),this.userClassifyUpgradeCatgs=null!==(n=null===(i=this.ucWorkflow)||void 0===i?void 0:i.UserClassifyUpgradeCatgs)&&void 0!==n?n:[]}getUserClassifyUpgradeValue(t){var n;return null===(n=this.userClassifyUpgradeValues.find(i=>i.UcCode==t))||void 0===n?void 0:n.UcValue}getUserClassifyUpgradeUrl(t){var n;let i=this.userClassifyUpgradeValues.find(r=>r.UcCode==t);return i?null!==(n=i.fileUrl)&&void 0!==n?n:this.readfile_url+i.UcValue:null}getUserClassifyUpgrade(t){return this.userClassifyUpgradeValues.find(n=>n.UcCode==t)}validUserClassifyUpgrade(t){var n;let{fileUrl:i,UcValue:r}=null!==(n=this.getUserClassifyUpgrade(t.UcCode))&&void 0!==n?n:{};return r?!(t.MinValue&&r.length<t.MinValue||t.MaxValue&&r.length>t.MaxValue):!!i||!t.IsRequired}changeUserClassifyUpgradeValue(t,n){let i=this.userClassifyUpgradeValues.find(r=>r.UcCode==t);i?i.UcValue=n:this.userClassifyUpgradeValues.push({UcCode:t,UcValue:n})}changeUserClassifyUpgrade(t,n){let i=this.userClassifyUpgradeValues.find(r=>r.UcCode==t);i?i={UcCode:t,...n}:this.userClassifyUpgradeValues.push({UcCode:t,...n})}changeUserClassifyUpgradeValue_string(t,n){let i=t.detail.value;"string"==typeof i&&(i=i.replace(/\s+/g," ").trim()),this.changeUserClassifyUpgradeValue(n,i)}changeUserClassifyUpgradeValue_filepath(t,n){var i=this;(0,O.$)({modalController:this.modalController,toastController:this.toastController},function(){var r=(0,m.A)(function*(c){if(c.length){let u=yield i.modalController.create({component:T.A,componentProps:{file:c[0]},backdropDismiss:!0,keyboardClose:!0});u.onDidDismiss().then(function(){var g=(0,m.A)(function*(_){if("submit"==_.role&&_.data){var f=_.data;i.changeUserClassifyUpgrade(n,{UcValue:"",file:f,fileUrl:URL.createObjectURL(f)})}});return function(_){return g.apply(this,arguments)}}()),u.present()}});return function(c){return r.apply(this,arguments)}}())}}return(a=l).\u0275fac=function(t){return new(t||a)(e.rXU(s.Xi),e.rXU(s.K_),e.rXU(s.W3))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-modal-user-classify"]],decls:29,vars:14,consts:[["slot","start"],[3,"click"],["src","../../../assets/icon/ion-icon/arrow-left.svg"],[1,"container","d-flex","flex-column","h-100"],[1,"flex-grow-1"],[1,"my-4"],["color","danger"],["mode","md","fill","outline","interface","popover",3,"ionChange","placeholder","value"],[3,"value"],[1,"container"],["color","primary","shape","round","expand","block",3,"click","disabled"],["mode","md","fill","outline",3,"ionInput","color","placeholder","value"],[1,"rounded","overflow-hidden"],[1,"rounded","overflow-hidden",3,"click"],[3,"src"],["mode","md","fill","outline","readonly","",3,"ionFocus","color","placeholder","value"],["slot","end","color","medium",1,"fs-12"]],template:function(t,n){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(){return n.modalClose()}),e.nrm(4,"ion-icon",2),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6),e.nI1(7,"translate"),e.k0s()()(),e.j41(8,"ion-content")(9,"div",3)(10,"div",4)(11,"div",5)(12,"div"),e.EFF(13),e.nI1(14,"translate"),e.j41(15,"ion-text",6),e.EFF(16,"*"),e.k0s()(),e.j41(17,"ion-select",7),e.nI1(18,"translate"),e.bIt("ionChange",function(r){return n.changeUcWorkflow(r)}),e.Z7z(19,H,2,2,"ion-select-option",8,e.fX1),e.k0s()(),e.Z7z(21,z,6,3,"div",5,e.fX1),e.k0s()()(),e.j41(23,"ion-footer")(24,"ion-toolbar")(25,"div",9)(26,"ion-button",10),e.bIt("click",function(){return n.modalSubmit()}),e.EFF(27),e.nI1(28,"translate"),e.k0s()()()()),2&t&&(e.R7$(6),e.JRh(e.bMT(7,6,"UpgradeAccount")),e.R7$(7),e.SpI(" ",e.bMT(14,8,"UpgradeCatg")," "),e.R7$(4),e.Y8G("placeholder",e.bMT(18,10,"UpgradeCatg"))("value",null==n.ucWorkflow?null:n.ucWorkflow.UcWorkflowId),e.R7$(2),e.Dyx(n.ucWorkflows),e.R7$(2),e.Dyx(n.userClassifyUpgradeCatgs),e.R7$(5),e.Y8G("disabled",n.modalSubmit_disabled),e.R7$(),e.SpI(" ",e.bMT(28,12,"Send")," "))},dependencies:[s.Jm,s.QW,s.W9,s.M0,s.eU,s.iq,s.$w,s.he,s.Nm,s.Ip,s.IO,s.Zx,s.BC,s.ai,s.Je,s.Gw,y.D9],styles:["ion-thumbnail[_ngcontent-%COMP%]{--size: 7.5rem}"]}),l})();var Q=d(345),Z=d(9777);function q(a,l){if(1&a){const o=e.RV6();e.j41(0,"ion-item",19),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.navigateByUrl(n.APP_ROUTE.CHARGING_RESERVATION))}),e.nrm(1,"ion-icon",23),e.j41(2,"ion-label"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()}2&a&&(e.R7$(3),e.JRh(e.bMT(4,1,"ChargingReservation")))}function ee(a,l){if(1&a&&(e.j41(0,"tr")(1,"td",38),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&a){const o=e.XpG();e.R7$(2),e.JRh(e.bMT(3,2,"Company")),e.R7$(4),e.JRh(null==o.ownerCompany?null:o.ownerCompany.CompanyName)}}function ne(a,l){if(1&a&&(e.j41(0,"tr")(1,"td",38),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&a){const o=e.XpG();e.R7$(2),e.JRh(e.bMT(3,2,"Tax")),e.R7$(4),e.JRh(null==o.ownerCompany?null:o.ownerCompany.TaxCode)}}function te(a,l){if(1&a&&(e.j41(0,"tr")(1,"td",38),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&a){const o=e.XpG();e.R7$(2),e.JRh(e.bMT(3,2,"LicenseDate")),e.R7$(4),e.JRh(null==o.ownerCompany?null:o.ownerCompany.LicenseDate)}}function ie(a,l){if(1&a&&(e.j41(0,"tr")(1,"td",38),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&a){const o=e.XpG();e.R7$(2),e.JRh(e.bMT(3,2,"Address")),e.R7$(4),e.JRh(null==o.ownerCompany?null:o.ownerCompany.Address)}}function oe(a,l){if(1&a&&(e.j41(0,"tr")(1,"td",38),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"a",39),e.EFF(6),e.k0s()()()),2&a){const o=e.XpG();e.R7$(2),e.JRh(e.bMT(3,3,"Email")),e.R7$(3),e.Y8G("href","mailto:"+(null==o.ownerCompany?null:o.ownerCompany.Email),e.B4B),e.R7$(),e.SpI(" ",null==o.ownerCompany?null:o.ownerCompany.Email," ")}}function ae(a,l){if(1&a&&(e.j41(0,"tr")(1,"td",38),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b")(6,"a",39),e.EFF(7),e.k0s()()()()),2&a){const o=e.XpG();e.R7$(2),e.JRh(e.bMT(3,3,"Hotline")),e.R7$(4),e.Y8G("href","tel:"+o.APP_FUNC_FormatTel(null==o.ownerCompany?null:o.ownerCompany.Hotline),e.B4B),e.R7$(),e.SpI(" ",o.APP_FUNC_FormatMobileNumber(null==o.ownerCompany?null:o.ownerCompany.Hotline)," ")}}function le(a,l){if(1&a){const o=e.RV6();e.j41(0,"div",40)(1,"div",41)(2,"h4",42),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"p",43),e.EFF(6),e.nI1(7,"translate"),e.k0s()(),e.j41(8,"div",44)(9,"div",45)(10,"ion-button",46),e.bIt("click",function(){e.eBV(o),e.XpG();const n=e.sdS(127);return e.Njj(null==n?null:n.dismiss())}),e.EFF(11),e.nI1(12,"translate"),e.k0s()(),e.j41(13,"div",47)(14,"ion-button",48),e.bIt("click",function(n){e.eBV(o);const i=e.XpG(),r=e.sdS(127);return null==r||r.dismiss(),e.Njj(i.signOut(n))}),e.EFF(15),e.nI1(16,"translate"),e.k0s()()()()}2&a&&(e.R7$(3),e.JRh(e.bMT(4,4,"SignOut")),e.R7$(3),e.JRh(e.bMT(7,6,"SignOut_Confirm")),e.R7$(5),e.SpI(" ",e.bMT(12,8,"Cancel")," "),e.R7$(4),e.SpI(" ",e.bMT(16,10,"Confirm")," "))}const re=[{path:"",component:(()=>{var a;class l{constructor(t,n,i,r,c,u){this.router=t,this.titleService=n,this.translateService=i,this.loadingController=r,this.toastController=c,this.modalController=u,this.isAppTest=k.c.apptest,this.APP_ROUTE=j._,this.readfile_url=k.c.readfile_url,this.params={},this.APP_FUNC_FormatMobileNumber=P.IV,this.APP_FUNC_FormatTel=P.YH}ngOnInit(){var t=this;(0,m.A)(function*(){(yield(0,F.kU)())&&t.refreshData()})()}onIonRefresher(t){this.refreshData(()=>{t.target.complete()})}refreshData(t){var n=this;return(0,m.A)(function*(){(0,b.z)({loadingController:n.loadingController,callback:i=>{var r,c,u;null!=i&&i.Succeeded?(n.user=null!==(r=i.Data)&&void 0!==r?r:{},null!==(c=n.user)&&void 0!==c&&c.FullName?n.titleService.setTitle(null===(u=n.user)||void 0===u?void 0:u.FullName):n.translateService.stream("Account").subscribe(g=>{n.titleService.setTitle(g)})):(0,p.cX)(n.toastController,{},i).then(g=>g.present()),t&&t()}}),$({callback:i=>{null!=i&&i.Succeeded&&(n.ownerCompany=(i.Data||[]).at(0))}})})()}signOut(t){return(0,m.A)(function*(){yield(0,A.SD)(),(0,N.wn)({callback:()=>{window.location.replace(j._.AUTH)}})})()}changeAvatar(t){var n=this;return(0,m.A)(function*(){(0,O.$)({modalController:n.modalController,toastController:n.toastController},function(){var i=(0,m.A)(function*(r){if(r.length){let c=yield n.modalController.create({component:T.A,componentProps:{file:r[0]},backdropDismiss:!0,keyboardClose:!0});c.onDidDismiss().then(function(){var u=(0,m.A)(function*(g){"submit"==g.role&&g.data&&(0,M.v)({loadingController:n.loadingController,params:{file:g.data,subFolder:"avatar",fileType:"image"},callback:f=>{var R;0==(null==f?void 0:f.ReturnCode)?(0,b.sh)({loadingController:n.loadingController,params:{UserId:null===(R=n.user)||void 0===R?void 0:R.UserId,Avatar:`${f.path}/${f.file.name}`},callback:C=>{null!=C&&C.Succeeded?n.refreshData():(0,p.cX)(n.toastController,{},C).then(ue=>ue.present())}}):(0,p.cX)(n.toastController,{},f).then(C=>C.present())}})});return function(g){return u.apply(this,arguments)}}()),c.present()}});return function(r){return i.apply(this,arguments)}}())})()}navigateByUrl(t){var n=this;return(0,m.A)(function*(){n.router.navigateByUrl(t)})()}presentModalUserClassifyHistory(t){var n=this;return(0,m.A)(function*(){null==t||t.preventDefault(),(yield n.modalController.create({component:S})).present()})()}presentModalUserClassify(t){var n=this;return(0,m.A)(function*(){null==t||t.preventDefault();let i=yield n.modalController.create({component:K,backdropDismiss:!1});i.onDidDismiss().then(r=>{"success"==r.role&&n.refreshData()}),i.present()})()}}return(a=l).\u0275fac=function(t){return new(t||a)(e.rXU(U.Ix),e.rXU(Q.hE),e.rXU(y.c$),e.rXU(s.Xi),e.rXU(s.K_),e.rXU(s.W3))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-user"]],decls:130,vars:68,consts:[["modalSignOut",""],["color","primary"],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"card-info"],[1,"bg"],[1,"avatar"],[3,"click"],["alt","",3,"src"],[1,"change-avatar"],["color","light",3,"click"],["src","../../../assets/icon/ion-icon/camera-shape.svg"],[1,"text-center","text-primary","mt-3","mb-0"],[1,"d-flex","justify-content-center","mt-1"],["color","medium",1,"cursor-pointer",3,"click"],[1,"container","py-3"],["mode","ios","lines","none"],["button","","detail","true","color","light","detail-icon","chevron-forward-outline",3,"click"],["slot","start","color","warning","name","rocket-outline",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/person-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/verhicle-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/bill-circle.svg",1,"fs-24"],["button","","detail","true","color","light","detail-icon","chevron-forward-outline"],["slot","start","src","../../../assets/icon/ion-icon/setting-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/feedback-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/chat-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/book-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/persons-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/book-open-circle.svg",1,"fs-24"],[1,"container","card-company","bg-white","rounded"],[1,"table","table-borderless","m-0"],[4,"ngIf"],[1,"mt-3"],["mode","ios","color","light","expand","block","id","click-trigger-modal-signout",1,"btn-sign-out"],["slot","start","color","primary","src","../../../assets/icon/ion-icon/sign-out.svg",1,"fs-24"],["trigger","click-trigger-modal-signout",1,"ion-modal-small"],[1,"text-muted"],[1,"text-dark",3,"href"],[1,"p-4"],[1,"text-center"],[1,"mb-2"],[1,"mb-4","fs-3"],[1,"row"],[1,"col-6","pr-1"],["fill","outline","color","medium","expand","block","shape","round",3,"click"],[1,"col-6","pl-1"],["color","primary","expand","block","shape","round",3,"click"]],template:function(t,n){if(1&t){const i=e.RV6();e.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-buttons",2),e.nrm(3,"ion-back-button",3),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()(),e.j41(7,"ion-content",4)(8,"ion-refresher",5),e.bIt("ionRefresh",function(c){return e.eBV(i),e.Njj(n.onIonRefresher(c))}),e.nrm(9,"ion-refresher-content"),e.k0s(),e.j41(10,"div",6),e.nrm(11,"div",7),e.j41(12,"div",8)(13,"ion-avatar",9),e.bIt("click",function(c){return e.eBV(i),e.Njj(n.changeAvatar(c))}),e.nrm(14,"img",10),e.k0s(),e.j41(15,"div",11)(16,"ion-button",12),e.bIt("click",function(c){return e.eBV(i),e.Njj(n.changeAvatar(c))}),e.nrm(17,"ion-icon",13),e.k0s()()(),e.j41(18,"h5",14)(19,"b"),e.EFF(20),e.nI1(21,"translate"),e.k0s()(),e.j41(22,"div",15)(23,"ion-text",16),e.bIt("click",function(c){return e.eBV(i),e.Njj(n.presentModalUserClassifyHistory(c))}),e.EFF(24),e.k0s()()(),e.j41(25,"div",17)(26,"ion-list",18)(27,"ion-item",19),e.bIt("click",function(c){return e.eBV(i),e.Njj(n.presentModalUserClassify(c))}),e.nrm(28,"ion-icon",20),e.j41(29,"ion-label"),e.EFF(30),e.nI1(31,"translate"),e.k0s()()(),e.j41(32,"ion-list",18)(33,"ion-item",19),e.bIt("click",function(){return e.eBV(i),e.Njj(n.navigateByUrl(n.APP_ROUTE.USER_INFO))}),e.nrm(34,"ion-icon",21),e.j41(35,"ion-label"),e.EFF(36),e.nI1(37,"translate"),e.k0s()(),e.j41(38,"ion-item",19),e.bIt("click",function(){return e.eBV(i),e.Njj(n.navigateByUrl(n.APP_ROUTE.VEHICLE))}),e.nrm(39,"ion-icon",22),e.j41(40,"ion-label"),e.EFF(41),e.nI1(42,"translate"),e.k0s()(),e.j41(43,"ion-item",19),e.bIt("click",function(){return e.eBV(i),e.Njj(n.navigateByUrl(n.APP_ROUTE.CUSTOMER_INVOICE))}),e.nrm(44,"ion-icon",23),e.j41(45,"ion-label"),e.EFF(46),e.nI1(47,"translate"),e.k0s()()(),e.j41(48,"ion-list",18),e.DNE(49,q,5,3,"ion-item",24),e.j41(50,"ion-item",19),e.bIt("click",function(){return e.eBV(i),e.Njj(n.navigateByUrl(n.APP_ROUTE.ORDER_INFO))}),e.nrm(51,"ion-icon",23),e.j41(52,"ion-label"),e.EFF(53),e.nI1(54,"translate"),e.k0s()()(),e.j41(55,"ion-list",18)(56,"ion-item",19),e.bIt("click",function(){return e.eBV(i),e.Njj(n.navigateByUrl(n.APP_ROUTE.SETTING))}),e.nrm(57,"ion-icon",25),e.j41(58,"ion-label"),e.EFF(59),e.nI1(60,"translate"),e.k0s()(),e.j41(61,"ion-item",19),e.bIt("click",function(){return e.eBV(i),e.Njj(n.navigateByUrl(n.APP_ROUTE.FEEDBACK))}),e.nrm(62,"ion-icon",26),e.j41(63,"ion-label"),e.EFF(64),e.nI1(65,"translate"),e.k0s()(),e.j41(66,"ion-item",19),e.bIt("click",function(){return e.eBV(i),e.Njj(n.navigateByUrl(n.APP_ROUTE.SUPPORT))}),e.nrm(67,"ion-icon",27),e.j41(68,"ion-label"),e.EFF(69),e.nI1(70,"translate"),e.k0s()(),e.j41(71,"ion-item",19),e.bIt("click",function(){return e.eBV(i),e.Njj(n.navigateByUrl(n.APP_ROUTE.HELP))}),e.nrm(72,"ion-icon",28),e.j41(73,"ion-label"),e.EFF(74),e.nI1(75,"translate"),e.k0s()()(),e.j41(76,"ion-list",18)(77,"ion-item",19),e.bIt("click",function(){return e.eBV(i),e.Njj(n.navigateByUrl(n.APP_ROUTE.ABOUT_US))}),e.nrm(78,"ion-icon",29),e.j41(79,"ion-label"),e.EFF(80),e.nI1(81,"translate"),e.k0s()(),e.j41(82,"ion-item",19),e.bIt("click",function(){return e.eBV(i),e.Njj(n.navigateByUrl(n.APP_ROUTE.TERMS_AND_CONDITION))}),e.nrm(83,"ion-icon",30),e.j41(84,"ion-label"),e.EFF(85),e.nI1(86,"translate"),e.k0s()(),e.j41(87,"ion-item",19),e.bIt("click",function(){return e.eBV(i),e.Njj(n.navigateByUrl(n.APP_ROUTE.PAYMENT_POLICY))}),e.nrm(88,"ion-icon",30),e.j41(89,"ion-label"),e.EFF(90),e.nI1(91,"translate"),e.k0s()(),e.j41(92,"ion-item",19),e.bIt("click",function(){return e.eBV(i),e.Njj(n.navigateByUrl(n.APP_ROUTE.PRIVACY_POLICY))}),e.nrm(93,"ion-icon",30),e.j41(94,"ion-label"),e.EFF(95),e.nI1(96,"translate"),e.k0s()(),e.j41(97,"ion-item",19),e.bIt("click",function(){return e.eBV(i),e.Njj(n.navigateByUrl(n.APP_ROUTE.WARRANTY_POLICY))}),e.nrm(98,"ion-icon",30),e.j41(99,"ion-label"),e.EFF(100),e.nI1(101,"translate"),e.k0s()(),e.j41(102,"ion-item",19),e.bIt("click",function(){return e.eBV(i),e.Njj(n.navigateByUrl(n.APP_ROUTE.COMPLAINT_RESOLUTION_POLICY))}),e.nrm(103,"ion-icon",30),e.j41(104,"ion-label"),e.EFF(105),e.nI1(106,"translate"),e.k0s()(),e.j41(107,"ion-item",19),e.bIt("click",function(){return e.eBV(i),e.Njj(n.navigateByUrl(n.APP_ROUTE.PRICE_POLICY))}),e.nrm(108,"ion-icon",30),e.j41(109,"ion-label"),e.EFF(110),e.nI1(111,"translate"),e.k0s()()(),e.j41(112,"div",31)(113,"table",32),e.DNE(114,ee,7,4,"tr",33)(115,ne,7,4,"tr",33)(116,te,7,4,"tr",33)(117,ie,7,4,"tr",33)(118,oe,7,5,"tr",33)(119,ae,8,5,"tr",33),e.k0s()(),e.j41(120,"div",34)(121,"ion-button",35),e.nrm(122,"ion-icon",36),e.j41(123,"ion-label",1),e.EFF(124),e.nI1(125,"translate"),e.k0s()()()(),e.j41(126,"ion-modal",37,0),e.DNE(128,le,17,12,"ng-template"),e.k0s()(),e.nrm(129,"app-footer-tabs")}if(2&t){let i;e.R7$(3),e.Y8G("defaultHref",n.APP_ROUTE.DEFAULT),e.R7$(2),e.JRh(e.bMT(6,30,"UserInfo")),e.R7$(2),e.Y8G("fullscreen",!0),e.R7$(7),e.Y8G("src",null!=n.user&&n.user.Avatar?n.readfile_url+(null==n.user?null:n.user.Avatar):"assets/icon/ion-img/no-avatar.svg",e.B4B),e.R7$(6),e.JRh(null!==(i=null==n.user?null:n.user.FullName)&&void 0!==i?i:e.bMT(21,32,"NotUpdate")),e.R7$(4),e.SpI(" ",null==n.user?null:n.user.UserClassifyName," "),e.R7$(6),e.JRh(e.bMT(31,34,"UpgradeAccount")),e.R7$(6),e.JRh(e.bMT(37,36,"UserInfo")),e.R7$(5),e.JRh(e.bMT(42,38,"Vehicle")),e.R7$(5),e.JRh(e.bMT(47,40,"ExportBillInfo")),e.R7$(3),e.vxM(49,n.isAppTest?49:-1),e.R7$(4),e.JRh(e.bMT(54,42,"OrderHistory")),e.R7$(6),e.JRh(e.bMT(60,44,"Setting")),e.R7$(5),e.JRh(e.bMT(65,46,"SendFeedback")),e.R7$(5),e.JRh(e.bMT(70,48,"FAQ")),e.R7$(5),e.JRh(e.bMT(75,50,"UseManual")),e.R7$(6),e.JRh(e.bMT(81,52,"AboutUs")),e.R7$(5),e.JRh(e.bMT(86,54,"TermsAndCondition")),e.R7$(5),e.JRh(e.bMT(91,56,"PaymentPolicy")),e.R7$(5),e.JRh(e.bMT(96,58,"PrivacyPolicy")),e.R7$(5),e.JRh(e.bMT(101,60,"WarrantyPolicy")),e.R7$(5),e.JRh(e.bMT(106,62,"ComplaintResolutionPolicy")),e.R7$(5),e.JRh(e.bMT(111,64,"PricePolicy")),e.R7$(4),e.Y8G("ngIf",null==n.ownerCompany?null:n.ownerCompany.CompanyName),e.R7$(),e.Y8G("ngIf",null==n.ownerCompany?null:n.ownerCompany.TaxCode),e.R7$(),e.Y8G("ngIf",null==n.ownerCompany?null:n.ownerCompany.LicenseDate),e.R7$(),e.Y8G("ngIf",null==n.ownerCompany?null:n.ownerCompany.Address),e.R7$(),e.Y8G("ngIf",null==n.ownerCompany?null:n.ownerCompany.Email),e.R7$(),e.Y8G("ngIf",null==n.ownerCompany?null:n.ownerCompany.Hotline),e.R7$(5),e.JRh(e.bMT(125,66,"SignOut"))}},dependencies:[h.bT,s.mC,s.Jm,s.QW,s.W9,s.eU,s.iq,s.uz,s.he,s.nf,s.To,s.Ki,s.IO,s.BC,s.ai,s.Sb,s.el,Z.x,y.D9],styles:[".card-info[_ngcontent-%COMP%]   .bg[_ngcontent-%COMP%]{padding:3rem 1rem;background-color:var(--ion-color-primary);background-image:url(bg-charging-location.1f27cf83f2b3c5d2.svg);background-repeat:no-repeat;background-position:center center;background-size:auto 200%}.card-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{position:relative;z-index:1;width:7rem;margin:-3rem auto auto}.card-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:7rem;height:7rem;border:.125rem solid var(--ion-color-light);background-color:var(--ion-color-light)}.card-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .change-avatar[_ngcontent-%COMP%]{position:absolute;z-index:2;bottom:0;right:0}.card-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .change-avatar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:2rem;height:2rem;min-width:2rem;min-height:2rem;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--border-radius: 50%}.card-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .change-avatar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-dark-tint)}.card-info[_ngcontent-%COMP%]   .icon-w24[_ngcontent-%COMP%]{display:inline-block;width:24px}.card-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}ion-thumbnail[_ngcontent-%COMP%]{--size: 6rem;--border-radius: 50%;margin:auto;cursor:pointer}ion-list[_ngcontent-%COMP%]{padding:.5rem 0;margin:.5rem 0 1rem;border-radius:1rem;box-shadow:0 .125rem .5rem #00000026;background:var(--ion-color-light)!important}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 3rem}.btn-sign-out[_ngcontent-%COMP%]{--box-shadow: 0 .125rem .5rem rgba(0, 0, 0, .15)}.card-company[_ngcontent-%COMP%]{padding:1rem}.card-company.rounded[_ngcontent-%COMP%]{border-radius:.5rem!important}.card-company[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important;margin:.5rem 0}.card-company[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{table-layout:fixed;font-size:.875rem}.card-company[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem;vertical-align:top}.card-company[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40%;padding-left:0;padding-right:.5rem;color:var(--ion-color-medium-shade)}.card-company[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;text-align:right}"]}),l})()}];let se=(()=>{var a;class l{}return(a=l).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[U.iI.forChild(re),U.iI]}),l})();var ce=d(3890);let de=(()=>{var a;class l{}return(a=l).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[h.MD,E.YN,s.bv,se,ce.x]}),l})()}}]);