"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9387],{9387:(He,j,d)=>{d.r(j),d.d(j,{UserPageModule:()=>De});var g=d(177),y=d(9417),s=d(9420),M=d(7625),p=d(467),V=d(23),I=d(1038),P=d(9946),T=d(6539),U=d(8517),R=d(8833),C=d(5312),m=d(8650),N=d(4393),O=d(6171),$=d(6757),b=d(6037);const G=function(){var i=(0,p.A)(function*(l){var o,t;l.params=l.params||{},(0,b.hm)({url:"api/OwnerCompany/get-ownercompany",params:{PageNumber:null!==(o=l.params.PageNumber)&&void 0!==o?o:1,PageSize:null!==(t=l.params.PageSize)&&void 0!==t?t:10},success:n=>{"function"==typeof l.callback&&l.callback(n.data||null)},error:n=>{var a;"function"==typeof l.callback&&l.callback(null==n||null===(a=n.response)||void 0===a?void 0:a.data),console.error(n)},loading:l.loading,loadingController:l.loadingController})});return function(o){return i.apply(this,arguments)}}(),B=function(){var i=(0,p.A)(function*(l){var o,t;l.params=l.params||{},(0,b.hm)({url:"api/UserClassifyHistory/get-history",params:{PageNumber:null!==(o=l.params.PageNumber)&&void 0!==o?o:1,PageSize:null!==(t=l.params.PageSize)&&void 0!==t?t:10},success:n=>{"function"==typeof l.callback&&l.callback(n.data||null)},error:n=>{var a;"function"==typeof l.callback&&l.callback(null==n||null===(a=n.response)||void 0===a?void 0:a.data),console.error(n)},loading:l.loading,loadingController:l.loadingController})});return function(o){return i.apply(this,arguments)}}();var x=d(3588),e=d(4438),k=d(4842);const S=()=>[];function A(i,l){1&i&&(e.j41(0,"div",9),e.nrm(1,"img",10),e.j41(2,"div",11),e.EFF(3),e.nI1(4,"translate"),e.k0s()()),2&i&&(e.R7$(3),e.JRh(e.bMT(4,1,"DataNotFound")))}function X(i,l){if(1&i&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&i){const o=e.XpG().$implicit;e.R7$(),e.SpI(" ",o.Reason," ")}}function D(i,l){1&i&&(e.j41(0,"div",23),e.nrm(1,"ion-icon",24),e.k0s())}function W(i,l){if(1&i&&(e.j41(0,"ion-thumbnail",31),e.nrm(1,"img",32),e.k0s()),2&i){const o=e.XpG(2).$implicit,t=e.XpG(3);e.R7$(),e.Y8G("src",t.readfile_url+o.UcValue,e.B4B)}}function H(i,l){if(1&i&&(e.j41(0,"td"),e.DNE(1,W,2,1,"ion-thumbnail",30),e.k0s()),2&i){const o=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",o.UcValue)}}function J(i,l){if(1&i&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&i){const o=e.XpG().$implicit;e.R7$(),e.JRh(o.UcValue)}}function Y(i,l){if(1&i&&(e.j41(0,"tr",28)(1,"td",29),e.EFF(2),e.k0s(),e.DNE(3,H,2,1,"td")(4,J,2,1),e.k0s()),2&i){const o=l.$implicit;e.R7$(2),e.JRh(o.UcCode),e.R7$(),e.vxM(3,"filepath"==o.DataType?3:4)}}function L(i,l){if(1&i&&(e.j41(0,"div",25)(1,"table",26),e.DNE(2,Y,5,2,"tr",27),e.k0s()()),2&i){let o;const t=e.XpG().$implicit;e.R7$(2),e.Y8G("ngForOf",null!==(o=t.UserClassifyUpgradeValues)&&void 0!==o?o:e.lJ4(1,S))}}function z(i,l){if(1&i&&(e.j41(0,"div",7)(1,"ion-accordion",12)(2,"div",13)(3,"div",14)(4,"b"),e.EFF(5),e.k0s(),e.j41(6,"ion-text",15),e.EFF(7),e.k0s()(),e.j41(8,"div",16)(9,"small",17),e.EFF(10),e.k0s(),e.j41(11,"small",18),e.EFF(12),e.nI1(13,"translate"),e.k0s()(),e.DNE(14,X,2,1,"div",19)(15,D,2,0,"div",20),e.k0s(),e.DNE(16,L,3,2,"div",21),e.k0s()()),2&i){let o;const t=l.$implicit,n=e.XpG();e.R7$(),e.Y8G("value",t.UserClassifyHistoryId),e.R7$(4),e.JRh(t.UserClassifyName),e.R7$(),e.Y8G("color",n.v_user_classify_status.color(t.VUserClassifyStatus)),e.R7$(),e.SpI(" ",t.VUserClassifyStatusName," "),e.R7$(3),e.SpI(" ",n.APP_FUNC_FormatDate(t.CreatedDate)," "),e.R7$(2),e.SpI(" ",e.bMT(13,9,null!==(o=t.CreatedByFullname)&&void 0!==o?o:"")," "),e.R7$(2),e.Y8G("ngIf",t.Reason),e.R7$(),e.Y8G("ngIf",null==t.UserClassifyUpgradeValues?null:t.UserClassifyUpgradeValues.length),e.R7$(),e.Y8G("ngIf",null==t.UserClassifyUpgradeValues?null:t.UserClassifyUpgradeValues.length)}}function K(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-infinite-scroll",33),e.bIt("ionInfinite",function(n){e.eBV(o);const a=e.XpG();return e.Njj(a.onIonInfinite(n))}),e.nrm(1,"ion-infinite-scroll-content"),e.k0s()}}let Z=(()=>{var i;class l{constructor(t,n,a,r){this.router=t,this.loadingController=n,this.toastController=a,this.modalController=r,this.APP_FUNC_FormatDate=U.Rv,this.readfile_url=C.c.readfile_url,this.paging={sortfield:null,sorttype:null,page:1,limit:20,loading:!1,active:!0},this.filter={},this.userClassifyHistories=[],this.v_user_classify_status=x.HM,this.limitLoad=0}ngOnInit(){var t=this;(0,p.A)(function*(){(yield(0,T.kU)())&&t.refreshData()})()}modalClose(){this.modalController.dismiss()}onIonRefresher(t){this.filter={},this.refreshData(()=>{t.target.complete()})}onIonInfinite(t){this.loadMore(()=>{t.target.complete()})}pushData(t){1==this.paging.page&&(this.userClassifyHistories.length=0),this.userClassifyHistories=this.userClassifyHistories.concat(t)}refreshData(t){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit(t)}loadMore(t){this.paging.page+=1,this.loadData_Paging_Limit(t)}searchChange(t){this.filter.search=t.target.value.replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}sortChange(t,n){this.paging.sortfield=t||null,this.paging.sorttype=n||null,this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}filterChange(){this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}loadData_Paging_Limit(t){var n=this;return(0,p.A)(function*(){if(n.limitLoad>0)return void(t&&t());n.limitLoad=300;let a=setInterval(()=>{n.limitLoad-=100,n.limitLoad<=0&&(clearInterval(a),n.loadData_Paging(t))},100)})()}loadData_Paging(t){var n=this;return(0,p.A)(function*(){n.paging.loading=!0,B({loadingController:n.loadingController,params:{PageNumber:n.paging.page,PageSize:n.paging.limit},callback:a=>{var r;n.response=a,null!=a&&a.Succeeded?n.pushData(null!==(r=null==a?void 0:a.Data)&&void 0!==r?r:[]):(0,m.cX)(n.toastController,{},a).then(c=>c.present()),n.paging.loading=!1,n.paging.active=!(null==a||!a.HasNextPage),t&&t()}})})()}}return(i=l).\u0275fac=function(t){return new(t||i)(e.rXU(M.Ix),e.rXU(s.Xi),e.rXU(s.K_),e.rXU(s.W3))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-modal-user-classify-history"]],decls:17,vars:5,consts:[["slot","start"],[3,"click"],["src","../../../assets/icon/ion-icon/arrow-left.svg"],["slot","fixed",3,"ionRefresh"],["class","container py-5 text-center",4,"ngIf"],[1,"container"],["multiple","false","value","SettingSystemPrompt"],[1,"bg-light","color-dark","br-16px","overflow-hidden","mb-3"],[3,"ionInfinite",4,"ngIf"],[1,"container","py-5","text-center"],["src","../../../assets/image/default/no-info.svg"],[1,"text-muted","mt-4"],[3,"value"],["slot","header",1,"p-3"],[1,"d-flex","align-items-center","justify-content-between"],[1,"fs-12",3,"color"],[1,"d-flex","align-items-end","justify-content-between","mt-2"],[1,"text-primary"],[1,"text-muted","fw-500"],["class","border-top pt-3 mt-3 fs-14",4,"ngIf"],["class","icon-expand d-flex justify-content-center mt-2",4,"ngIf"],["slot","content","class","ion-padding-horizontal",4,"ngIf"],[1,"border-top","pt-3","mt-3","fs-14"],[1,"icon-expand","d-flex","justify-content-center","mt-2"],["color","medium","name","chevron-down-outline",1,"fs-16"],["slot","content",1,"ion-padding-horizontal"],[1,"table","table-sm"],["class","fs-14",4,"ngFor","ngForOf"],[1,"fs-14"],[1,"text-nowrap","text-medium"],["class","w-120px h-120px",4,"ngIf"],[1,"w-120px","h-120px"],[3,"src"],[3,"ionInfinite"]],template:function(t,n){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(){return n.modalClose()}),e.nrm(4,"ion-icon",2),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6),e.nI1(7,"translate"),e.k0s()()(),e.j41(8,"ion-content")(9,"ion-refresher",3),e.bIt("ionRefresh",function(r){return n.onIonRefresher(r)}),e.nrm(10,"ion-refresher-content"),e.k0s(),e.DNE(11,A,5,3,"div",4),e.j41(12,"div",5)(13,"ion-accordion-group",6),e.Z7z(14,z,17,11,"div",7,e.fX1),e.k0s()(),e.DNE(16,K,2,0,"ion-infinite-scroll",8),e.k0s()),2&t&&(e.R7$(6),e.JRh(e.bMT(7,3,"UpgradeHistory")),e.R7$(5),e.Y8G("ngIf",n.response&&!n.userClassifyHistories.length),e.R7$(3),e.Dyx(n.userClassifyHistories),e.R7$(2),e.Y8G("ngIf",n.paging.active))},dependencies:[g.Sq,g.bT,s.xk,s.YH,s.Jm,s.QW,s.W9,s.eU,s.iq,s.Ax,s.Hp,s.To,s.Ki,s.IO,s.Zx,s.BC,s.ai,k.D9],styles:[".card-order[_ngcontent-%COMP%]{padding:1rem;border-radius:1rem;background-color:var(--ion-color-light);color:var(--ion-color-light-contrast)}.card-order[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{min-height:1.25rem;padding-top:.25rem;padding-bottom:.25rem}.card-order[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem;line-height:0}ion-accordion-group[_ngcontent-%COMP%] > ion-accordion[_ngcontent-%COMP%]{margin:.5rem 0}ion-accordion-group[_ngcontent-%COMP%] > ion-accordion[_ngcontent-%COMP%]   ion-item[slot=header][_ngcontent-%COMP%]{--border-width: 0 !important}ion-accordion-group[_ngcontent-%COMP%] > ion-accordion[_ngcontent-%COMP%]:not(.accordion-expanded){border-bottom:1px solid #eee}ion-accordion-group[_ngcontent-%COMP%] > ion-accordion.accordion-expanding[_ngcontent-%COMP%], ion-accordion-group[_ngcontent-%COMP%] > ion-accordion.accordion-expanded[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:4px}ion-accordion-group[_ngcontent-%COMP%]   ion-accordion.accordion-expanding[_ngcontent-%COMP%]   .icon-expand[_ngcontent-%COMP%], ion-accordion-group[_ngcontent-%COMP%]   ion-accordion.accordion-expanded[_ngcontent-%COMP%]   .icon-expand[_ngcontent-%COMP%]{display:none!important}"]}),l})();const Q=function(){var i=(0,p.A)(function*(l){l.params=l.params||{},(0,b.hm)({url:"api/UserClassify/get-available-catg",params:{},success:o=>{"function"==typeof l.callback&&l.callback(o.data||null)},error:o=>{var t;"function"==typeof l.callback&&l.callback(null==o||null===(t=o.response)||void 0===t?void 0:t.data),console.error(o)},loading:l.loading,loadingController:l.loadingController})});return function(o){return i.apply(this,arguments)}}(),q=function(){var i=(0,p.A)(function*(l){l.params=l.params||{},(0,b.IH)({url:"api/UserClassify/upgrade",params:{UserClassifyCode:l.params.UserClassifyCode,UserClassifyUpgradeValues:l.params.UserClassifyUpgradeValues},success:o=>{"function"==typeof l.callback&&l.callback(o.data||null)},error:o=>{var t;"function"==typeof l.callback&&l.callback(null==o||null===(t=o.response)||void 0===t?void 0:t.data),console.error(o)},loading:l.loading,loadingController:l.loadingController})});return function(o){return i.apply(this,arguments)}}();var ee=d(5614);const ne=()=>[0,.75,1];function te(i,l){if(1&i&&(e.j41(0,"ion-select-option",9),e.EFF(1),e.k0s()),2&i){const o=l.$implicit;e.Y8G("value",o.UcWorkflowId),e.R7$(),e.SpI(" ",o.UserClassifyName," ")}}function oe(i,l){1&i&&(e.j41(0,"ion-text",7),e.EFF(1,"*"),e.k0s())}function ie(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-input",12),e.mxI("ngModelChange",function(n){e.eBV(o);const a=e.XpG().$implicit,r=e.XpG();return e.DH7(r.userClassifyUpgradeValue[a.UcCode],n)||(r.userClassifyUpgradeValue[a.UcCode]=n),e.Njj(n)}),e.bIt("ionInput",function(n){e.eBV(o);const a=e.XpG().$implicit,r=e.XpG();return e.Njj(r.changeUserClassifyUpgradeValue_string(n,a.UcCode,a.Pattern))}),e.k0s()}if(2&i){let o,t;const n=e.XpG().$implicit,a=e.XpG();e.Y8G("color",a.validUserClassifyUpgrade(n)?"success":"danger")("placeholder",n.UcName)("minlength",null!==(o=n.MinValue)&&void 0!==o?o:0)("maxlength",null!==(t=n.MaxValue)&&void 0!==t?t:1e3),e.R50("ngModel",a.userClassifyUpgradeValue[n.UcCode])}}function ae(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-input",13),e.mxI("ngModelChange",function(n){e.eBV(o);const a=e.XpG().$implicit,r=e.XpG();return e.DH7(r.userClassifyUpgradeValue[a.UcCode],n)||(r.userClassifyUpgradeValue[a.UcCode]=n),e.Njj(n)}),e.bIt("ionInput",function(n){e.eBV(o);const a=e.XpG().$implicit,r=e.XpG();return e.Njj(r.changeUserClassifyUpgradeValue_string(n,a.UcCode))}),e.k0s()}if(2&i){let o,t;const n=e.XpG().$implicit,a=e.XpG();e.Y8G("color",a.validUserClassifyUpgrade(n)?"success":"danger")("placeholder",n.UcName)("minlength",null!==(o=n.MinValue)&&void 0!==o?o:0)("maxlength",null!==(t=n.MaxValue)&&void 0!==t?t:2147483647),e.R50("ngModel",a.userClassifyUpgradeValue[n.UcCode])}}function le(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-thumbnail",15),e.bIt("click",function(n){e.eBV(o);const a=e.XpG(2).$implicit,r=e.XpG();return e.Njj(r.changeUserClassifyUpgradeValue_filepath(n,a.UcCode))}),e.nrm(1,"img",16),e.k0s()}if(2&i){const o=e.XpG(2).$implicit,t=e.XpG();e.R7$(),e.Y8G("src",t.getUserClassifyUpgradeUrl(o.UcCode),e.B4B)}}function re(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-input",17),e.mxI("ngModelChange",function(n){e.eBV(o);const a=e.XpG(2).$implicit,r=e.XpG();return e.DH7(r.userClassifyUpgradeValue[a.UcCode],n)||(r.userClassifyUpgradeValue[a.UcCode]=n),e.Njj(n)}),e.bIt("ionFocus",function(n){e.eBV(o);const a=e.XpG(2).$implicit,r=e.XpG();return e.Njj(r.changeUserClassifyUpgradeValue_filepath(n,a.UcCode))}),e.j41(1,"ion-label",18),e.EFF(2),e.nI1(3,"translate"),e.k0s()()}if(2&i){const o=e.XpG(2).$implicit,t=e.XpG();e.Y8G("color",t.validUserClassifyUpgrade(o)?"success":"danger")("placeholder",o.UcName),e.R50("ngModel",t.userClassifyUpgradeValue[o.UcCode]),e.R7$(2),e.SpI(" ",e.bMT(3,4,"Upload")," ")}}function se(i,l){if(1&i&&e.DNE(0,le,2,1,"ion-thumbnail",14)(1,re,4,6),2&i){const o=e.XpG().$implicit,t=e.XpG();e.vxM(0,t.getUserClassifyUpgradeUrl(o.UcCode)?0:1)}}function ce(i,l){if(1&i){const o=e.RV6();e.qex(0),e.j41(1,"div",25)(2,"div",26)(3,"div",27),e.bIt("click",function(){let n;const a=e.eBV(o).$implicit;e.XpG(2);const r=e.sdS(5),c=e.XpG(2).$implicit;return e.XpG().changeUserClassifyUpgradeValue(c.UcCode,null!==(n=null!==(n=a.CarBrand)&&void 0!==n?n:a.CarDesc)&&void 0!==n?n:""),e.Njj(r.dismiss())}),e.nrm(4,"ion-img",28),e.k0s()()(),e.bVm()}if(2&i){const o=l.$implicit,t=e.XpG(5);e.R7$(4),e.Y8G("src",t.getLogoUrl(o.LogoUrl))("alt",o.CarBrand)}}function de(i,l){if(1&i&&(e.j41(0,"div",20)(1,"div",21)(2,"h4",22),e.EFF(3),e.nI1(4,"translate"),e.k0s()(),e.j41(5,"div",23),e.DNE(6,ce,5,2,"ng-container",24),e.k0s()()),2&i){const o=e.XpG(4);e.R7$(3),e.SpI(" ",e.bMT(4,2,"SelectVehicleBrand")," "),e.R7$(3),e.Y8G("ngForOf",o.carManufts)}}function ue(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-input",17),e.mxI("ngModelChange",function(n){e.eBV(o);const a=e.XpG(2).$implicit,r=e.XpG();return e.DH7(r.userClassifyUpgradeValue[a.UcCode],n)||(r.userClassifyUpgradeValue[a.UcCode]=n),e.Njj(n)}),e.bIt("ionFocus",function(){e.eBV(o);const n=e.sdS(5);return e.Njj(n.present())}),e.j41(1,"ion-label",18),e.EFF(2),e.nI1(3,"translate"),e.k0s()(),e.j41(4,"ion-modal",19,0),e.DNE(6,de,7,4,"ng-template"),e.k0s()}if(2&i){const o=e.XpG(2).$implicit,t=e.XpG();e.Y8G("color",t.validUserClassifyUpgrade(o)?"success":"danger")("placeholder",o.UcName),e.R50("ngModel",t.userClassifyUpgradeValue[o.UcCode]),e.R7$(2),e.SpI(" ",e.bMT(3,6,"Choose")," "),e.R7$(2),e.Y8G("initialBreakpoint",.75)("breakpoints",e.lJ4(8,ne))}}function pe(i,l){if(1&i&&e.DNE(0,ue,7,9),2&i){const o=e.XpG().$implicit;e.vxM(0,"CarManuft"==o.KeyData?0:-1)}}function _e(i,l){if(1&i&&(e.j41(0,"div",6)(1,"div"),e.EFF(2),e.DNE(3,oe,2,0,"ion-text",7),e.k0s(),e.DNE(4,ie,1,5)(5,ae,1,5)(6,se,2,1)(7,pe,1,1),e.k0s()),2&i){let o;const t=l.$implicit;e.R7$(2),e.SpI(" ",t.UcName," "),e.R7$(),e.vxM(3,t.IsRequired?3:-1),e.R7$(),e.vxM(4,"string"===(o=t.DataType)?4:"number"===o?5:"filepath"===o?6:"dropdownlist"===o?7:-1)}}let me=(()=>{var i;class l{constructor(t,n,a){this.loadingController=t,this.toastController=n,this.modalController=a,this.readfile_url=C.c.readfile_url,this.ucWorkflows=[],this.carManufts=[],this.userClassifyUpgradeCatgs=[],this.userClassifyUpgradeValue={}}ngOnInit(){Q({callback:t=>{null!=t&&t.Succeeded?this.ucWorkflows=t.Data||[]:(0,m.cX)(this.toastController,{},t).then(n=>n.present())}}),(0,P.z)({callback:t=>{if(null!=t&&t.Succeeded){var n,a;let c=null!==(n=t.Data)&&void 0!==n?n:{};var r;c.FullName&&this.changeUserClassifyUpgradeValue("HO-TEN",c.FullName),null!==(a=c.Person)&&void 0!==a&&a.Address&&this.changeUserClassifyUpgradeValue("DIA-CHI",null===(r=c.Person)||void 0===r?void 0:r.Address)}}}),(0,ee.E)({params:{PageNumber:1,PageSize:100},callback:t=>{null!=t&&t.Succeeded&&(this.carManufts=t.Data)}})}modalClose(){this.modalController.dismiss()}get modalSubmit_disabled(){return!this.userClassifyUpgradeCatgs.length||this.userClassifyUpgradeCatgs.map(t=>this.validUserClassifyUpgrade(t)?0:1).includes(1)}modalSubmit(){for(const a of this.userClassifyUpgradeCatgs)if(!this.checkUserClassifyUpgrade(a))break;if(this.modalSubmit_disabled)return;let t=()=>{var a,r;q({params:{UserClassifyCode:null!==(a=null===(r=this.ucWorkflow)||void 0===r?void 0:r.UserClassifyCode)&&void 0!==a?a:"",UserClassifyUpgradeValues:this.userClassifyUpgradeCatgs.map(c=>{var u;return{UcCode:c.UcCode,UcValue:null!==(u=this.userClassifyUpgradeValue[c.UcCode])&&void 0!==u?u:""}})},callback:c=>{var u;null!=c&&c.Succeeded?(this.modalController.dismiss(null,"success"),(0,m.cX)(this.toastController,{color:"success",message:null!==(u=c.Message)&&void 0!==u?u:"Th\u1ef1c hi\u1ec7n n\xe2ng c\u1ea5p t\xe0i kho\u1ea3n th\xe0nh c\xf4ng"}).then(_=>_.present())):(0,m.cX)(this.toastController,{},c).then(_=>_.present())}})},n=this.userClassifyUpgradeCatgs.filter(a=>a.file).map(a=>new Promise((r,c)=>{(0,I.v)({loadingController:this.loadingController,params:{file:a.file,subFolder:"classify",fileType:"image"},callback:u=>{0==(null==u?void 0:u.ReturnCode)?this.changeUserClassifyUpgradeValue(a.UcCode,`${u.path}/${u.file.name}`):(0,m.cX)(this.toastController,{},u).then(_=>_.present()),r(u)}})}));n.length?Promise.all(n).then(()=>{t()}):t()}changeUcWorkflow(t){var n,a;let r=t.detail.value;this.ucWorkflow=this.ucWorkflows.find(c=>c.UcWorkflowId==r),this.userClassifyUpgradeCatgs=null!==(n=null===(a=this.ucWorkflow)||void 0===a?void 0:a.UserClassifyUpgradeCatgs)&&void 0!==n?n:[]}getUserClassifyUpgradeUrl(t){let n=this.userClassifyUpgradeValue[t];if(n)return this.readfile_url+n;let a=this.userClassifyUpgradeCatgs.find(r=>r.UcCode==t);return a?a.fileUrl?a.fileUrl:void 0:null}getUserClassifyUpgrade(t){return this.userClassifyUpgradeCatgs.find(n=>n.UcCode==t)}validUserClassifyUpgrade(t){var n;let{fileUrl:a}=null!==(n=this.getUserClassifyUpgrade(t.UcCode))&&void 0!==n?n:{},r=this.userClassifyUpgradeValue[t.UcCode];return r?!(t.MinValue&&r.length<t.MinValue||t.MaxValue&&r.length>t.MaxValue):!!a||!t.IsRequired}checkUserClassifyUpgrade(t){var n;let{fileUrl:a}=null!==(n=this.getUserClassifyUpgrade(t.UcCode))&&void 0!==n?n:{},r=this.userClassifyUpgradeValue[t.UcCode];return r?t.MinValue&&r.length<t.MinValue?((0,m.cX)(this.toastController,{color:"warning",message:`${t.UcName} ch\u01b0a \u0111\u1ee7 ${t.MinValue} k\xed t\u1ef1.`}).then(c=>c.present()),!1):!(t.MaxValue&&r.length>t.MaxValue&&((0,m.cX)(this.toastController,{color:"warning",message:`${t.UcName} v\u01b0\u1ee3t ${t.MaxValue} k\xed t\u1ef1.`}).then(c=>c.present()),1)):!!a||!t.IsRequired||((0,m.cX)(this.toastController,{color:"warning",message:`${t.UcName} b\u1eaft bu\u1ed9c nh\u1eadp.`}).then(c=>c.present()),!1)}changeUserClassifyUpgradeValue(t,n){this.userClassifyUpgradeValue[t]=n}changeUserClassifyUpgradeFile(t,n){let a=this.userClassifyUpgradeCatgs.find(r=>r.UcCode==t);a?(a.file=n.file,a.fileUrl=n.fileUrl):this.userClassifyUpgradeCatgs.push({UcCode:t,...n})}changeUserClassifyUpgradeValue_string(t,n,a){let r=t.detail.value;"string"==typeof r&&(r=r.replace(/\s+/g," ").trim(),a&&(r=r.replace(new RegExp(a,"gmi"),""))),this.changeUserClassifyUpgradeValue(n,r)}changeUserClassifyUpgradeValue_filepath(t,n){var a=this;(0,$.$)({modalController:this.modalController,toastController:this.toastController},function(){var r=(0,p.A)(function*(c){if(c.length){let u=yield a.modalController.create({component:O.A,componentProps:{file:c[0]},backdropDismiss:!0,keyboardClose:!0});u.onDidDismiss().then(function(){var _=(0,p.A)(function*(h){if("submit"==h.role&&h.data){var f=h.data;a.changeUserClassifyUpgradeFile(n,{file:f,fileUrl:URL.createObjectURL(f)})}});return function(h){return _.apply(this,arguments)}}()),u.present()}});return function(c){return r.apply(this,arguments)}}())}getLogoUrl(t){return!t||t.match(/^http(s)\:\/\//)?null!=t?t:"assets/image/favicon.svg":C.c.readfile_url+t.replace(/^\//,"")}}return(i=l).\u0275fac=function(t){return new(t||i)(e.rXU(s.Xi),e.rXU(s.K_),e.rXU(s.W3))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-modal-user-classify"]],decls:29,vars:14,consts:[["modalCarManuft",""],["slot","start"],[3,"click"],["src","../../../assets/icon/ion-icon/arrow-left.svg"],[1,"container","d-flex","flex-column","h-100"],[1,"flex-grow-1"],[1,"my-4"],["color","danger"],["mode","md","fill","outline","interface","popover",3,"ionChange","placeholder","value"],[3,"value"],[1,"container"],["color","primary","shape","round","expand","block",3,"click","disabled"],["mode","md","fill","outline","type","text",3,"ngModelChange","ionInput","color","placeholder","minlength","maxlength","ngModel"],["mode","md","fill","outline","type","number","inputmode","decimal",3,"ngModelChange","ionInput","color","placeholder","minlength","maxlength","ngModel"],[1,"rounded","overflow-hidden"],[1,"rounded","overflow-hidden",3,"click"],[3,"src"],["mode","md","fill","outline","type","text","readonly","",3,"ngModelChange","ionFocus","color","placeholder","ngModel"],["slot","end","color","medium",1,"fs-12"],[3,"initialBreakpoint","breakpoints"],[1,"ion-background-color-primary"],[1,"pt-4"],[1,"text-center","my-0"],[1,"p-3","d-flex","flex-wrap"],[4,"ngFor","ngForOf"],[1,"col-4","p-2"],[1,"p-3","rounded","bg-white"],[1,"embed-responsive","embed-responsive-1by1","cursor-pointer",3,"click"],[1,"embed-responsive-item",3,"src","alt"]],template:function(t,n){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.bIt("click",function(){return n.modalClose()}),e.nrm(4,"ion-icon",3),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6),e.nI1(7,"translate"),e.k0s()()(),e.j41(8,"ion-content")(9,"div",4)(10,"div",5)(11,"div",6)(12,"div"),e.EFF(13),e.nI1(14,"translate"),e.j41(15,"ion-text",7),e.EFF(16,"*"),e.k0s()(),e.j41(17,"ion-select",8),e.nI1(18,"translate"),e.bIt("ionChange",function(r){return n.changeUcWorkflow(r)}),e.Z7z(19,te,2,2,"ion-select-option",9,e.fX1),e.k0s()(),e.Z7z(21,_e,8,3,"div",6,e.fX1),e.k0s()()(),e.j41(23,"ion-footer")(24,"ion-toolbar")(25,"div",10)(26,"ion-button",11),e.bIt("click",function(){return n.modalSubmit()}),e.EFF(27),e.nI1(28,"translate"),e.k0s()()()()),2&t&&(e.R7$(6),e.JRh(e.bMT(7,6,"UpgradeAccount")),e.R7$(7),e.SpI(" ",e.bMT(14,8,"UpgradeCatg")," "),e.R7$(4),e.Y8G("placeholder",e.bMT(18,10,"UpgradeCatg"))("value",null==n.ucWorkflow?null:n.ucWorkflow.UcWorkflowId),e.R7$(2),e.Dyx(n.ucWorkflows),e.R7$(2),e.Dyx(n.userClassifyUpgradeCatgs),e.R7$(5),e.Y8G("disabled",!n.userClassifyUpgradeCatgs.length),e.R7$(),e.SpI(" ",e.bMT(28,12,"Send")," "))},dependencies:[g.Sq,y.BC,y.xh,y.tU,y.vS,s.Jm,s.QW,s.W9,s.M0,s.eU,s.iq,s.KW,s.$w,s.he,s.Nm,s.Ip,s.IO,s.Zx,s.BC,s.ai,s.Sb,s.su,s.Je,s.Gw,k.D9],styles:["ion-thumbnail[_ngcontent-%COMP%]{--size: 7.5rem}ion-input[_ngcontent-%COMP%]{font-family:Roboto,Arial,sans-serif;text-transform:uppercase;font-size:.875rem}"]}),l})();var fe=d(345),ge=d(9777);const Ce=function(){var i=(0,p.A)(function*(l){l.params=l.params||{},(0,b.hm)({url:"api/Wallet/get-mywallet",success:o=>{"function"==typeof l.callback&&l.callback(o.data||null)},error:o=>{var t;"function"==typeof l.callback&&l.callback(null==o||null===(t=o.response)||void 0===t?void 0:t.data),console.error(o)},loading:l.loading,loadingController:l.loadingController})});return function(o){return i.apply(this,arguments)}}(),w=()=>({}),E=i=>({$implicit:i});function he(i,l){if(1&i&&e.eu8(0,3),2&i){let o;const t=e.XpG(),n=e.sdS(4);e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(3,E,null!==(o=t.wallet)&&void 0!==o?o:e.lJ4(2,w)))}}function ve(i,l){if(1&i&&e.eu8(0,3),2&i){let o;const t=e.XpG(),n=e.sdS(6);e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(3,E,null!==(o=t.wallet)&&void 0!==o?o:e.lJ4(2,w)))}}function ye(i,l){if(1&i){const o=e.RV6();e.j41(0,"span",18),e.EFF(1),e.k0s(),e.j41(2,"ion-icon",19),e.bIt("click",function(){e.eBV(o);const n=e.XpG(2);return e.Njj(n.toggleShowBalance())}),e.k0s()}if(2&i){let o;const t=e.XpG(2);e.R7$(),e.SpI(" ",t.APP_FUNC_FormatMoney(null!==(o=null==t.wallet?null:t.wallet.WalletValue)&&void 0!==o?o:0),"\u0111 ")}}function Ue(i,l){if(1&i){const o=e.RV6();e.j41(0,"span",20),e.EFF(1,"*** ***"),e.k0s(),e.j41(2,"ion-icon",21),e.bIt("click",function(){e.eBV(o);const n=e.XpG(2);return e.Njj(n.toggleShowBalance())}),e.k0s()}}function be(i,l){if(1&i){const o=e.RV6();e.j41(0,"span",18),e.EFF(1),e.k0s(),e.j41(2,"ion-icon",19),e.bIt("click",function(){e.eBV(o);const n=e.XpG(3);return e.Njj(n.toggleShowBalance())}),e.k0s()}if(2&i){let o;const t=e.XpG(3);e.R7$(),e.SpI(" ",t.APP_FUNC_FormatMoney(null!==(o=null==t.wallet?null:t.wallet.VehicleWalletBalance)&&void 0!==o?o:0),"\u0111 ")}}function ke(i,l){if(1&i){const o=e.RV6();e.j41(0,"span",20),e.EFF(1,"*** ***"),e.k0s(),e.j41(2,"ion-icon",21),e.bIt("click",function(){e.eBV(o);const n=e.XpG(3);return e.Njj(n.toggleShowBalance())}),e.k0s()}}function Me(i,l){if(1&i&&(e.j41(0,"div",13)(1,"div",22),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",11)(5,"span",12),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.DNE(8,be,3,1)(9,ke,3,0),e.k0s()()),2&i){const o=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,3,"VehicleWallet")," "),e.R7$(4),e.SpI(" ",e.bMT(7,5,"Balance"),": "),e.R7$(2),e.vxM(8,o.isShowBalance?8:9)}}function Pe(i,l){if(1&i&&(e.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"div")(7,"div",10),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"div",11)(11,"span",12),e.EFF(12),e.nI1(13,"translate"),e.k0s(),e.DNE(14,ye,3,1)(15,Ue,3,0),e.k0s()(),e.DNE(16,Me,10,7,"div",13),e.k0s()(),e.j41(17,"div",14)(18,"div")(19,"div",15),e.EFF(20),e.nI1(21,"translate"),e.k0s(),e.j41(22,"div",16),e.EFF(23),e.k0s()(),e.nrm(24,"ion-img",17),e.k0s()()()()()),2&i){const o=l.$implicit,t=e.XpG();e.R7$(8),e.JRh(e.bMT(9,6,"PersonalWallet")),e.R7$(4),e.SpI("",e.bMT(13,8,"Balance"),":"),e.R7$(2),e.vxM(14,t.isShowBalance?14:15),e.R7$(2),e.vxM(16,o.IsVehicleVipWallet?16:-1),e.R7$(4),e.JRh(e.bMT(21,10,"VipAccount")),e.R7$(3),e.SpI(" ",null==t.user?null:t.user.FullName," ")}}function Re(i,l){if(1&i){const o=e.RV6();e.j41(0,"span",18),e.EFF(1),e.k0s(),e.j41(2,"ion-icon",19),e.bIt("click",function(){e.eBV(o);const n=e.XpG(2);return e.Njj(n.toggleShowBalance())}),e.k0s()}if(2&i){let o;const t=e.XpG(2);e.R7$(),e.SpI(" ",t.APP_FUNC_FormatMoney(null!==(o=null==t.wallet?null:t.wallet.WalletValue)&&void 0!==o?o:0),"\u0111 ")}}function Fe(i,l){if(1&i){const o=e.RV6();e.j41(0,"span",20),e.EFF(1,"*** ***"),e.k0s(),e.j41(2,"ion-icon",21),e.bIt("click",function(){e.eBV(o);const n=e.XpG(2);return e.Njj(n.toggleShowBalance())}),e.k0s()}}function je(i,l){if(1&i&&(e.j41(0,"div",23)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"div",10),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"div",11)(10,"span",12),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.DNE(13,Re,3,1)(14,Fe,3,0),e.k0s()()(),e.j41(15,"div",14)(16,"div")(17,"div",15),e.EFF(18),e.nI1(19,"translate"),e.k0s(),e.j41(20,"div",16),e.EFF(21),e.k0s()(),e.nrm(22,"ion-img",17),e.k0s()()()()()),2&i){const o=e.XpG();e.R7$(7),e.JRh(e.bMT(8,5,"PersonalWallet")),e.R7$(4),e.SpI("",e.bMT(12,7,"Balance"),":"),e.R7$(2),e.vxM(13,o.isShowBalance?13:14),e.R7$(5),e.JRh(e.bMT(19,9,"RegularAccount")),e.R7$(3),e.SpI(" ",null==o.user?null:o.user.FullName," ")}}let Ie=(()=>{var i;class l{constructor(){this.APP_ROUTE=R._,this.APP_FUNC_FormatMoney=U.xi,this.APP_FUNC_FormatDate=U.Rv,this.v_user_classify=x.If,this.readfile_url=C.c.readfile_url,this.isShowBalance=!1}ngOnInit(){this.refreshData()}refreshData(t){Promise.all([new Promise((n,a)=>{(0,P.z)({callback:r=>{var c;null!=r&&r.Succeeded&&(this.user=null!==(c=r.Data)&&void 0!==c?c:{}),n(r)}})}),new Promise((n,a)=>{Ce({callback:r=>{null!=r&&r.Succeeded&&(this.wallet=r.Data),n(r)}})})]).then(n=>{t&&t()})}toggleShowBalance(){var t=this;return(0,p.A)(function*(){t.isShowBalance=!t.isShowBalance})()}}return(i=l).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-wallet"]],decls:7,vars:1,consts:[["templateWalletCardVip",""],["templateWalletCardBasic",""],[1,"card-wallet","d-flex","align-items-center","justify-content-center"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"card-wallet-vip","w-480px","mw-100"],[1,"embed-responsive"],[1,"embed-responsive-item","d-flex","flex-column"],[1,"w-100","h-100","d-flex","flex-column"],[1,"flex-grow-1","d-flex","align-items-end"],[1,"px-4","py-2"],[1,"fs-12"],[1,"d-flex","align-items-center"],[1,"fs-12","fw-100"],[1,"card-vehicle-vip","mt-1"],[1,"d-flex","align-items-center","justify-content-between","card-owner-box","px-4","py-2"],[1,"fs-14","fw-200"],[1,"fs-16","fw-600","text-uppercase"],["src","../../../assets/image/logo-light.svg",1,"h-24px"],[1,"ml-3","min-h-24px"],["src","../../../assets/icon/ion-icon/eye.svg",1,"fs-16","cursor-pointer","ml-3",3,"click"],[1,"ml-3","min-h-24px","fs-12"],["src","../../../assets/icon/ion-icon/eye-off.svg",1,"fs-16","cursor-pointer","ml-3",3,"click"],[1,"fs-14","fw-600","vehicle-vin"],[1,"card-wallet-basic","w-480px","mw-100"]],template:function(t,n){1&t&&(e.j41(0,"div",2),e.DNE(1,he,1,5,"ng-container",3)(2,ve,1,5),e.k0s(),e.DNE(3,Pe,25,12,"ng-template",null,0,e.C5r)(5,je,23,11,"ng-template",null,1,e.C5r)),2&t&&(e.R7$(),e.vxM(1,(null==n.user?null:n.user.VUserClassify)==n.v_user_classify.TaiKhoanVIP?1:2))},dependencies:[g.T3,s.iq,s.KW,k.D9],styles:[".card-wallet[_ngcontent-%COMP%]   .embed-responsive[_ngcontent-%COMP%]:before{padding-top:62.5%}.card-wallet[_ngcontent-%COMP%]   .card-wallet-basic[_ngcontent-%COMP%]{background:url(card-basic.7bfc59e04473f77c.svg) no-repeat;background-size:contain;color:#fff;border-radius:1rem;overflow:hidden}.card-wallet[_ngcontent-%COMP%]   .card-wallet-basic[_ngcontent-%COMP%]   .card-owner-box[_ngcontent-%COMP%]{background:#027a48;color:#fff;margin:0 1px;border-radius:0 0 1rem 1rem}.card-wallet[_ngcontent-%COMP%]   .card-wallet-vip[_ngcontent-%COMP%]{background:url(card-vip.6b629719e1df315e.svg) no-repeat;background-size:contain;color:#fff;border-radius:1rem;overflow:hidden}.card-wallet[_ngcontent-%COMP%]   .card-wallet-vip[_ngcontent-%COMP%]   .card-owner-box[_ngcontent-%COMP%]{background:linear-gradient(92.01deg,#121212 .18%,#121212 29.68%,#272727 61.58%,#353535 103.62%);margin:0 1px;border-radius:0 0 1rem 1rem}.card-wallet[_ngcontent-%COMP%]   .card-wallet-vip[_ngcontent-%COMP%]   .card-owner-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .card-wallet[_ngcontent-%COMP%]   .card-wallet-vip[_ngcontent-%COMP%]   .card-vehicle-vip[_ngcontent-%COMP%]   .vehicle-vin[_ngcontent-%COMP%]{background:linear-gradient(338.1deg,#fdd36f 33.93%,#c0982c,#f8cf50 57.97%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent}"]}),l})();function Te(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-item",24),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.navigateByUrl(n.APP_ROUTE.CHARGING_RESERVATION))}),e.nrm(1,"ion-icon",27),e.j41(2,"ion-label"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()}2&i&&(e.R7$(3),e.JRh(e.bMT(4,1,"ChargingReservation")))}function Oe(i,l){if(1&i&&(e.j41(0,"tr")(1,"td",43),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&i){const o=e.XpG();e.R7$(2),e.JRh(e.bMT(3,2,"Company")),e.R7$(4),e.JRh(null==o.ownerCompany?null:o.ownerCompany.CompanyName)}}function $e(i,l){if(1&i&&(e.j41(0,"tr")(1,"td",43),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&i){const o=e.XpG();e.R7$(2),e.JRh(e.bMT(3,2,"Tax")),e.R7$(4),e.JRh(null==o.ownerCompany?null:o.ownerCompany.TaxCode)}}function xe(i,l){if(1&i&&(e.j41(0,"tr")(1,"td",43),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&i){const o=e.XpG();e.R7$(2),e.JRh(e.bMT(3,2,"LicenseDate")),e.R7$(4),e.JRh(null==o.ownerCompany?null:o.ownerCompany.LicenseDate)}}function we(i,l){if(1&i&&(e.j41(0,"tr")(1,"td",43),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&i){const o=e.XpG();e.R7$(2),e.JRh(e.bMT(3,2,"Address")),e.R7$(4),e.JRh(null==o.ownerCompany?null:o.ownerCompany.Address)}}function Ee(i,l){if(1&i&&(e.j41(0,"tr")(1,"td",43),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"a",44),e.EFF(6),e.k0s()()()),2&i){const o=e.XpG();e.R7$(2),e.JRh(e.bMT(3,3,"Email")),e.R7$(3),e.Y8G("href","mailto:"+(null==o.ownerCompany?null:o.ownerCompany.Email),e.B4B),e.R7$(),e.SpI(" ",null==o.ownerCompany?null:o.ownerCompany.Email," ")}}function Ve(i,l){if(1&i&&(e.j41(0,"tr")(1,"td",43),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b")(6,"a",44),e.EFF(7),e.k0s()()()()),2&i){const o=e.XpG();e.R7$(2),e.JRh(e.bMT(3,3,"Hotline")),e.R7$(4),e.Y8G("href","tel:"+o.APP_FUNC_FormatTel(null==o.ownerCompany?null:o.ownerCompany.Hotline),e.B4B),e.R7$(),e.SpI(" ",o.APP_FUNC_FormatMobileNumber(null==o.ownerCompany?null:o.ownerCompany.Hotline)," ")}}function Ne(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",45)(1,"div",46)(2,"h4",47),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"p",48),e.EFF(6),e.nI1(7,"translate"),e.k0s()(),e.j41(8,"div",49)(9,"div",50)(10,"ion-button",51),e.bIt("click",function(){e.eBV(o),e.XpG();const n=e.sdS(139);return e.Njj(null==n?null:n.dismiss())}),e.EFF(11),e.nI1(12,"translate"),e.k0s()(),e.j41(13,"div",52)(14,"ion-button",53),e.bIt("click",function(n){e.eBV(o);const a=e.XpG(),r=e.sdS(139);return null==r||r.dismiss(),e.Njj(a.signOut(n))}),e.EFF(15),e.nI1(16,"translate"),e.k0s()()()()}2&i&&(e.R7$(3),e.JRh(e.bMT(4,4,"SignOut")),e.R7$(3),e.JRh(e.bMT(7,6,"SignOut_Confirm")),e.R7$(5),e.SpI(" ",e.bMT(12,8,"Cancel")," "),e.R7$(4),e.SpI(" ",e.bMT(16,10,"Confirm")," "))}const Ge=[{path:"",component:(()=>{var i;class l{constructor(t,n,a,r,c,u){this.router=t,this.titleService=n,this.translateService=a,this.loadingController=r,this.toastController=c,this.modalController=u,this.isAppTest=C.c.apptest,this.APP_ROUTE=R._,this.readfile_url=C.c.readfile_url,this.params={},this.APP_FUNC_FormatMobileNumber=U.IV,this.APP_FUNC_FormatTel=U.YH}ngOnInit(){var t=this;(0,p.A)(function*(){(yield(0,T.kU)())&&t.refreshData()})()}onIonRefresher(t){this.refreshData(()=>{t.target.complete()})}refreshData(t){var n=this;return(0,p.A)(function*(){(0,P.z)({loadingController:n.loadingController,callback:a=>{var r,c,u;null!=a&&a.Succeeded?(n.user=null!==(r=a.Data)&&void 0!==r?r:{},null!==(c=n.user)&&void 0!==c&&c.FullName?n.titleService.setTitle(null===(u=n.user)||void 0===u?void 0:u.FullName):n.translateService.stream("Account").subscribe(_=>{n.titleService.setTitle(_)})):(0,m.cX)(n.toastController,{},a).then(_=>_.present()),t&&t()}}),G({callback:a=>{null!=a&&a.Succeeded&&(n.ownerCompany=(a.Data||[]).at(0))}})})()}signOut(t){return(0,p.A)(function*(){yield(0,N.SD)(),(0,V.wn)({callback:()=>{window.location.replace(R._.AUTH)}})})()}changeAvatar(t){var n=this;return(0,p.A)(function*(){(0,$.$)({modalController:n.modalController,toastController:n.toastController},function(){var a=(0,p.A)(function*(r){if(r.length){let c=yield n.modalController.create({component:O.A,componentProps:{file:r[0]},backdropDismiss:!0,keyboardClose:!0});c.onDidDismiss().then(function(){var u=(0,p.A)(function*(_){"submit"==_.role&&_.data&&(0,I.v)({loadingController:n.loadingController,params:{file:_.data,subFolder:"avatar",fileType:"image"},callback:f=>{var F;0==(null==f?void 0:f.ReturnCode)?(0,P.sh)({loadingController:n.loadingController,params:{UserId:null===(F=n.user)||void 0===F?void 0:F.UserId,Avatar:`${f.path}/${f.file.name}`},callback:v=>{null!=v&&v.Succeeded?n.refreshData():(0,m.cX)(n.toastController,{},v).then(We=>We.present())}}):(0,m.cX)(n.toastController,{},f).then(v=>v.present())}})});return function(_){return u.apply(this,arguments)}}()),c.present()}});return function(r){return a.apply(this,arguments)}}())})()}navigateByUrl(t){var n=this;return(0,p.A)(function*(){n.router.navigateByUrl(t)})()}presentModalUserClassifyHistory(t){var n=this;return(0,p.A)(function*(){null==t||t.preventDefault(),(yield n.modalController.create({component:Z})).present()})()}presentModalUserClassify(t){var n=this;return(0,p.A)(function*(){null==t||t.preventDefault();let a=yield n.modalController.create({component:me,backdropDismiss:!1});a.onDidDismiss().then(r=>{"success"==r.role&&n.refreshData()}),a.present()})()}}return(i=l).\u0275fac=function(t){return new(t||i)(e.rXU(M.Ix),e.rXU(fe.hE),e.rXU(k.c$),e.rXU(s.Xi),e.rXU(s.K_),e.rXU(s.W3))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-user"]],decls:142,vars:74,consts:[["modalSignOut",""],["color","primary"],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"container","d-flex","flex-column","flex-md-row-reverse"],[1,"my-3"],[1,"flex-grow-1","align-self-stretch","d-flex","align-items-center","justify-content-center"],[1,"card-info"],[1,"avatar","mx-auto","my-3"],[3,"click"],["alt","",3,"src"],[1,"change-avatar"],["color","light",3,"click"],["src","../../../assets/icon/ion-icon/camera-shape.svg"],[1,"text-center","text-primary","mt-3","mb-0"],[1,"d-flex","justify-content-center","mt-1"],["color","medium",1,"cursor-pointer",3,"click"],[1,"container","py-3"],["mode","ios","lines","none"],["button","","detail","false","color","light","detail-icon","chevron-forward-outline",3,"click"],["slot","start","color","warning","name","rocket-outline",1,"fs-24"],["slot","end","color","secondary",3,"click"],["button","","detail","true","color","light","detail-icon","chevron-forward-outline",3,"click"],["slot","start","src","../../../assets/icon/ion-icon/person-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/vehicle-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/bill-circle.svg",1,"fs-24"],["button","","detail","true","color","light","detail-icon","chevron-forward-outline"],["slot","start","src","../../../assets/icon/ion-icon/payment-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/setting-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/feedback-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/chat-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/book-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/persons-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/book-open-circle.svg",1,"fs-24"],[1,"container","card-company","bg-white","rounded"],[1,"table","table-borderless","m-0"],[4,"ngIf"],[1,"mt-3"],["mode","ios","color","light","expand","block","id","click-trigger-modal-signout",1,"btn-sign-out"],["slot","start","color","primary","src","../../../assets/icon/ion-icon/sign-out.svg",1,"fs-24"],["trigger","click-trigger-modal-signout",1,"ion-modal-small"],[1,"text-muted"],[1,"text-dark",3,"href"],[1,"p-4"],[1,"text-center"],[1,"mb-2"],[1,"mb-4","fs-3"],[1,"row"],[1,"col-6","pr-1"],["fill","outline","color","medium","expand","block","shape","round",3,"click"],[1,"col-6","pl-1"],["color","primary","expand","block","shape","round",3,"click"]],template:function(t,n){if(1&t){const a=e.RV6();e.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-buttons",2),e.nrm(3,"ion-back-button",3),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()(),e.j41(7,"ion-content",4)(8,"ion-refresher",5),e.bIt("ionRefresh",function(c){return e.eBV(a),e.Njj(n.onIonRefresher(c))}),e.nrm(9,"ion-refresher-content"),e.k0s(),e.j41(10,"div",6)(11,"div",7),e.nrm(12,"app-wallet"),e.k0s(),e.j41(13,"div",8)(14,"div",9)(15,"div",10)(16,"ion-avatar",11),e.bIt("click",function(c){return e.eBV(a),e.Njj(n.changeAvatar(c))}),e.nrm(17,"img",12),e.k0s(),e.j41(18,"div",13)(19,"ion-button",14),e.bIt("click",function(c){return e.eBV(a),e.Njj(n.changeAvatar(c))}),e.nrm(20,"ion-icon",15),e.k0s()()(),e.j41(21,"h5",16)(22,"b"),e.EFF(23),e.nI1(24,"translate"),e.k0s()(),e.j41(25,"div",17)(26,"ion-text",18),e.bIt("click",function(c){return e.eBV(a),e.Njj(n.presentModalUserClassifyHistory(c))}),e.EFF(27),e.k0s()()()()(),e.j41(28,"div",19)(29,"ion-list",20)(30,"ion-item",21),e.bIt("click",function(c){return e.eBV(a),e.Njj(n.presentModalUserClassify(c))}),e.nrm(31,"ion-icon",22),e.j41(32,"ion-label"),e.EFF(33),e.nI1(34,"translate"),e.k0s(),e.j41(35,"ion-button",23),e.bIt("click",function(c){return e.eBV(a),c.stopPropagation(),e.Njj(n.presentModalUserClassifyHistory(c))}),e.j41(36,"ion-label"),e.EFF(37),e.nI1(38,"translate"),e.k0s()()()(),e.j41(39,"ion-list",20)(40,"ion-item",24),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateByUrl(n.APP_ROUTE.USER_INFO))}),e.nrm(41,"ion-icon",25),e.j41(42,"ion-label"),e.EFF(43),e.nI1(44,"translate"),e.k0s()(),e.j41(45,"ion-item",24),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateByUrl(n.APP_ROUTE.VEHICLE))}),e.nrm(46,"ion-icon",26),e.j41(47,"ion-label"),e.EFF(48),e.nI1(49,"translate"),e.k0s()(),e.j41(50,"ion-item",24),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateByUrl(n.APP_ROUTE.CUSTOMER_INVOICE))}),e.nrm(51,"ion-icon",27),e.j41(52,"ion-label"),e.EFF(53),e.nI1(54,"translate"),e.k0s()()(),e.j41(55,"ion-list",20),e.DNE(56,Te,5,3,"ion-item",28),e.j41(57,"ion-item",24),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateByUrl(n.APP_ROUTE.ORDER_INFO))}),e.nrm(58,"ion-icon",27),e.j41(59,"ion-label"),e.EFF(60),e.nI1(61,"translate"),e.k0s()(),e.j41(62,"ion-item",24),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateByUrl(n.APP_ROUTE.WALLET_HISTORY))}),e.nrm(63,"ion-icon",29),e.j41(64,"ion-label"),e.EFF(65),e.nI1(66,"translate"),e.k0s()()(),e.j41(67,"ion-list",20)(68,"ion-item",24),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateByUrl(n.APP_ROUTE.SETTING))}),e.nrm(69,"ion-icon",30),e.j41(70,"ion-label"),e.EFF(71),e.nI1(72,"translate"),e.k0s()(),e.j41(73,"ion-item",24),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateByUrl(n.APP_ROUTE.FEEDBACK))}),e.nrm(74,"ion-icon",31),e.j41(75,"ion-label"),e.EFF(76),e.nI1(77,"translate"),e.k0s()(),e.j41(78,"ion-item",24),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateByUrl(n.APP_ROUTE.SUPPORT))}),e.nrm(79,"ion-icon",32),e.j41(80,"ion-label"),e.EFF(81),e.nI1(82,"translate"),e.k0s()(),e.j41(83,"ion-item",24),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateByUrl(n.APP_ROUTE.HELP))}),e.nrm(84,"ion-icon",33),e.j41(85,"ion-label"),e.EFF(86),e.nI1(87,"translate"),e.k0s()()(),e.j41(88,"ion-list",20)(89,"ion-item",24),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateByUrl(n.APP_ROUTE.ABOUT_US))}),e.nrm(90,"ion-icon",34),e.j41(91,"ion-label"),e.EFF(92),e.nI1(93,"translate"),e.k0s()(),e.j41(94,"ion-item",24),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateByUrl(n.APP_ROUTE.TERMS_AND_CONDITION))}),e.nrm(95,"ion-icon",35),e.j41(96,"ion-label"),e.EFF(97),e.nI1(98,"translate"),e.k0s()(),e.j41(99,"ion-item",24),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateByUrl(n.APP_ROUTE.PAYMENT_POLICY))}),e.nrm(100,"ion-icon",35),e.j41(101,"ion-label"),e.EFF(102),e.nI1(103,"translate"),e.k0s()(),e.j41(104,"ion-item",24),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateByUrl(n.APP_ROUTE.PRIVACY_POLICY))}),e.nrm(105,"ion-icon",35),e.j41(106,"ion-label"),e.EFF(107),e.nI1(108,"translate"),e.k0s()(),e.j41(109,"ion-item",24),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateByUrl(n.APP_ROUTE.WARRANTY_POLICY))}),e.nrm(110,"ion-icon",35),e.j41(111,"ion-label"),e.EFF(112),e.nI1(113,"translate"),e.k0s()(),e.j41(114,"ion-item",24),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateByUrl(n.APP_ROUTE.COMPLAINT_RESOLUTION_POLICY))}),e.nrm(115,"ion-icon",35),e.j41(116,"ion-label"),e.EFF(117),e.nI1(118,"translate"),e.k0s()(),e.j41(119,"ion-item",24),e.bIt("click",function(){return e.eBV(a),e.Njj(n.navigateByUrl(n.APP_ROUTE.PRICE_POLICY))}),e.nrm(120,"ion-icon",35),e.j41(121,"ion-label"),e.EFF(122),e.nI1(123,"translate"),e.k0s()()(),e.j41(124,"div",36)(125,"table",37),e.DNE(126,Oe,7,4,"tr",38)(127,$e,7,4,"tr",38)(128,xe,7,4,"tr",38)(129,we,7,4,"tr",38)(130,Ee,7,5,"tr",38)(131,Ve,8,5,"tr",38),e.k0s()(),e.j41(132,"div",39)(133,"ion-button",40),e.nrm(134,"ion-icon",41),e.j41(135,"ion-label",1),e.EFF(136),e.nI1(137,"translate"),e.k0s()()()(),e.j41(138,"ion-modal",42,0),e.DNE(140,Ne,17,12,"ng-template"),e.k0s()(),e.nrm(141,"app-footer-tabs")}if(2&t){let a;e.R7$(3),e.Y8G("defaultHref",n.APP_ROUTE.DEFAULT),e.R7$(2),e.JRh(e.bMT(6,32,"UserInfo")),e.R7$(2),e.Y8G("fullscreen",!0),e.R7$(10),e.Y8G("src",null!=n.user&&n.user.Avatar?n.readfile_url+(null==n.user?null:n.user.Avatar):"assets/icon/ion-img/no-avatar.svg",e.B4B),e.R7$(6),e.JRh(null!==(a=null==n.user?null:n.user.FullName)&&void 0!==a?a:e.bMT(24,34,"NotUpdate")),e.R7$(4),e.SpI(" ",null==n.user?null:n.user.UserClassifyName," "),e.R7$(6),e.JRh(e.bMT(34,36,"UpgradeAccount")),e.R7$(4),e.JRh(e.bMT(38,38,"History")),e.R7$(6),e.JRh(e.bMT(44,40,"UserInfo")),e.R7$(5),e.JRh(e.bMT(49,42,"Vehicle")),e.R7$(5),e.JRh(e.bMT(54,44,"ExportBillInfo")),e.R7$(3),e.vxM(56,n.isAppTest?56:-1),e.R7$(4),e.JRh(e.bMT(61,46,"OrderHistory")),e.R7$(5),e.JRh(e.bMT(66,48,"TransactionHistory")),e.R7$(6),e.JRh(e.bMT(72,50,"Setting")),e.R7$(5),e.JRh(e.bMT(77,52,"SendFeedback")),e.R7$(5),e.JRh(e.bMT(82,54,"FAQ")),e.R7$(5),e.JRh(e.bMT(87,56,"UseManual")),e.R7$(6),e.JRh(e.bMT(93,58,"AboutUs")),e.R7$(5),e.JRh(e.bMT(98,60,"TermsAndCondition")),e.R7$(5),e.JRh(e.bMT(103,62,"PaymentPolicy")),e.R7$(5),e.JRh(e.bMT(108,64,"PrivacyPolicy")),e.R7$(5),e.JRh(e.bMT(113,66,"WarrantyPolicy")),e.R7$(5),e.JRh(e.bMT(118,68,"ComplaintResolutionPolicy")),e.R7$(5),e.JRh(e.bMT(123,70,"PricePolicy")),e.R7$(4),e.Y8G("ngIf",null==n.ownerCompany?null:n.ownerCompany.CompanyName),e.R7$(),e.Y8G("ngIf",null==n.ownerCompany?null:n.ownerCompany.TaxCode),e.R7$(),e.Y8G("ngIf",null==n.ownerCompany?null:n.ownerCompany.LicenseDate),e.R7$(),e.Y8G("ngIf",null==n.ownerCompany?null:n.ownerCompany.Address),e.R7$(),e.Y8G("ngIf",null==n.ownerCompany?null:n.ownerCompany.Email),e.R7$(),e.Y8G("ngIf",null==n.ownerCompany?null:n.ownerCompany.Hotline),e.R7$(5),e.JRh(e.bMT(137,72,"SignOut"))}},dependencies:[g.bT,s.mC,s.Jm,s.QW,s.W9,s.eU,s.iq,s.uz,s.he,s.nf,s.To,s.Ki,s.IO,s.BC,s.ai,s.Sb,s.el,ge.x,Ie,k.D9],styles:[".card-info[_ngcontent-%COMP%]   .bg[_ngcontent-%COMP%]{padding:3rem 1rem;background-color:var(--ion-color-primary);background-image:url(bg-charging-location.24bf138423cec5f5.svg);background-repeat:no-repeat;background-position:center center;background-size:auto 200%}.card-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{position:relative;z-index:1;width:7rem}.card-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:7rem;height:7rem;border:.125rem solid var(--ion-color-light);background-color:var(--ion-color-light)}.card-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .change-avatar[_ngcontent-%COMP%]{position:absolute;z-index:2;bottom:0;right:0}.card-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .change-avatar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:2rem;height:2rem;min-width:2rem;min-height:2rem;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--border-radius: 50%}.card-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .change-avatar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-dark-tint)}.card-info[_ngcontent-%COMP%]   .icon-w24[_ngcontent-%COMP%]{display:inline-block;width:24px}.card-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}ion-thumbnail[_ngcontent-%COMP%]{--size: 6rem;--border-radius: 50%;margin:auto;cursor:pointer}ion-list[_ngcontent-%COMP%]{padding:.5rem 0;margin:.5rem 0 1rem;border-radius:1rem;box-shadow:0 .125rem .5rem #00000026;background:var(--ion-color-light)!important}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 3rem}.btn-sign-out[_ngcontent-%COMP%]{--box-shadow: 0 .125rem .5rem rgba(0, 0, 0, .15)}.card-company[_ngcontent-%COMP%]{padding:1rem}.card-company.rounded[_ngcontent-%COMP%]{border-radius:.5rem!important}.card-company[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important;margin:.5rem 0}.card-company[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{table-layout:fixed;font-size:.875rem}.card-company[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem;vertical-align:top}.card-company[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40%;padding-left:0;padding-right:.5rem;color:var(--ion-color-medium-shade)}.card-company[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;text-align:right}"]}),l})()}];let Be=(()=>{var i;class l{}return(i=l).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[M.iI.forChild(Ge),M.iI]}),l})();var Se=d(3890),Ae=d(4342);let Xe=(()=>{var i;class l{}return(i=l).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[g.MD,s.bv,Ae.LP]}),l})(),De=(()=>{var i;class l{}return(i=l).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[g.MD,y.YN,s.bv,Be,Se.x,Xe]}),l})()}}]);