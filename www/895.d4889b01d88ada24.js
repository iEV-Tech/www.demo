"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[895],{895:(L,h,s)=>{s.r(h),s.d(h,{VipWalletHistoryPageModule:()=>A});var m=s(177),v=s(9417),r=s(3092),d=s(7625),u=s(467),y=s(5312),P=s(6037);const V=function(){var i=(0,u.A)(function*(a){var o,e,n,l,p,g;a.params=a.params||{},(0,P.hm)({url:"api/VipWalletHistory/get-myviphistory",params:{IsIn:null!==(o=a.params.IsIn)&&void 0!==o?o:null,IsVehicleVipWallet:null!==(e=a.params.IsVehicleVipWallet)&&void 0!==e?e:null,StartDate:null!==(n=a.params.StartDate)&&void 0!==n?n:null,EndDate:null!==(l=a.params.EndDate)&&void 0!==l?l:null,PageNumber:null!==(p=a.params.PageNumber)&&void 0!==p?p:1,PageSize:null!==(g=a.params.PageSize)&&void 0!==g?g:10},success:c=>{"function"==typeof a.callback&&a.callback(c.data||null)},error:c=>{var f;"function"==typeof a.callback&&a.callback(null==c||null===(f=c.response)||void 0===f?void 0:f.data),console.error(c)},loading:a.loading,loadingController:a.loadingController})});return function(o){return i.apply(this,arguments)}}();var C=s(6539),_=s(8517),$=s(8650),I=s(8833),t=s(4438),W=s(5032),R=s(4842);const H=i=>({$implicit:i});function F(i,a){if(1&i&&(t.qex(0),t.j41(1,"div",11),t.eu8(2,12),t.k0s(),t.bVm()),2&i){const o=a.$implicit;t.XpG(2);const e=t.sdS(28);t.R7$(2),t.Y8G("ngTemplateOutlet",e)("ngTemplateOutletContext",t.eq3(2,H,o))}}function M(i,a){if(1&i&&(t.j41(0,"div",7)(1,"div",9),t.DNE(2,F,3,4,"ng-container",10),t.k0s()()),2&i){const o=t.XpG();t.R7$(2),t.Y8G("ngForOf",o.walletHistorys)}}function b(i,a){1&i&&(t.j41(0,"div",13),t.nrm(1,"img",14),t.j41(2,"div",15),t.EFF(3),t.nI1(4,"translate"),t.k0s()()),2&i&&(t.R7$(3),t.JRh(t.bMT(4,1,"DataNotFound")))}function j(i,a){if(1&i){const o=t.RV6();t.j41(0,"ion-infinite-scroll",16),t.bIt("ionInfinite",function(n){t.eBV(o);const l=t.XpG();return t.Njj(l.onIonInfinite(n))}),t.nrm(1,"ion-infinite-scroll-content"),t.k0s()}}function x(i,a){if(1&i&&t.nrm(0,"img",22),2&i){const o=t.XpG(2).$implicit;t.Mz_("src","../../../assets/icon/payment/",o.Paymethod.toLowerCase(),".jpeg",t.B4B)}}function T(i,a){1&i&&t.nrm(0,"img",23)}function D(i,a){if(1&i&&(t.j41(0,"b"),t.EFF(1),t.k0s(),t.j41(2,"ion-chip")(3,"ion-label",20),t.EFF(4),t.k0s(),t.j41(5,"ion-avatar"),t.DNE(6,x,1,2,"img",22)(7,T,1,0),t.k0s()()),2&i){let o,e;const n=t.XpG().$implicit,l=t.XpG();t.R7$(),t.JRh(null!==(o=n.VWalletInMethodName)&&void 0!==o?o:n.VVipWalletInMethodName),t.R7$(3),t.Lme(" +",l.APP_FUNC_FormatMoney(null!==(e=n.Amount)&&void 0!==e?e:0)," ",null!==(e=n.Units)&&void 0!==e?e:"\u0111"," "),t.R7$(2),t.vxM(6,n.Paymethod?6:7)}}function G(i,a){1&i&&(t.j41(0,"ion-avatar"),t.nrm(1,"img",24),t.k0s())}function N(i,a){1&i&&(t.j41(0,"ion-avatar"),t.nrm(1,"img",25),t.k0s())}function E(i,a){if(1&i&&(t.j41(0,"b"),t.EFF(1),t.k0s(),t.j41(2,"ion-chip")(3,"ion-label",20),t.EFF(4),t.k0s(),t.DNE(5,G,2,0,"ion-avatar")(6,N,2,0),t.k0s()),2&i){let o;const e=t.XpG().$implicit,n=t.XpG();t.R7$(),t.JRh(e.VPurposeUsedName),t.R7$(3),t.Lme(" -",n.APP_FUNC_FormatMoney(null!==(o=e.Amount)&&void 0!==o?o:0)," ",null!==(o=e.Units)&&void 0!==o?o:"\u0111"," "),t.R7$(),t.vxM(5,e.IsVehicleVipWallet?5:6)}}function k(i,a){if(1&i&&(t.j41(0,"div",17)(1,"div",18),t.DNE(2,D,8,4)(3,E,7,4),t.k0s(),t.j41(4,"div",19)(5,"small",20),t.EFF(6),t.k0s(),t.j41(7,"small")(8,"b",21),t.EFF(9),t.nI1(10,"translate"),t.k0s()()()()),2&i){const o=a.$implicit,e=t.XpG();t.R7$(2),t.vxM(2,o.IsIn?2:3),t.R7$(4),t.JRh(e.APP_FUNC_FormatDate(o.CreatedDate)),t.R7$(3),t.JRh(t.bMT(10,3,"Completed"))}}const U=[{path:"",component:(()=>{var i;class a{constructor(e,n,l,p,g,c){this.router=e,this.platform=n,this.modalController=l,this.animationController=p,this.toastController=g,this.loadingController=c,this.APP_ROUTE=I._,this.APP_FUNC_FormatMoney=_.xi,this.APP_FUNC_FormatDate=_.Rv,this.readfile_url=y.c.readfile_url,this.paging={sortfield:null,sorttype:null,page:1,limit:20,loading:!1,active:!0},this.filter={},this.walletHistorys=[],this.limitLoad=0}ngOnInit(){(0,C.kU)().then(e=>{e&&this.refreshData()})}onIonRefresher(e){this.filter={},this.refreshData(()=>{e.target.complete()})}onIonInfinite(e){this.loadMore(()=>{e.target.complete()})}onIonSegmentChange(e){this.filter.type=e.detail.value,this.filterChange()}pushData(e){1==this.paging.page&&(this.walletHistorys.length=0),this.walletHistorys=this.walletHistorys.concat(e)}refreshData(e){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit(e)}loadMore(e){this.paging.page+=1,this.loadData_Paging_Limit(e)}searchChange(e){this.filter.search=e.target.value.replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}sortChange(e,n){this.paging.sortfield=e||null,this.paging.sorttype=n||null,this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}filterChange(){this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}loadData_Paging_Limit(e){var n=this;return(0,u.A)(function*(){if(n.limitLoad>0)return void(e&&e());n.limitLoad=300;let l=setInterval(()=>{n.limitLoad-=100,n.limitLoad<=0&&(clearInterval(l),n.loadData_Paging(e))},100)})()}loadData_Paging(e){var n=this;return(0,u.A)(function*(){n.paging.loading=!0,V({loadingController:n.loadingController,params:{IsIn:1==n.filter.type||2!=n.filter.type&&null,PageNumber:n.paging.page,PageSize:n.paging.limit},callback:l=>{var p;n.response=l,null!=l&&l.Succeeded?n.pushData(null!==(p=l.Data)&&void 0!==p?p:[]):(0,$.cX)(n.toastController,{},l).then(g=>g.present()),n.paging.loading=!1,n.paging.active=!(null==l||!l.HasNextPage),e&&e()}})})()}}return(i=a).\u0275fac=function(e){return new(e||i)(t.rXU(d.Ix),t.rXU(W.OD),t.rXU(r.W3),t.rXU(r.Hx),t.rXU(r.K_),t.rXU(r.Xi))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-vip-wallet-history"]],decls:29,vars:19,consts:[["templateWallet",""],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],[1,"container","px-0"],["mode","md",3,"ionChange","value"],[3,"value"],[1,"container","pt-3","pb-4"],[3,"ionInfinite",4,"ngIf"],[1,"row"],[4,"ngFor","ngForOf"],[1,"col-12","col-lg-6","mb-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"container","py-5","text-center"],["src","../../../assets/image/default/no-info.svg"],[1,"text-muted","mt-4"],[3,"ionInfinite"],[1,"card-order","cursor-pointer"],[1,"d-flex","align-items-start","justify-content-between"],[1,"d-flex","align-items-start","justify-content-between","mt-2"],[1,"fw-300"],[1,"text-success"],[3,"src"],["src","../../../assets/icon/payment/money.svg"],["src","../../../assets/icon/payment/wallet-vip.svg"],["src","../../../assets/icon/payment/wallet-basic.svg"]],template:function(e,n){if(1&e){const l=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),t.nrm(3,"ion-back-button",2),t.k0s(),t.j41(4,"ion-title"),t.EFF(5),t.nI1(6,"translate"),t.k0s()()(),t.j41(7,"ion-content")(8,"ion-refresher",3),t.bIt("ionRefresh",function(g){return t.eBV(l),t.Njj(n.onIonRefresher(g))}),t.nrm(9,"ion-refresher-content"),t.k0s(),t.j41(10,"div",4)(11,"ion-segment",5),t.bIt("ionChange",function(g){return t.eBV(l),t.Njj(n.onIonSegmentChange(g))}),t.j41(12,"ion-segment-button",6)(13,"ion-label"),t.EFF(14),t.nI1(15,"translate"),t.k0s()(),t.j41(16,"ion-segment-button",6)(17,"ion-label"),t.EFF(18),t.nI1(19,"translate"),t.k0s()(),t.j41(20,"ion-segment-button",6)(21,"ion-label"),t.EFF(22),t.nI1(23,"translate"),t.k0s()()()(),t.DNE(24,M,3,1,"div",7)(25,b,5,3)(26,j,2,0,"ion-infinite-scroll",8),t.k0s(),t.DNE(27,k,11,5,"ng-template",null,0,t.C5r)}if(2&e){let l;t.R7$(3),t.Y8G("defaultHref",n.APP_ROUTE.USER),t.R7$(2),t.JRh(t.bMT(6,11,"TransactionHistoryVip")),t.R7$(6),t.Y8G("value",null!==(l=n.filter.type)&&void 0!==l?l:0),t.R7$(),t.Y8G("value",0),t.R7$(2),t.JRh(t.bMT(15,13,"All")),t.R7$(2),t.Y8G("value",1),t.R7$(2),t.JRh(t.bMT(19,15,"IncreaseBalance")),t.R7$(2),t.Y8G("value",2),t.R7$(2),t.JRh(t.bMT(23,17,"Pay")),t.R7$(2),t.vxM(24,n.walletHistorys.length?24:n.response?25:-1),t.R7$(2),t.Y8G("ngIf",n.paging.active)}},dependencies:[m.Sq,m.bT,m.T3,r.mC,r.QW,r.ZB,r.W9,r.eU,r.Ax,r.Hp,r.he,r.To,r.Ki,r.Gp,r.eP,r.BC,r.ai,r.Je,r.el,R.D9],styles:[".card-order[_ngcontent-%COMP%]{padding:1rem;border-radius:1rem;background-color:var(--ion-color-light);color:var(--ion-color-light-contrast)}.card-order[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{min-height:1.25rem;padding-top:.25rem;padding-bottom:.25rem;background:transparent}.card-order[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem;line-height:0;border:1px solid var(--ion-color-medium-tint)}.card-order[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{border-radius:50%;padding:2px;background:var(--ion-color-light-tint)}"]}),a})()}];let O=(()=>{var i;class a{}return(i=a).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[d.iI.forChild(U),d.iI]}),a})();var X=s(3890);let A=(()=>{var i;class a{}return(i=a).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[m.MD,v.YN,r.bv,O,X.x]}),a})()}}]);