"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8608],{6043:(Z,D,_)=>{_.d(D,{V:()=>S,j:()=>s});var R=_(467),E=_(6037);const s=function(){var C=(0,R.A)(function*(p){p.params=p.params||{},(0,E.hm)({url:`api/ChargingConnector/get-byqr/${p.params.QrCode}`,success:g=>{"function"==typeof p.callback&&p.callback(g.data||null)},error:g=>{var h;"function"==typeof p.callback&&p.callback(null==g||null===(h=g.response)||void 0===h?void 0:h.data),console.error(g)},loading:p.loading,loadingController:p.loadingController})});return function(g){return C.apply(this,arguments)}}(),S=function(){var C=(0,R.A)(function*(p){p.params=p.params||{},(0,E.hm)({url:`api/ChargingConnector/get-byid/${p.params.ChargeConnectorId}`,success:g=>{"function"==typeof p.callback&&p.callback(g.data||null)},error:g=>{var h;"function"==typeof p.callback&&p.callback(null==g||null===(h=g.response)||void 0===h?void 0:h.data),console.error(g)},loading:p.loading,loadingController:p.loadingController})});return function(g){return C.apply(this,arguments)}}()},9946:(Z,D,_)=>{_.d(D,{ks:()=>S,sh:()=>C,z:()=>s});var R=_(467),E=_(6037);const s=function(){var p=(0,R.A)(function*(g){g.params=g.params||{},(0,E.hm)({url:"api/User/get-user",params:{},success:h=>{"function"==typeof g.callback&&g.callback(h.data||null)},error:h=>{var b;"function"==typeof g.callback&&g.callback(null==h||null===(b=h.response)||void 0===b?void 0:b.data),console.error(h)},loading:g.loading,loadingController:g.loadingController})});return function(h){return p.apply(this,arguments)}}(),S=function(){var p=(0,R.A)(function*(g){var h,b,x,w,G,F;g.params=g.params||{},(0,E.IH)({url:"api/User/update-user",params:{FullName:null!==(h=g.params.FullName)&&void 0!==h?h:null,PersonEmail:null!==(b=g.params.Email)&&void 0!==b?b:null,Phone:null!==(x=g.params.Phone)&&void 0!==x?x:null,Address:null!==(w=g.params.Address)&&void 0!==w?w:null,Gender:null!==(G=g.params.Gender)&&void 0!==G?G:null,Birthday:null!==(F=g.params.Birthday)&&void 0!==F?F:null},success:V=>{"function"==typeof g.callback&&g.callback(V.data||null)},error:V=>{var v;"function"==typeof g.callback&&g.callback(null==V||null===(v=V.response)||void 0===v?void 0:v.data),console.error(V)},loading:g.loading,loadingController:g.loadingController})});return function(h){return p.apply(this,arguments)}}(),C=function(){var p=(0,R.A)(function*(g){var h,b;g.params=g.params||{},(0,E.IH)({url:"api/User/update-avatar",params:{UserId:null!==(h=g.params.UserId)&&void 0!==h?h:null,Avatar:null!==(b=g.params.Avatar)&&void 0!==b?b:null},success:x=>{"function"==typeof g.callback&&g.callback(x.data||null)},error:x=>{var w;"function"==typeof g.callback&&g.callback(null==x||null===(w=x.response)||void 0===w?void 0:w.data),console.error(x)},loading:g.loading,loadingController:g.loadingController})});return function(h){return p.apply(this,arguments)}}()},8608:(Z,D,_)=>{_.r(D),_.d(D,{ChargingConnectorDetailPageModule:()=>Zn});var R=_(177),E=_(9417),s=_(3092),S=_(7625),C=_(467),p=_(7392);const h=(0,_(5083).F3)("AppLauncher",{web:()=>_.e(614).then(_.bind(_,614)).then(l=>new l.AppLauncherWeb)});var b=_(6037);const x=function(){var l=(0,C.A)(function*(i){var a,e;i.params=i.params||{},(0,b.hm)({url:"api/PaymentMethod/get-paymentmethods",params:{PageNumber:null!==(a=i.params.PageNumber)&&void 0!==a?a:1,PageSize:null!==(e=i.params.PageSize)&&void 0!==e?e:10},success:t=>{"function"==typeof i.callback&&i.callback(t.data||null)},error:t=>{var o;"function"==typeof i.callback&&i.callback(null==t||null===(o=t.response)||void 0===o?void 0:o.data),console.error(t)},loading:i.loading,loadingController:i.loadingController})});return function(a){return l.apply(this,arguments)}}();var G=_(6539),F=_(8517),V=_(8833),v=_(8650),q=_(9061);const an=function(){var l=(0,C.A)(function*(i){var a,e,t,o;i.params=i.params||{},(0,b.hm)({url:"api/ChargingPowerPackage/get-chargingpackages",params:{ChargeConnectorId:null!==(a=i.params.ChargeConnectorId)&&void 0!==a?a:null,IsPackByPower:null!==(e=i.params.IsPackByPower)&&void 0!==e?e:null,PageNumber:null!==(t=i.params.PageNumber)&&void 0!==t?t:1,PageSize:null!==(o=i.params.PageSize)&&void 0!==o?o:10},success:r=>{"function"==typeof i.callback&&i.callback(r.data||null)},error:r=>{var d;"function"==typeof i.callback&&i.callback(null==r||null===(d=r.response)||void 0===d?void 0:d.data),console.error(r)},loading:i.loading,loadingController:i.loadingController})});return function(a){return l.apply(this,arguments)}}(),A=function(){var l=(0,C.A)(function*(i){var a,e,t;i.params=i.params||{},(0,b.hm)({url:"api/ChargingPowerPackage/get-detail",params:{PromoteCode:null!==(a=i.params.PromoteCode)&&void 0!==a?a:null,ChargePackageId:null!==(e=i.params.ChargePackageId)&&void 0!==e?e:null,ChargeConnectorId:null!==(t=i.params.ChargeConnectorId)&&void 0!==t?t:null},success:o=>{"function"==typeof i.callback&&i.callback(o.data||null)},error:o=>{var r;"function"==typeof i.callback&&i.callback(null==o||null===(r=o.response)||void 0===r?void 0:r.data),console.error(o)},loading:i.loading,loadingController:i.loadingController})});return function(a){return l.apply(this,arguments)}}(),on=function(){var l=(0,C.A)(function*(i){var a,e,t;i.params=i.params||{},(0,b.hm)({url:"api/ChargingPowerPackage/get-range-optional-pack",params:{PromoteCode:null!==(a=i.params.PromoteCode)&&void 0!==a?a:null,ChargePackageId:null!==(e=i.params.ChargePackageId)&&void 0!==e?e:null,ChargeConnectorId:null!==(t=i.params.ChargeConnectorId)&&void 0!==t?t:null},success:o=>{"function"==typeof i.callback&&i.callback(o.data||null)},error:o=>{var r;"function"==typeof i.callback&&i.callback(null==o||null===(r=o.response)||void 0===r?void 0:r.data),console.error(o)},loading:i.loading,loadingController:i.loadingController})});return function(a){return l.apply(this,arguments)}}(),ln=function(){var l=(0,C.A)(function*(i){var a,e,t;i.params=i.params||{},(0,b.hm)({url:"api/ChargingPowerPackage/get-optional-detail",params:{PowerValue:null!==(a=i.params.PowerValue)&&void 0!==a?a:null,ChargeConnectorId:null!==(e=i.params.ChargeConnectorId)&&void 0!==e?e:null,PromoteCode:null!==(t=i.params.PromoteCode)&&void 0!==t?t:null},success:o=>{"function"==typeof i.callback&&i.callback(o.data||null)},error:o=>{var r;"function"==typeof i.callback&&i.callback(null==o||null===(r=o.response)||void 0===r?void 0:r.data),console.error(o)},loading:i.loading,loadingController:i.loadingController})});return function(a){return l.apply(this,arguments)}}();var rn=_(6043),nn=_(3588),en=_(5312),cn=_(4076),tn=_(7663),gn=_(9946),n=_(4438),dn=_(5032),un=_(4842);function mn(l,i){if(1&l&&n.eu8(0,8),2&l){n.XpG();const a=n.sdS(4);n.Y8G("ngTemplateOutlet",a)}}function sn(l,i){if(1&l&&n.eu8(0,8),2&l){n.XpG();const a=n.sdS(6);n.Y8G("ngTemplateOutlet",a)}}function _n(l,i){if(1&l){const a=n.RV6();n.j41(0,"ion-button",36),n.bIt("click",function(){n.eBV(a),n.XpG(3);const t=n.sdS(42);return n.Njj(null==t?null:t.present())}),n.j41(1,"ion-label"),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.nrm(4,"ion-icon",37),n.k0s()}2&l&&(n.R7$(2),n.SpI(" ",n.bMT(3,1,"CustomChargingPackage")," "))}function pn(l,i){if(1&l){const a=n.RV6();n.j41(0,"div",28)(1,"ion-segment",33),n.bIt("ionChange",function(t){n.eBV(a);const o=n.XpG(3);return n.Njj(o.changeIsPackByPower(t))}),n.j41(2,"ion-segment-button",34)(3,"ion-label"),n.EFF(4),n.nI1(5,"translate"),n.k0s()(),n.j41(6,"ion-segment-button",34)(7,"ion-label"),n.EFF(8),n.nI1(9,"translate"),n.k0s()()(),n.DNE(10,_n,5,3,"ion-button",35),n.k0s()}if(2&l){const a=n.XpG(3);n.R7$(),n.Y8G("value",a.IsPackByPower),n.R7$(),n.Y8G("value",!0),n.R7$(2),n.JRh(n.bMT(5,6,"PackagePower")),n.R7$(2),n.Y8G("value",!1),n.R7$(2),n.JRh(n.bMT(9,8,"PackageMoney")),n.R7$(2),n.Y8G("ngIf",(null==a.chargingPackageRange?null:a.chargingPackageRange.MinPowerValue)&&(null==a.chargingPackageRange?null:a.chargingPackageRange.MaxPowerValue))}}function Cn(l,i){if(1&l&&(n.j41(0,"div")(1,"span"),n.EFF(2),n.k0s()()),2&l){const a=n.XpG().$implicit;n.R7$(2),n.Lme(" ",a.PowerValue," ",a.Unit," ")}}function hn(l,i){if(1&l&&(n.j41(0,"div")(1,"span"),n.EFF(2),n.k0s()()),2&l){let a;const e=n.XpG().$implicit,t=n.XpG(4);n.R7$(2),n.SpI(" ",t.APP_FUNC_FormatMoney(null!==(a=e.AftertaxPrice)&&void 0!==a?a:0),"\u0111 ")}}function Pn(l,i){if(1&l&&(n.qex(0),n.j41(1,"div",40)(2,"ion-item",41)(3,"ion-radio",42)(4,"div",14)(5,"div"),n.nrm(6,"ion-img",43),n.k0s(),n.j41(7,"div",16),n.DNE(8,Cn,3,2,"div")(9,hn,3,1),n.k0s()()()()(),n.bVm()),2&l){let a;const e=i.$implicit;n.R7$(3),n.Y8G("disabled",!(null!==(a=null!==(a=null==e?null:e.RealValue)&&void 0!==a?a:null==e?null:e.PowerValue)&&void 0!==a&&a))("value",e.ChargePackageId),n.R7$(5),n.vxM(8,e.IsPackByPower?8:9)}}function vn(l,i){if(1&l){const a=n.RV6();n.j41(0,"ion-radio-group",38),n.bIt("ionChange",function(t){n.eBV(a);const o=n.XpG(3);return n.Njj(o.changeChargePackage(t))}),n.DNE(1,Pn,10,3,"ng-container",39),n.k0s()}if(2&l){const a=n.XpG(3);n.Y8G("value",a.ChargePackageId),n.R7$(),n.Y8G("ngForOf",a.filterChargePackage())}}function fn(l,i){if(1&l&&(n.j41(0,"div",48)(1,"ion-text",49),n.EFF(2),n.k0s()()),2&l){let a;const e=n.XpG(6);n.R7$(2),n.Lme(" ",e.APP_FUNC_FormatMoney(null!==(a=null==e.wallet?null:e.wallet.WalletValue)&&void 0!==a?a:0)," ",null!==(a=null==e.wallet?null:e.wallet.Units)&&void 0!==a?a:"\u0111"," ")}}function kn(l,i){if(1&l&&(n.j41(0,"div",48)(1,"ion-text",49),n.EFF(2),n.k0s()()),2&l){let a;const e=n.XpG(6);n.R7$(2),n.Lme(" ",e.APP_FUNC_FormatMoney(null!==(a=null==e.walletVip?null:e.walletVip.WalletValue)&&void 0!==a?a:0)," ",null!==(a=null==e.walletVip?null:e.walletVip.Units)&&void 0!==a?a:"\u0111"," ")}}function bn(l,i){if(1&l&&(n.qex(0),n.j41(1,"div",45)(2,"ion-item",41)(3,"ion-radio",46)(4,"div",14)(5,"div")(6,"ion-thumbnail"),n.nrm(7,"img",47),n.k0s()(),n.j41(8,"div",16)(9,"b"),n.EFF(10),n.k0s(),n.DNE(11,fn,3,2,"div",48)(12,kn,3,2),n.k0s()()()()(),n.bVm()),2&l){let a,e;const t=i.$implicit,o=n.XpG(5);n.R7$(),n.HbH(t.PaymentMethodId==o.PaymentMethodId?"border-primary":"border-gray"),n.R7$(2),n.Y8G("value",t.PaymentMethodId)("disabled",!t.IsSupport||"VWALLET"==t.PmCode&&(null!==(a=null==o.wallet?null:o.wallet.WalletValue)&&void 0!==a?a:0)<(null!==(a=null==o.chargingPackage?null:o.chargingPackage.RealValue)&&void 0!==a?a:0)||"VIPWALLET"==t.PmCode&&(null!==(a=null==o.walletVip?null:o.walletVip.WalletValue)&&void 0!==a?a:0)<(null!==(a=null==o.chargingPackage?null:o.chargingPackage.PowerValue)&&void 0!==a?a:0)),n.R7$(4),n.Mz_("src","assets/icon/payment/",null==t.PmCode?null:t.PmCode.toLocaleLowerCase(),".jpeg",n.B4B),n.R7$(3),n.SpI(" ",null!==(e=null!==(e=t.PmDesc)&&void 0!==e?e:t.PmName)&&void 0!==e?e:t.PmCode," "),n.R7$(),n.vxM(11,t.IsSystem&&"VWALLET"==t.PmCode?11:t.IsSystem&&"VIPWALLET"==t.PmCode?12:-1)}}function Mn(l,i){if(1&l){const a=n.RV6();n.j41(0,"ion-radio-group",38),n.bIt("ionChange",function(t){n.eBV(a);const o=n.XpG(4);return n.Njj(o.changePaymentMethod(t))}),n.DNE(1,bn,13,8,"ng-container",39),n.k0s()}if(2&l){const a=n.XpG(4);n.Y8G("value",a.PaymentMethodId),n.R7$(),n.Y8G("ngForOf",a.paymentMethods)}}function yn(l,i){if(1&l&&(n.j41(0,"div",32)(1,"div",21)(2,"b"),n.EFF(3),n.nI1(4,"translate"),n.k0s()(),n.j41(5,"div",44),n.DNE(6,Mn,2,2,"ion-radio-group",31),n.k0s()()),2&l){const a=n.XpG(3);n.R7$(3),n.JRh(n.bMT(4,2,"PaymentMethod")),n.R7$(3),n.Y8G("ngIf",a.paymentMethods.length)}}function In(l,i){if(1&l&&(n.qex(0),n.j41(1,"div",26)(2,"div",27)(3,"b"),n.EFF(4),n.nI1(5,"translate"),n.k0s(),n.DNE(6,pn,11,10,"div",28),n.k0s(),n.j41(7,"div",29)(8,"div",30),n.DNE(9,vn,2,2,"ion-radio-group",31),n.k0s()()(),n.DNE(10,yn,7,4,"div",32),n.bVm()),2&l){const a=n.XpG(2);n.R7$(4),n.JRh(n.bMT(5,4,"ChargingPackage")),n.R7$(2),n.vxM(6,"VIP"==(null==a.user?null:a.user.UserClassifyCode)?6:-1),n.R7$(3),n.Y8G("ngIf",a.chargingPackages.length),n.R7$(),n.vxM(10,a.IsPackByPower?10:-1)}}function Rn(l,i){if(1&l){const a=n.RV6();n.j41(0,"div",50)(1,"div",51)(2,"h5",52)(3,"b"),n.EFF(4),n.nI1(5,"translate"),n.k0s()()(),n.j41(6,"div")(7,"div",53)(8,"div",54)(9,"ion-item",55)(10,"ion-input",56),n.bIt("ionChange",function(t){n.eBV(a);const o=n.XpG(2);return n.Njj(o.changeCustomElectricValue(t))}),n.k0s()()(),n.j41(11,"div",57)(12,"small")(13,"b"),n.EFF(14,"kWh"),n.k0s()()()()(),n.j41(15,"div")(16,"ion-range",58,4),n.bIt("ionChange",function(t){n.eBV(a);const o=n.XpG(2);return n.Njj(o.changeCustomElectricValue(t))}),n.k0s(),n.j41(18,"div",59)(19,"small"),n.EFF(20),n.k0s(),n.j41(21,"small"),n.EFF(22),n.k0s()()(),n.j41(23,"div",60)(24,"ion-button",61),n.bIt("click",function(t){n.eBV(a),n.XpG();const o=n.sdS(42),r=n.sdS(45),d=n.XpG();return n.Njj(d.IsPackByPower?d.autoSubmitCustomElectric(t,o):d.applyCustomElectric(t,o,r))}),n.j41(25,"ion-label"),n.EFF(26),n.nI1(27,"translate"),n.k0s()()()()}if(2&l){const a=n.XpG(2);n.R7$(4),n.JRh(n.bMT(5,14,"CustomKWhNumber")),n.R7$(6),n.Mz_("placeholder","",a.customElectricMin," kWh"),n.Y8G("ngModel",a.customElectricValue)("min",a.customElectricMin)("max",a.customElectricMax),n.R7$(6),n.Y8G("ngModel",a.customElectricValue)("min",a.customElectricMin)("max",a.customElectricMax)("step",a.customElectricStep)("pin",!0),n.R7$(4),n.JRh(a.customElectricMin),n.R7$(2),n.JRh(a.customElectricMax),n.R7$(4),n.JRh(n.bMT(27,16,"Apply"))}}function xn(l,i){if(1&l){const a=n.RV6();n.j41(0,"div",50)(1,"div",51)(2,"h5",52)(3,"b"),n.EFF(4),n.nI1(5,"translate"),n.k0s()()(),n.j41(6,"div")(7,"div",62)(8,"div",63)(9,"span",64),n.EFF(10),n.k0s()(),n.j41(11,"div",65)(12,"ion-button",66),n.bIt("click",function(){n.eBV(a),n.XpG();const t=n.sdS(42),o=n.sdS(45);return null==o||o.dismiss(),n.Njj(null==t?null:t.present())}),n.j41(13,"ion-label"),n.EFF(14),n.nI1(15,"translate"),n.k0s()()()()(),n.j41(16,"div",30)(17,"div",67)(18,"span"),n.EFF(19),n.nI1(20,"translate"),n.k0s(),n.j41(21,"b",68),n.EFF(22),n.k0s()()(),n.j41(23,"div",60)(24,"ion-button",61),n.bIt("click",function(t){n.eBV(a),n.XpG();const o=n.sdS(45),r=n.XpG();return n.Njj(r.submitCustomPackage(t,o))}),n.j41(25,"ion-label"),n.EFF(26),n.nI1(27,"translate"),n.k0s()()()()}if(2&l){let a,e;const t=n.XpG(2);n.R7$(4),n.JRh(n.bMT(5,7,"ConfirmCustomChargingPackage")),n.R7$(6),n.Lme(" ",null!==(a=null==t.customChargingPackage?null:t.customChargingPackage.PowerValue)&&void 0!==a?a:0," ",null!==(a=null==t.customChargingPackage?null:t.customChargingPackage.Unit)&&void 0!==a?a:"kWh"," "),n.R7$(4),n.JRh(n.bMT(15,9,"Edit")),n.R7$(5),n.SpI("",n.bMT(20,11,"IntoMoneyTemp"),":"),n.R7$(3),n.SpI(" ",t.APP_FUNC_FormatMoney(null!==(e=null==t.customChargingPackage?null:t.customChargingPackage.RealValue)&&void 0!==e?e:0),"\u0111 "),n.R7$(4),n.JRh(n.bMT(27,13,"Pay"))}}function En(l,i){if(1&l){const a=n.RV6();n.qex(0),n.j41(1,"ion-button",72),n.bIt("click",function(t){n.eBV(a);const o=n.XpG(3);return n.Njj(o.submitPackage(t))}),n.j41(2,"ion-label"),n.EFF(3),n.nI1(4,"translate"),n.k0s()(),n.bVm()}if(2&l){const a=n.XpG(3);n.R7$(3),n.SpI(" ",n.bMT(4,1,a.IsPackByPower?"StartChargingSession":"Pay")," ")}}function Fn(l,i){1&l&&(n.qex(0),n.j41(1,"ion-button",73)(2,"ion-label"),n.EFF(3),n.nI1(4,"translate"),n.k0s()(),n.bVm()),2&l&&(n.R7$(3),n.JRh(n.bMT(4,1,"BeingUsed")))}function Vn(l,i){1&l&&(n.qex(0),n.j41(1,"ion-button",74)(2,"ion-label"),n.EFF(3),n.nI1(4,"translate"),n.k0s()(),n.bVm()),2&l&&(n.R7$(3),n.JRh(n.bMT(4,1,"AlreadyBooked")))}function Tn(l,i){1&l&&(n.qex(0),n.j41(1,"ion-button",75)(2,"ion-label"),n.EFF(3),n.nI1(4,"translate"),n.k0s()(),n.bVm()),2&l&&(n.R7$(3),n.JRh(n.bMT(4,1,"TemporarilyStoppedServing")))}function jn(l,i){if(1&l&&(n.j41(0,"ion-footer")(1,"div",69),n.qex(2,5),n.DNE(3,En,5,3,"ng-container",70)(4,Fn,5,3,"ng-container",70)(5,Vn,5,3,"ng-container",70)(6,Tn,5,3,"ng-container",71),n.bVm(),n.k0s()()),2&l){const a=n.XpG(2);n.R7$(2),n.Y8G("ngSwitch",a.chargingConnector.VConnectorStatus),n.R7$(),n.Y8G("ngSwitchCase",a.v_connector_status.DangRanh),n.R7$(),n.Y8G("ngSwitchCase",a.v_connector_status.DangSac),n.R7$(),n.Y8G("ngSwitchCase",a.v_connector_status.DaDatLich)}}function On(l,i){if(1&l){const a=n.RV6();n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",9),n.nrm(3,"ion-back-button",10),n.k0s(),n.j41(4,"ion-title"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()(),n.j41(7,"ion-content")(8,"ion-refresher",11),n.bIt("ionRefresh",function(t){n.eBV(a);const o=n.XpG();return n.Njj(o.onIonRefresher(t))}),n.nrm(9,"ion-refresher-content"),n.k0s(),n.j41(10,"div",12)(11,"div",13)(12,"div",14)(13,"div")(14,"ion-thumbnail"),n.nrm(15,"img",15),n.k0s()(),n.j41(16,"div",16)(17,"h5",17),n.nrm(18,"ion-icon",18),n.j41(19,"span",19),n.EFF(20),n.k0s()(),n.j41(21,"div")(22,"small"),n.EFF(23),n.k0s()()()()(),n.j41(24,"div",20)(25,"div",21)(26,"b"),n.EFF(27),n.nI1(28,"translate"),n.k0s()(),n.j41(29,"div",22)(30,"div"),n.nrm(31,"ion-img",23),n.k0s(),n.j41(32,"div",16)(33,"div",17)(34,"b"),n.EFF(35),n.nI1(36,"translate"),n.k0s()(),n.j41(37,"div")(38,"small"),n.EFF(39),n.k0s()()()()(),n.DNE(40,In,11,6,"ng-container",24),n.k0s(),n.j41(41,"ion-modal",25,2),n.DNE(43,Rn,28,18,"ng-template"),n.k0s(),n.j41(44,"ion-modal",25,3),n.DNE(46,xn,28,15,"ng-template"),n.k0s()(),n.DNE(47,jn,7,4,"ion-footer",24)}if(2&l){const a=n.XpG();n.R7$(3),n.Y8G("defaultHref",a.APP_ROUTE.DEFAULT),n.R7$(2),n.JRh(n.bMT(6,12,"ChooseChargingPackage")),n.R7$(10),n.Y8G("src",a.APP_FUNC_GetLocImage(a.chargingLocation,"assets/image/default/ev-station.png"),n.B4B),n.R7$(5),n.JRh(null==a.chargingLocation?null:a.chargingLocation.LocName),n.R7$(3),n.SpI("ID: ",null==a.chargingStation?null:a.chargingStation.StationCode,""),n.R7$(4),n.JRh(n.bMT(28,14,"Connector")),n.R7$(8),n.Lme(" ",n.bMT(36,16,"ConnectorNum")," ",null==a.chargingConnector?null:a.chargingConnector.ConnectorId," "),n.R7$(4),n.Lme(" ID: ",null==a.chargingStation?null:a.chargingStation.StationCode,"",null==a.chargingConnector?null:a.chargingConnector.ConnectorId," "),n.R7$(),n.Y8G("ngIf",(null==a.chargingConnector?null:a.chargingConnector.VConnectorStatus)==a.v_connector_status.DangRanh),n.R7$(7),n.Y8G("ngIf",a.chargingConnector)}}function Sn(l,i){if(1&l&&(n.j41(0,"small"),n.EFF(1),n.k0s()),2&l){const a=n.XpG(3);n.R7$(),n.Lme(" ",a.chargingPackage.PowerValue," ",a.chargingPackage.Unit," ")}}function wn(l,i){if(1&l&&(n.j41(0,"small"),n.EFF(1),n.k0s()),2&l){let a;const e=n.XpG(3);n.R7$(),n.SpI(" ",e.APP_FUNC_FormatMoney(null!==(a=e.chargingPackage.AftertaxPrice)&&void 0!==a?a:0),"\u0111 ")}}function Dn(l,i){if(1&l&&(n.j41(0,"tr")(1,"td",64),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"td"),n.EFF(5),n.k0s()()),2&l){const a=n.XpG(3);n.R7$(2),n.JRh(n.bMT(3,2,"Discount")),n.R7$(3),n.SpI("-",a.APP_FUNC_FormatMoney(a.chargingPackage.PromoteValue),"\u0111")}}function Gn(l,i){if(1&l&&(n.j41(0,"tr",86)(1,"td",64),n.EFF(2,"VAT"),n.k0s(),n.j41(3,"td"),n.EFF(4),n.k0s()()),2&l){const a=n.XpG(3);n.R7$(4),n.SpI("+",a.chargingPackage.TaxPercent,"%")}}function An(l,i){1&l&&(n.nrm(0,"br"),n.j41(1,"small",64),n.EFF(2),n.nI1(3,"translate"),n.k0s()),2&l&&(n.R7$(2),n.SpI(" ",n.bMT(3,1,"IncludedVAT")," "))}function Nn(l,i){if(1&l&&(n.j41(0,"strong"),n.EFF(1),n.k0s()),2&l){const a=n.XpG(3);n.R7$(),n.Lme(" ",a.chargingPackage.PowerValue," ",a.chargingPackage.Unit," ")}}function Ln(l,i){if(1&l&&(n.j41(0,"strong"),n.EFF(1),n.k0s()),2&l){let a;const e=n.XpG(3);n.R7$(),n.SpI(" ",e.APP_FUNC_FormatMoney(null!==(a=e.chargingPackage.RealValue)&&void 0!==a?a:0),"\u0111 ")}}function Un(l,i){if(1&l&&(n.j41(0,"div",78)(1,"table",84)(2,"tr")(3,"td",64),n.EFF(4),n.nI1(5,"translate"),n.k0s(),n.j41(6,"td"),n.DNE(7,Sn,2,2,"small")(8,wn,2,1),n.k0s()(),n.DNE(9,Dn,6,4,"tr",24)(10,Gn,5,1,"tr",85),n.j41(11,"tr",86)(12,"td")(13,"b"),n.EFF(14),n.nI1(15,"translate"),n.k0s(),n.DNE(16,An,4,3),n.k0s(),n.j41(17,"td",68),n.DNE(18,Nn,2,2,"strong")(19,Ln,2,1),n.k0s()()()()),2&l){const a=n.XpG(2);n.R7$(4),n.JRh(n.bMT(5,7,"ChargingPackage")),n.R7$(3),n.vxM(7,a.chargingPackage.IsPackByPower?7:8),n.R7$(2),n.Y8G("ngIf",a.chargingPackage.PromoteValue),n.R7$(),n.Y8G("ngIf",a.chargingPackage.TaxPercent),n.R7$(4),n.JRh(n.bMT(15,9,"Total")),n.R7$(2),n.vxM(16,a.IsPackByPower?-1:16),n.R7$(2),n.vxM(18,a.chargingPackage.IsPackByPower?18:19)}}function Xn(l,i){if(1&l){const a=n.RV6();n.j41(0,"div")(1,"ion-chip",91)(2,"ion-label"),n.EFF(3),n.k0s(),n.j41(4,"ion-icon",92),n.bIt("click",function(t){n.eBV(a);const o=n.XpG(3);return n.Njj(o.removePromoteCode(t))}),n.k0s()()()}if(2&l){const a=n.XpG(3);n.R7$(3),n.JRh(a.PromoteCodeApply)}}function Bn(l,i){if(1&l){const a=n.RV6();n.j41(0,"div",83)(1,"div",21)(2,"b"),n.EFF(3),n.nI1(4,"translate"),n.k0s()(),n.j41(5,"div")(6,"div",87)(7,"input",88),n.nI1(8,"translate"),n.bIt("change",function(t){n.eBV(a);const o=n.XpG(2);return n.Njj(o.changePromoteCode(t))})("keyup",function(t){n.eBV(a);const o=n.XpG(2);return n.Njj(o.keyupPromoteCode(t))}),n.k0s(),n.j41(9,"div",89)(10,"button",90),n.bIt("click",function(t){n.eBV(a);const o=n.XpG(2);return n.Njj(o.submitPromoteCode(t))}),n.EFF(11),n.nI1(12,"translate"),n.k0s()()()(),n.DNE(13,Xn,5,1,"div",24),n.k0s()}if(2&l){const a=n.XpG(2);n.R7$(3),n.JRh(n.bMT(4,5,"EnterPromotionalCode")),n.R7$(4),n.FS9("placeholder",n.bMT(8,7,"EnterPromotionalCode")),n.Y8G("ngModel",a.PromoteCode),n.R7$(4),n.SpI(" ",n.bMT(12,9,"Apply")," "),n.R7$(2),n.Y8G("ngIf",a.PromoteCodeApply)}}function $n(l,i){if(1&l&&(n.j41(0,"div",48)(1,"ion-text",49),n.EFF(2),n.k0s()()),2&l){let a;const e=n.XpG(4);n.R7$(2),n.Lme(" ",e.APP_FUNC_FormatMoney(null!==(a=null==e.wallet?null:e.wallet.WalletValue)&&void 0!==a?a:0)," ",null!==(a=null==e.wallet?null:e.wallet.Units)&&void 0!==a?a:"\u0111"," ")}}function Wn(l,i){if(1&l&&(n.j41(0,"div",48)(1,"ion-text",49),n.EFF(2),n.k0s()()),2&l){let a;const e=n.XpG(4);n.R7$(2),n.Lme(" ",e.APP_FUNC_FormatMoney(null!==(a=null==e.walletVip?null:e.walletVip.WalletValue)&&void 0!==a?a:0)," ",null!==(a=null==e.walletVip?null:e.walletVip.Units)&&void 0!==a?a:"\u0111"," ")}}function Yn(l,i){if(1&l&&(n.qex(0),n.j41(1,"div",45)(2,"ion-item",41)(3,"ion-radio",46)(4,"div",14)(5,"div")(6,"ion-thumbnail"),n.nrm(7,"img",47),n.k0s()(),n.j41(8,"div",16)(9,"b"),n.EFF(10),n.k0s(),n.DNE(11,$n,3,2,"div",48)(12,Wn,3,2),n.k0s()()()()(),n.bVm()),2&l){let a,e;const t=i.$implicit,o=n.XpG(3);n.R7$(),n.HbH(t.PaymentMethodId==o.PaymentMethodId?"border-primary":"border-gray"),n.R7$(2),n.Y8G("value",t.PaymentMethodId)("disabled",!t.IsSupport||"VWALLET"==t.PmCode&&(null!==(a=null==o.wallet?null:o.wallet.WalletValue)&&void 0!==a?a:0)<(null!==(a=null==o.chargingPackage?null:o.chargingPackage.RealValue)&&void 0!==a?a:0)||"VIPWALLET"==t.PmCode&&(null!==(a=null==o.walletVip?null:o.walletVip.WalletValue)&&void 0!==a?a:0)<(null!==(a=null==o.chargingPackage?null:o.chargingPackage.PowerValue)&&void 0!==a?a:0)),n.R7$(4),n.Mz_("src","assets/icon/payment/",null==t.PmCode?null:t.PmCode.toLocaleLowerCase(),".jpeg",n.B4B),n.R7$(3),n.JRh(null!==(e=null!==(e=t.PmDesc)&&void 0!==e?e:t.PmName)&&void 0!==e?e:t.PmCode),n.R7$(),n.vxM(11,t.IsSystem&&"VWALLET"==t.PmCode?11:t.IsSystem&&"VIPWALLET"==t.PmCode?12:-1)}}function zn(l,i){if(1&l){const a=n.RV6();n.j41(0,"ion-radio-group",38),n.bIt("ionChange",function(t){n.eBV(a);const o=n.XpG(2);return n.Njj(o.changePaymentMethod(t))}),n.DNE(1,Yn,13,8,"ng-container",39),n.k0s()}if(2&l){const a=n.XpG(2);n.Y8G("value",a.PaymentMethodId),n.R7$(),n.Y8G("ngForOf",a.paymentMethods)}}function Jn(l,i){if(1&l){const a=n.RV6();n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",9)(3,"ion-button",76),n.bIt("click",function(t){n.eBV(a);const o=n.XpG();return n.Njj(o.backPackage(t))}),n.nrm(4,"ion-icon",77),n.k0s()(),n.j41(5,"ion-title"),n.EFF(6),n.nI1(7,"translate"),n.k0s()()(),n.j41(8,"ion-content")(9,"div",69)(10,"div",78)(11,"div",14)(12,"div")(13,"ion-thumbnail"),n.nrm(14,"img",15),n.k0s()(),n.j41(15,"div",16)(16,"h5",79),n.nrm(17,"ion-icon",80),n.j41(18,"span",19),n.EFF(19),n.k0s()(),n.j41(20,"div")(21,"small"),n.EFF(22),n.nI1(23,"translate"),n.j41(24,"b"),n.EFF(25),n.k0s()()(),n.j41(26,"div")(27,"small"),n.EFF(28),n.nI1(29,"translate"),n.j41(30,"b"),n.EFF(31),n.k0s()()()()()(),n.nrm(32,"hr",81),n.DNE(33,Un,20,11,"div",82)(34,Bn,14,11,"div",83),n.j41(35,"div",32)(36,"div",21)(37,"b"),n.EFF(38),n.nI1(39,"translate"),n.k0s()(),n.j41(40,"div",44),n.DNE(41,zn,2,2,"ion-radio-group",31),n.k0s()()()(),n.j41(42,"ion-footer")(43,"ion-toolbar")(44,"div",69)(45,"ion-button",72),n.bIt("click",function(t){n.eBV(a);const o=n.XpG();return n.Njj(o.goPayment(t))}),n.j41(46,"ion-label"),n.EFF(47),n.nI1(48,"translate"),n.k0s()()()()()}if(2&l){let a,e;const t=n.XpG();n.R7$(6),n.JRh(n.bMT(7,20,"BillingInformation")),n.R7$(8),n.Y8G("src",t.APP_FUNC_GetLocImage(t.chargingLocation,"assets/image/default/ev-station.png"),n.B4B),n.R7$(5),n.JRh(null==t.chargingLocation?null:t.chargingLocation.LocName),n.R7$(3),n.Lme(" ",n.bMT(23,22,"ChargingStation")," ",null!=t.chargingStation&&t.chargingStation.IsAC?"AC":"DC"," "),n.R7$(2),n.ZvI("ml-3 text-",t.APP_FUNC_GetColor_VStationStatus(null==t.chargingStation?null:t.chargingStation.VStationStatus),""),n.R7$(),n.SpI(" ",null!==(a=null==t.chargingStation?null:t.chargingStation.VStationStatusName)&&void 0!==a?a:"[TrangThaiTruSac]"," "),n.R7$(3),n.Lme(" ",n.bMT(29,24,"ChargingConnector")," ",null==t.chargingConnector?null:t.chargingConnector.ConnectorType," "),n.R7$(2),n.ZvI("ml-3 text-",t.APP_FUNC_GetColor_VConnectorStatus(null==t.chargingConnector?null:t.chargingConnector.VConnectorStatus),""),n.R7$(),n.SpI(" ",null!==(e=null==t.chargingConnector?null:t.chargingConnector.VConnectorStatusName)&&void 0!==e?e:"[TrangThaiVoiSac]"," "),n.R7$(2),n.Y8G("ngIf",t.chargingPackage),n.R7$(),n.vxM(34,null!=t.chargingPackage&&t.chargingPackage.IsPackByPower?-1:34),n.R7$(4),n.JRh(n.bMT(39,26,"PaymentMethod")),n.R7$(3),n.Y8G("ngIf",t.paymentMethods.length),n.R7$(6),n.JRh(n.bMT(48,28,"Pay"))}}const Hn=[{path:"",component:(()=>{var l;class i{get chargingStation(){var e;return null===(e=this.chargingConnector)||void 0===e?void 0:e.ChargingStation}get chargingLocation(){var e;return null===(e=this.chargingConnector)||void 0===e?void 0:e.ChargingLocation}constructor(e,t,o,r,d,m,u){var c;this.router=e,this.platform=t,this.modalController=r,this.loadingController=d,this.toastController=m,this.animationController=u,this.APP_ROUTE=V._,this.APP_FUNC_FormatMoney=F.xi,this.APP_FUNC_GetColor_VConnectorStatus=F.lB,this.APP_FUNC_GetColor_VStationStatus=F.ew,this.APP_FUNC_GetLocImage=F.Zn,this.v_connector_status=nn.EF,this.chargingPackages=[],this.IsPackByPower=!1,this.customElectricValue=35,this.customElectricMin=1,this.customElectricMax=100,this.customElectricStep=1,this.paymentMethods=[],this.QrCode=null!==(c=o.snapshot.params.qrcode)&&void 0!==c?c:void 0}ngOnInit(){var e=this;this.IsOnInit=!0,(0,C.A)(function*(){(yield(0,G.kU)())&&e.refreshData()})()}ionViewDidEnter(){this.IsOnInit||this.router.navigateByUrl(V._.DEFAULT)}ionViewDidLeave(){this.IsOnInit=!1}onIonRefresher(e){this.refreshData(()=>{e.target.complete()})}refreshData(e){var t=this;return(0,C.A)(function*(){t.QrCode?Promise.all([new Promise(o=>{(0,gn.z)({loadingController:t.loadingController,callback:r=>{var d,m;null!=r&&r.Succeeded?(t.user=null!==(d=r.Data)&&void 0!==d?d:{},t.IsPackByPower="VIP"==(null===(m=t.user)||void 0===m?void 0:m.UserClassifyCode)):(0,v.cX)(t.toastController,{},r).then(u=>u.present()),o(r)}})}),t.QrCode?new Promise(o=>{(0,rn.j)({loadingController:t.loadingController,params:{QrCode:t.QrCode},callback:r=>{t.response=r,null!=r&&r.Succeeded?t.chargingConnector=r.Data:(0,v.cX)(t.toastController,{},r).then(d=>d.present()),o(r)}})}):null,new Promise(o=>{on({callback:r=>{var d,m,u,c,P,k,f,M,I,y;null!=r&&r.Succeeded&&(t.chargingPackageRange=r.Data,t.customElectricMin=Math.min(Math.floor(null!==(d=null===(m=t.walletVip)||void 0===m?void 0:m.WalletValue)&&void 0!==d?d:0),null!==(u=null===(c=t.chargingPackageRange)||void 0===c?void 0:c.MinPowerValue)&&void 0!==u?u:1),t.customElectricMax=Math.min(Math.floor(null!==(P=null===(k=t.walletVip)||void 0===k?void 0:k.WalletValue)&&void 0!==P?P:100),null!==(f=null===(M=t.chargingPackageRange)||void 0===M?void 0:M.MaxPowerValue)&&void 0!==f?f:100),t.customElectricStep=null!==(I=null===(y=t.chargingPackageRange)||void 0===y?void 0:y.Seek)&&void 0!==I?I:1,t.customElectricValue=(0,F.Rw)(.35*(t.customElectricMax-t.customElectricMin)/t.customElectricStep,1)*t.customElectricStep),o(r)}})})].filter(o=>o)).then(()=>{var o;(null===(o=t.chargingConnector)||void 0===o?void 0:o.VConnectorStatus)==nn.EF.DangRanh&&t.loadStepPackage()}).finally(()=>{null==e||e()}):window.location.replace(V._.CHARGER_CONNECT)})()}loadStepPackage(){var e=this;return(0,C.A)(function*(){var t;e.step="package",e.IsPackByPower?(0,tn.t)({callback:o=>{var r,d,m,u,c,P,k,f,M,I,y,j,N,L,U;null!=o&&o.Succeeded&&(e.walletVip=o.Data,e.customElectricMin=Math.min(Math.floor(null!==(r=null===(d=e.walletVip)||void 0===d?void 0:d.WalletValue)&&void 0!==r?r:0),null!==(m=null===(u=e.chargingPackageRange)||void 0===u?void 0:u.MinPowerValue)&&void 0!==m?m:1),e.customElectricMax=Math.min(Math.floor(null!==(c=null===(P=e.walletVip)||void 0===P?void 0:P.WalletValue)&&void 0!==c?c:100),null!==(k=null===(f=e.chargingPackageRange)||void 0===f?void 0:f.MaxPowerValue)&&void 0!==k?k:100),e.customElectricStep=null!==(M=null===(I=e.chargingPackageRange)||void 0===I?void 0:I.Seek)&&void 0!==M?M:1,e.customElectricValue=(0,F.Rw)(.35*(e.customElectricMax-e.customElectricMin)/e.customElectricStep,1)*e.customElectricStep,(null!==(y=null===(j=e.walletVip)||void 0===j?void 0:j.WalletValue)&&void 0!==y?y:0)>=1&&(e.customElectricValue=Math.floor(null!==(N=null===(L=e.walletVip)||void 0===L?void 0:L.WalletValue)&&void 0!==N?N:0),e.customElectricValue=Math.max(e.customElectricValue,e.customElectricMin),e.customElectricValue=Math.min(e.customElectricValue,e.customElectricMax),null===(U=e.applyCustomElectric())||void 0===U||U.then(O=>{O&&(e.chargingPackages=[O],e.ChargePackageId=O.ChargePackageId)}))),x({loadingController:e.loadingController,params:{PageNumber:1,PageSize:10},callback:O=>{var X,B;null!=O&&O.Succeeded?(e.paymentMethods=null!==(X=O.Data)&&void 0!==X?X:[],e.paymentMethods=e.paymentMethods.filter(T=>e.IsPackByPower&&"VIPWALLET"==T.PmCode||!e.IsPackByPower&&"VIPWALLET"!=T.PmCode),1==e.paymentMethods.filter(T=>T.IsSupport).length&&(e.PaymentMethodId=null===(B=e.paymentMethods.filter(T=>{var $,W,Y,z,J,H,K,Q;return"VWALLET"==T.PmCode&&(null!==($=null===(W=e.wallet)||void 0===W?void 0:W.WalletValue)&&void 0!==$?$:0)>=(null!==(Y=null===(z=e.chargingPackage)||void 0===z?void 0:z.RealValue)&&void 0!==Y?Y:0)||"VIPWALLET"==T.PmCode&&(null!==(J=null===(H=e.walletVip)||void 0===H?void 0:H.WalletValue)&&void 0!==J?J:0)>=(null!==(K=null===(Q=e.chargingPackage)||void 0===Q?void 0:Q.PowerValue)&&void 0!==K?K:0)}).find(T=>T.IsSupport))||void 0===B?void 0:B.PaymentMethodId)):(0,v.cX)(e.toastController,{},O).then(T=>T.present())}})}}):an({loadingController:e.loadingController,params:{ChargeConnectorId:null===(t=e.chargingConnector)||void 0===t?void 0:t.ChargeConnectorId,IsPackByPower:e.IsPackByPower,PageNumber:1,PageSize:10},callback:o=>{var r;null!=o&&o.Succeeded?e.chargingPackages=null!==(r=o.Data)&&void 0!==r?r:[]:(0,v.cX)(e.toastController,{},o).then(d=>d.present())}})})()}loadStepPayment(){var e=this;return(0,C.A)(function*(){var t;if(e.ChargePackageId)return e.step="payment",e.ChargePackageId&&A({loadingController:e.loadingController,params:{PromoteCode:e.PromoteCodeApply,ChargePackageId:e.ChargePackageId,ChargeConnectorId:null===(t=e.chargingConnector)||void 0===t?void 0:t.ChargeConnectorId},callback:o=>{null!=o&&o.Succeeded?e.chargingPackage=o.Data:(0,v.cX)(e.toastController,{},o).then(r=>r.present())}}),new Promise(o=>{x({loadingController:e.loadingController,params:{PageNumber:1,PageSize:10},callback:r=>{var d,m;null!=r&&r.Succeeded?(e.paymentMethods=null!==(d=r.Data)&&void 0!==d?d:[],e.paymentMethods=e.paymentMethods.filter(u=>e.IsPackByPower&&"VIPWALLET"==u.PmCode||!e.IsPackByPower&&"VIPWALLET"!=u.PmCode),1==e.paymentMethods.filter(u=>u.IsSupport).length&&(e.PaymentMethodId=null===(m=e.paymentMethods.filter(u=>{var c,P,k,f,M,I,y,j;return"VWALLET"==u.PmCode&&(null!==(c=null===(P=e.wallet)||void 0===P?void 0:P.WalletValue)&&void 0!==c?c:0)>=(null!==(k=null===(f=e.chargingPackage)||void 0===f?void 0:f.RealValue)&&void 0!==k?k:0)||"VIPWALLET"==u.PmCode&&(null!==(M=null===(I=e.walletVip)||void 0===I?void 0:I.WalletValue)&&void 0!==M?M:0)>=(null!==(y=null===(j=e.chargingPackage)||void 0===j?void 0:j.PowerValue)&&void 0!==y?y:0)}).find(u=>u.IsSupport))||void 0===m?void 0:m.PaymentMethodId),o(r)):(0,v.cX)(e.toastController,{},r).then(u=>u.present())}})}).then(o=>{let r=[];return e.paymentMethods.find(d=>"VWALLET"==d.PmCode)&&r.push(new Promise(d=>{(0,cn.fL)({callback:m=>{null!=m&&m.Succeeded&&(e.wallet=m.Data),d(m)}})})),e.paymentMethods.find(d=>"VIPWALLET"==d.PmCode)&&r.push(new Promise(d=>{(0,tn.t)({callback:m=>{var u,c;null!=m&&m.Succeeded&&(e.walletVip=m.Data,(null!==(u=null===(c=e.walletVip)||void 0===c?void 0:c.WalletValue)&&void 0!==u?u:0)<1&&e.changeIsPackByPower(null,!1)),d(m)}})})),Promise.all(r)});(0,v.cX)(e.toastController,{message:"Vui l\xf2ng ch\u1ecdn g\xf3i s\u1ea1c!",color:"warning"}).then(o=>o.present())})()}changePromoteCode(e){var t=this;return(0,C.A)(function*(){var o;t.PromoteCode=null==e||null===(o=e.target)||void 0===o||null===(o=o.value)||void 0===o?void 0:o.replace(/[^a-zA-Z0-9]/g,"")})()}keyupPromoteCode(e){var t=this;return(0,C.A)(function*(){13!=e.keyCode||t.submitPromoteCode(e)})()}submitPromoteCode(e){var t=this;return(0,C.A)(function*(){var o;t.ChargePackageId&&t.PromoteCode&&A({loadingController:t.loadingController,params:{PromoteCode:t.PromoteCode,ChargePackageId:t.ChargePackageId,ChargeConnectorId:null===(o=t.chargingConnector)||void 0===o?void 0:o.ChargeConnectorId},callback:r=>{var d,m;null!=r&&r.Succeeded?(t.PromoteCode&&null!==(d=r.Data)&&void 0!==d&&d.PromoteValue&&(t.chargingPackage=r.Data,t.PromoteCodeApply=t.PromoteCode),null!==(m=r.Data)&&void 0!==m&&m.PromoteMsg&&(0,v.cX)(t.toastController,{message:r.Data.PromoteMsg,color:"warning"}).then(u=>u.present())):(0,v.cX)(t.toastController,{},r).then(u=>u.present())}})})()}removePromoteCode(e){var t=this;return(0,C.A)(function*(){var o;t.PromoteCode=void 0,t.PromoteCodeApply=void 0,t.ChargePackageId&&A({loadingController:t.loadingController,params:{ChargePackageId:t.ChargePackageId,ChargeConnectorId:null===(o=t.chargingConnector)||void 0===o?void 0:o.ChargeConnectorId},callback:r=>{null!=r&&r.Succeeded?t.chargingPackage=r.Data:(0,v.cX)(t.toastController,{},r).then(d=>d.present())}})})()}backPackage(e){var t=this;return(0,C.A)(function*(){t.ChargePackageId=void 0,t.loadStepPackage()})()}submitPackage(e){var t=this;return(0,C.A)(function*(){t.loadStepPayment().then(o=>{t.IsPackByPower&&t.goPayment(e)})})()}goPayment(e){var t=this;return(0,C.A)(function*(){if(!t.isPaying&&t.ChargePackageId){var o,r,d;t.isPaying=!0;var m=t.platform.platforms(),u=m.includes("desktop")?"pc":m.includes("mobileweb")?"mweb":"app";(0,q.jF)({loadingController:t.loadingController,params:{StationCode:null===(o=t.chargingStation)||void 0===o?void 0:o.StationCode,ConnectorId:null===(r=t.chargingConnector)||void 0===r?void 0:r.ConnectorId,ChargePackageId:t.ChargePackageId,PromoteCode:t.PromoteCodeApply,PmCode:null===(d=t.paymentMethods.find(c=>c.PaymentMethodId==t.PaymentMethodId))||void 0===d?void 0:d.PmCode,PlatformType:u},callback:c=>{var P,k,f,M;null!=c&&c.Succeeded?(null!==(P=c.Data)&&void 0!==P&&P.OrderId&&t.router.navigateByUrl(V._.ORDER_INFO_DETAIL.replace(":id",c.Data.OrderId.toString()),{replaceUrl:!0}),t.AppLauncherResponsePAY(c.Data,m)):((0,v.cX)(t.toastController,{},c).then(I=>I.present()),t.isPaying=!1,null!=c&&null!==(k=c.Data)&&void 0!==k&&k.IsHasPayingOrder&&(0,v.Yy)(t.modalController,t.animationController,{selectedId:null==c||null===(f=c.Data)||void 0===f||null===(f=f.PayingOrder)||void 0===f?void 0:f.OrderId,message:{TitleConfirm:null!==(M=null==c?void 0:c.Message)&&void 0!==M?M:"CancelOrder",TextConfirm:"ConfirmCancelOrder"},fnConfirm:I=>{(0,q.rZ)({loadingController:t.loadingController,params:{OrderId:I},callback:y=>{null!=y&&y.Succeeded?t.goPayment(e):(0,v.cX)(t.toastController,{},y).then(j=>j.present())}})}}))}})}})()}AppLauncherResponsePAY(e,t){var o=this;return(0,C.A)(function*(){var r=function(){var u=(0,C.A)(function*(c){c.match(en.c.match_web_url)?o.router.navigateByUrl(c.replace(new RegExp(en.c.match_web_url),"/"),{replaceUrl:!0}):t.includes("mobileweb")||t.includes("mobile")?yield p.P.open({url:c}):window.location.replace(c)});return function(P){return u.apply(this,arguments)}}(),d=function(){var u=(0,C.A)(function*(c){var P;t.includes("mobileweb")?yield p.P.open({url:c}):t.includes("mobile")?((P=p.P).addListener("browserFinished",()=>{window.location.reload()}),P.open({url:c})):window.location.replace(c)});return function(P){return u.apply(this,arguments)}}(),m=function(){var u=(0,C.A)(function*(c,P){if(t.includes("mobileweb"))yield p.P.open({url:c});else if(t.includes("mobile")){var k=null==c?void 0:c.split("://").shift();k&&h.openUrl({url:c}).then(f=>{f.completed||((0,v.cX)(o.toastController,{message:`Kh\xf4ng t\xecm th\u1ea5y \u1ee9ng d\u1ee5ng [${k}]`,color:"warning"}).then(M=>M.present()),P&&d(P))})}else window.location.replace(c)});return function(P,k){return u.apply(this,arguments)}}();e.ReturnOrderUrl?r(e.ReturnOrderUrl):e.UseUrlAppFirst?e.RedirectUrlApp?m(e.RedirectUrlApp,e.RedirectUrlHttp):e.RedirectUrlHttp&&d(e.RedirectUrlHttp):e.RedirectUrlHttp?d(e.RedirectUrlHttp):e.RedirectUrlApp?m(e.RedirectUrlApp,e.RedirectUrlHttp):(0,v.cX)(o.toastController,{message:"Kh\xf4ng t\xecm th\u1ea5y li\xean k\u1ebft thanh to\xe1n!",color:"danger"}).then(u=>u.present())})()}choicePackage(e,t){var o=this;return(0,C.A)(function*(){o.ChargePackageId=t})()}changeIsPackByPower(e,t){var o=this;return(0,C.A)(function*(){o.IsPackByPower=null!=t?t:e.detail.value,o.loadStepPackage()})()}filterChargePackage(){return this.chargingPackages.filter(e=>e.IsPackByPower==this.IsPackByPower)}changeChargePackage(e){var t=this;return(0,C.A)(function*(){t.ChargePackageId=e.detail.value})()}changePaymentMethod(e){var t=this;return(0,C.A)(function*(){t.PaymentMethodId=e.detail.value})()}changeCustomElectricValue(e){var t,o;let r=null!==(t=null==e||null===(o=e.detail)||void 0===o?void 0:o.value)&&void 0!==t?t:0;r=(0,F.Rw)(r/this.customElectricStep,1)*this.customElectricStep,r<this.customElectricMin?r=this.customElectricMin:r>this.customElectricMax&&(r=this.customElectricMax),this.customElectricValue=r}applyCustomElectric(e,t,o){if(this.customElectricValue)return this.ChargePackageId=void 0,new Promise((r,d)=>{var m;ln({params:{PowerValue:this.customElectricValue,ChargeConnectorId:null===(m=this.chargingConnector)||void 0===m?void 0:m.ChargeConnectorId},callback:u=>{null!=u&&u.Succeeded?(this.customChargingPackage=u.Data,null==t||t.dismiss(),null==o||o.present(),r(this.customChargingPackage)):((0,v.cX)(this.toastController,{},u).then(c=>c.present()),d())}})})}submitCustomPackage(e,t){var o;null==t||t.dismiss(),null!==(o=this.customChargingPackage)&&void 0!==o&&o.ChargePackageId&&(this.ChargePackageId=this.customChargingPackage.ChargePackageId,this.loadStepPayment())}autoSubmitCustomElectric(e,t){var o;null===(o=this.applyCustomElectric(e,t))||void 0===o||o.then(r=>{this.submitCustomPackage(e)})}}return(l=i).\u0275fac=function(e){return new(e||l)(n.rXU(S.Ix),n.rXU(dn.OD),n.rXU(S.nX),n.rXU(s.W3),n.rXU(s.Xi),n.rXU(s.K_),n.rXU(s.Hx))},l.\u0275cmp=n.VBU({type:l,selectors:[["app-charging-connector-detail"]],decls:7,vars:2,consts:[["templatePackage",""],["templatePayment",""],["modalCustomChargingPackage",""],["modalCustomChargingPackageConfirm",""],["rangeElectric",""],[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchDefault"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],[3,"ngTemplateOutlet"],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],[1,"container","p-0"],[1,"card-station","rounded","bg-primary","text-white"],[1,"d-flex","align-items-center"],["onError","this.src='assets/image/default/ev-station.png'",3,"src"],[1,"pl-3"],[1,"d-flex","align-items-center","my-0"],["color","light","src","../../../assets/icon/ion-icon/changing-station.svg"],[1,"ml-2"],[1,"card-connector","rounded","bg-white"],[1,"mb-2"],[1,"d-flex","align-items-center","bg-secondary","rounded","p-3"],["src","../../../assets/icon/ion-img/changing-connector.svg"],[4,"ngIf"],[1,"ion-modal-small"],[1,"card-package","bg-white"],[1,"mb-3","d-flex","flex-wrap","align-items-center","justify-content-between","gap-2"],[1,"flex-grow-1","d-flex","align-items-center","justify-content-between","gap-2"],[1,"package-list"],[1,"mt-3"],[3,"value","ionChange",4,"ngIf"],[1,"card-payment-method","rounded","bg-white","mt-3"],["mode","ios","scrollable","true","color","primary",3,"ionChange","value"],[3,"value"],["size","small","shape","round",3,"click",4,"ngIf"],["size","small","shape","round",3,"click"],["slot","end","name","add-outline"],[3,"ionChange","value"],[4,"ngFor","ngForOf"],[1,"package-item"],["lines","none","detail","false","button","","mode","ios"],["mode","md","justify","space-between",3,"disabled","value"],["src","../../../assets/icon/ion-img/charge-package.svg"],[1,"data-list"],[1,"data-item"],["mode","md","justify","space-between",3,"value","disabled"],[3,"src"],[1,"mt-1"],["color","primary",1,"fs-14","fw-600"],[1,"container","pt-4","container-custom-package"],[1,"text-left"],[1,"mb-4","text-primary"],[1,"d-flex","align-items-stretch","border","border-primary","rounded"],[1,"flex-grow-1"],["lines","none","shape","round"],["type","number","inputmode","decimal",3,"ionChange","ngModel","min","max","placeholder"],[1,"border-left","border-primary","text-primary","px-3","d-flex","align-items-center"],[3,"ionChange","ngModel","min","max","step","pin"],[1,"d-flex","justify-content-between","text-muted"],[1,"py-3","mt-3"],["color","primary","shape","round","expand","block",3,"click"],[1,"d-flex","align-items-stretch","border","rounded"],[1,"flex-grow-1","px-3","py-2","d-flex","align-items-center"],[1,"text-muted"],[1,"border-left","border-primary","text-primary","d-flex","align-items-center"],["color","primary","expand","full",1,"h-100",3,"click"],[1,"d-flex","justify-content-between","py-1"],[1,"text-primary"],[1,"container","py-3"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["color","primary","expand","block","shape","round",3,"click"],["color","warning","expand","block","shape","round"],["color","tertiary","expand","block","shape","round"],["color","danger","expand","block","shape","round"],[3,"click"],["slot","start","name","chevron-back-outline"],[1,"card-bill-info","rounded","bg-white"],[1,"d-flex","align-items-center","my-0","text-primary"],["src","../../../assets/icon/ion-icon/changing-station.svg"],[1,"border-dashed"],["class","card-bill-info rounded bg-white",4,"ngIf"],[1,"card-promote","rounded","bg-white","mt-3"],[1,"table","table-borderless","m-0"],["class","border-top",4,"ngIf"],[1,"border-top"],[1,"input-group","input-group-lg","mb-3"],["type","text",1,"form-control","rounded",3,"change","keyup","ngModel","placeholder"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","rounded",3,"click"],["color","primary"],["name","close-outline",3,"click"]],template:function(e,t){1&e&&(n.qex(0,5),n.DNE(1,mn,1,1,"ng-container",6)(2,sn,1,1,"ng-container",7),n.bVm(),n.DNE(3,On,48,18,"ng-template",null,0,n.C5r)(5,Jn,49,30,"ng-template",null,1,n.C5r)),2&e&&(n.Y8G("ngSwitch",t.step),n.R7$(2),n.Y8G("ngSwitchCase","payment"))},dependencies:[R.Sq,R.bT,R.T3,R.ux,R.e1,R.fG,E.me,E.BC,E.vS,s.Jm,s.QW,s.ZB,s.W9,s.M0,s.eU,s.iq,s.KW,s.$w,s.uz,s.he,s.KO,s.f0,s.Ob,s.To,s.Ki,s.Gp,s.eP,s.IO,s.Zx,s.BC,s.ai,s.Sb,s.su,s.Je,s.el,s.T6,s.jL,un.D9],styles:['.table[_ngcontent-%COMP%]{table-layout:fixed}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;vertical-align:top}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40%;padding-left:0;padding-right:.5rem;font-size:.875rem;color:var(--ion-color-medium-shade)}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child   b[_ngcontent-%COMP%]{color:var(--ion-color-dark)}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;text-align:right}.card-station[_ngcontent-%COMP%]{padding:1rem 1rem 2.5rem}.card-station.rounded[_ngcontent-%COMP%]{border-top-left-radius:1.5rem!important;border-top-right-radius:1.5rem!important}.card-station[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 5rem;--border-radius: .5rem;border:1px solid var(--ion-color-light)}.card-connector[_ngcontent-%COMP%]{padding:1rem;margin-top:-1.5rem}.card-connector.rounded[_ngcontent-%COMP%]{border-top-left-radius:1.5rem!important;border-top-right-radius:1.5rem!important}.card-connector[_ngcontent-%COMP%]   .rounded[_ngcontent-%COMP%]{border-radius:1rem!important}.card-connector[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:2rem}.card-connector[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 2.5rem;--border-radius: .25rem}.card-package[_ngcontent-%COMP%]{padding:1rem}.card-package[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:3rem}.card-package[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 3rem;--border-radius: .5rem}.card-package[_ngcontent-%COMP%]   .package-list[_ngcontent-%COMP%]   .package-item[_ngcontent-%COMP%]{border-radius:.75rem;margin-bottom:1rem;box-shadow:0 0 12px 4px #0101011a}.card-package[_ngcontent-%COMP%]   .package-list[_ngcontent-%COMP%]   .package-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-radius: .75rem}.card-bill-info[_ngcontent-%COMP%]{padding:1rem}.card-bill-info.rounded[_ngcontent-%COMP%]{border-radius:1rem!important}.card-bill-info[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 5rem;--border-radius: .5rem;border:1px solid var(--ion-color-light)}.card-bill-info[_ngcontent-%COMP%] + hr[_ngcontent-%COMP%]{margin:0;position:relative;z-index:1}.card-bill-info[_ngcontent-%COMP%] + hr[_ngcontent-%COMP%]:before, .card-bill-info[_ngcontent-%COMP%] + hr[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;z-index:2;bottom:0;margin-bottom:-1rem;width:2rem;height:2rem;border-radius:50%;background-color:var(--ion-background-color-primary)}.card-bill-info[_ngcontent-%COMP%] + hr[_ngcontent-%COMP%]:before{left:-1rem}.card-bill-info[_ngcontent-%COMP%] + hr[_ngcontent-%COMP%]:after{right:-1rem}.card-promote[_ngcontent-%COMP%]{padding:1rem}.card-promote.rounded[_ngcontent-%COMP%], .card-promote[_ngcontent-%COMP%]   .rounded[_ngcontent-%COMP%]{border-radius:.75rem!important}.card-promote[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem;border-color:var(--ion-color-gray);border-top-right-radius:0!important;border-bottom-right-radius:0!important}.card-promote[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1rem;border-color:var(--ion-color-primary);border-top-left-radius:0!important;border-bottom-left-radius:0!important}.card-promote[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{margin:0;background:var(--ion-color-primary);color:var(--ion-color-light)}.card-payment-method[_ngcontent-%COMP%]{padding:1rem}.card-payment-method.rounded[_ngcontent-%COMP%]{border-radius:.75rem!important}.card-payment-method[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 3rem;--border-radius: .5rem}.card-payment-method[_ngcontent-%COMP%]   .data-list[_ngcontent-%COMP%]   .data-item[_ngcontent-%COMP%]{border-radius:.75rem;margin-bottom:1rem;border:1px solid var(--ion-color-gray)}.card-payment-method[_ngcontent-%COMP%]   .data-list[_ngcontent-%COMP%]   .data-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-radius: .75rem}.payment-methods[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:.5rem 0}.payment-methods[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:.25rem;overflow:hidden}.input-group-voucher[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:.75rem}.input-group-voucher[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.75rem}.container-custom-package[_ngcontent-%COMP%]   .rounded[_ngcontent-%COMP%]{border-radius:.5rem!important;overflow:hidden}.container-custom-package[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-radius: .5rem}.container-custom-package[_ngcontent-%COMP%]   ion-range[_ngcontent-%COMP%]{--bar-background: var(--ion-color-medium-tint);--bar-background-active: var(--ion-color-primary);--bar-height: .25rem;--bar-border-radius: .5rem;--knob-background: var(--ion-color-primary);--knob-size: 1.25rem;--pin-background: var(--ion-color-primary);--pin-color: var(--ion-color-primary-contrast)}.container-custom-package[_ngcontent-%COMP%]   ion-range[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{margin-top:-.5rem}.container-custom-package[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--box-shadow: none}']}),i})()}];let Kn=(()=>{var l;class i{}return(l=i).\u0275fac=function(e){return new(e||l)},l.\u0275mod=n.$C({type:l}),l.\u0275inj=n.G2t({imports:[S.iI.forChild(Hn),S.iI]}),i})();var Qn=_(3890);let Zn=(()=>{var l;class i{}return(l=i).\u0275fac=function(e){return new(e||l)},l.\u0275mod=n.$C({type:l}),l.\u0275inj=n.G2t({imports:[R.MD,E.YN,s.bv,Kn,Qn.x]}),i})()}}]);