"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1224],{1889:(_,u,r)=>{r.d(u,{Wi:()=>p,__:()=>f});var f=function(c){return c.Documents="DOCUMENTS",c.Data="DATA",c.Library="LIBRARY",c.Cache="CACHE",c.External="EXTERNAL",c.ExternalStorage="EXTERNAL_STORAGE",c}(f||{}),p=function(c){return c.UTF8="utf8",c.ASCII="ascii",c.UTF16="utf16",c}(p||{})},2739:(_,u,r)=>{r.d(u,{YA:()=>d,__:()=>p.__});var f=r(5083),p=r(1889);const d=(0,f.F3)("Filesystem",{web:()=>r.e(2937).then(r.bind(r,2937)).then(g=>new g.FilesystemWeb)})},2233:(_,u,r)=>{r.d(u,{S:()=>p});const p=(0,r(5083).F3)("Share",{web:()=>r.e(1227).then(r.bind(r,1227)).then(d=>new d.ShareWeb)})},4682:(_,u,r)=>{r.r(u),r.d(u,{BillInfoDetailPageModule:()=>J});var f=r(177),p=r(9417),d=r(3092),g=r(7625),c=r(467),F=r(7392),I=r(5083);class R extends I.E_{write(a){var n=this;return(0,c.A)(function*(){if(typeof navigator>"u"||!navigator.clipboard)throw n.unavailable("Clipboard API not available in this browser");if(void 0!==a.string)yield n.writeText(a.string);else if(a.url)yield n.writeText(a.url);else{if(!a.image)throw new Error("Nothing to write");if(!(typeof ClipboardItem<"u"))throw n.unavailable("Writing images to the clipboard is not supported in this browser");try{const e=yield(yield fetch(a.image)).blob(),i=new ClipboardItem({[e.type]:e});yield navigator.clipboard.write([i])}catch{throw new Error("Failed to write image")}}})()}read(){var a=this;return(0,c.A)(function*(){if(typeof navigator>"u"||!navigator.clipboard)throw a.unavailable("Clipboard API not available in this browser");if(!(typeof ClipboardItem<"u"))return a.readText();try{const n=yield navigator.clipboard.read(),e=n[0].types[0],i=yield n[0].getType(e);return{value:yield a._getBlobData(i,e),type:e}}catch{return a.readText()}})()}readText(){var a=this;return(0,c.A)(function*(){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.readText)throw a.unavailable("Reading from clipboard not supported in this browser");return{value:yield navigator.clipboard.readText(),type:"text/plain"}})()}writeText(a){var n=this;return(0,c.A)(function*(){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.writeText)throw n.unavailable("Writting to clipboard not supported in this browser");yield navigator.clipboard.writeText(a)})()}_getBlobData(a,n){return new Promise((e,i)=>{const l=new FileReader;n.includes("image")?l.readAsDataURL(a):l.readAsText(a),l.onloadend=()=>{e(l.result)},l.onerror=s=>{i(s)}})}}const M=(0,I.F3)("Clipboard",{web:()=>new R});var D=r(6116),T=r(6539),h=r(8517),v=r(8650),P=r(3588),E=r(8833),y=r(6256),t=r(4438),x=r(4842);const B=()=>["android","ios"],k=()=>[];function O(o,a){if(1&o){const n=t.RV6();t.j41(0,"ion-buttons",11),t.bIt("click",function(i){t.eBV(n);const l=t.XpG();return t.Njj(l.shareBill(i))}),t.j41(1,"ion-chip",12)(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.nrm(5,"ion-icon",13),t.k0s()()}2&o&&(t.R7$(3),t.JRh(t.bMT(4,1,"Share")))}function j(o,a){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const n=t.XpG(3);t.R7$(),t.SpI(" ",n.APP_FUNC_FormatDate(n.billInfo.ModifiedDate)," ")}}function A(o,a){if(1&o){const n=t.RV6();t.j41(0,"span",22),t.bIt("click",function(i){t.eBV(n);const l=t.XpG(3);return t.Njj(l.openLookupLink(i))}),t.j41(1,"i",23),t.EFF(2),t.k0s()()}if(2&o){const n=t.XpG(3);t.R7$(2),t.JRh(n.billInfo.LookupLink)}}function $(o,a){if(1&o){const n=t.RV6();t.j41(0,"span",22),t.bIt("click",function(i){t.eBV(n);const l=t.XpG(3);return t.Njj(l.copyLookupCode(i))}),t.j41(1,"b"),t.EFF(2),t.k0s()()}if(2&o){const n=t.XpG(3);t.R7$(2),t.JRh(n.billInfo.LookupCode)}}function w(o,a){if(1&o&&(t.j41(0,"table",20)(1,"tr")(2,"td"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"td")(6,"b"),t.EFF(7),t.k0s()()(),t.j41(8,"tr")(9,"td"),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.j41(12,"td"),t.DNE(13,j,2,1,"span",4),t.k0s()(),t.j41(14,"tr")(15,"td"),t.EFF(16),t.nI1(17,"translate"),t.k0s(),t.j41(18,"td"),t.DNE(19,A,3,1,"span",21),t.k0s()(),t.j41(20,"tr")(21,"td"),t.EFF(22),t.nI1(23,"translate"),t.k0s(),t.j41(24,"td"),t.DNE(25,$,3,1,"span",21),t.k0s()()()),2&o){const n=t.XpG(2);t.R7$(3),t.JRh(t.bMT(4,8,"BillCode")),t.R7$(4),t.JRh(n.billInfo.EinvoiceNumber),t.R7$(3),t.JRh(t.bMT(11,10,"CreatedDate")),t.R7$(3),t.Y8G("ngIf",n.billInfo.ModifiedDate),t.R7$(3),t.JRh(t.bMT(17,12,"LookupLink")),t.R7$(3),t.Y8G("ngIf",n.billInfo.LookupLink),t.R7$(3),t.JRh(t.bMT(23,14,"LookupCode")),t.R7$(3),t.Y8G("ngIf",n.billInfo.LookupCode)}}function L(o,a){if(1&o&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&o){const n=t.XpG().$implicit,e=t.XpG(3);t.Y8G("rowSpan",e.count_VElectricPriceTimeframe(n.VElectricPriceTimeframe)),t.R7$(),t.SpI(" ",n.VElectricPriceTimeframeName," ")}}function U(o,a){if(1&o&&(t.qex(0),t.j41(1,"tr"),t.DNE(2,L,2,2,"td",31),t.j41(3,"td",32)(4,"small"),t.EFF(5),t.k0s()(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td"),t.EFF(11),t.k0s()(),t.bVm()),2&o){let n,e,i;const l=a.$implicit,s=t.XpG(3);t.R7$(2),t.vxM(2,s.currentcheck_VElectricPriceTimeframe!=l.VElectricPriceTimeframe?2:-1),t.R7$(3),t.JRh(l.ProductName),t.R7$(2),t.SpI(" ",s.APP_FUNC_FormatMoney(null!==(n=l.AftertaxUnitPrice)&&void 0!==n?n:0)," "),t.R7$(2),t.JRh(s.APP_FUNC_RoundNumber(null!==(e=l.Quantity)&&void 0!==e?e:0,100)),t.R7$(2),t.JRh(s.APP_FUNC_FormatMoney(null!==(i=l.AftertaxValue)&&void 0!==i?i:0))}}function N(o,a){if(1&o&&(t.j41(0,"table",24)(1,"colgroup"),t.nrm(2,"col",25)(3,"col",26)(4,"col",27)(5,"col",27)(6,"col",27),t.k0s(),t.j41(7,"thead")(8,"tr"),t.nrm(9,"th"),t.j41(10,"th",28),t.EFF(11),t.nI1(12,"translate"),t.k0s(),t.j41(13,"th"),t.EFF(14),t.nI1(15,"translate"),t.k0s(),t.j41(16,"th"),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.j41(19,"th"),t.EFF(20),t.nI1(21,"translate"),t.nrm(22,"br"),t.j41(23,"span",29),t.EFF(24),t.nI1(25,"translate"),t.k0s()()()(),t.j41(26,"tbody"),t.DNE(27,U,12,5,"ng-container",30),t.j41(28,"tr")(29,"td")(30,"b"),t.EFF(31),t.nI1(32,"translate"),t.k0s()(),t.nrm(33,"td")(34,"td")(35,"td"),t.j41(36,"td")(37,"b"),t.EFF(38),t.k0s()()()()()),2&o){let n;const e=t.XpG(2);t.R7$(11),t.JRh(t.bMT(12,8,"ProductName")),t.R7$(3),t.JRh(t.bMT(15,10,"Price")),t.R7$(3),t.JRh(t.bMT(18,12,"Quantity")),t.R7$(3),t.SpI(" ",t.bMT(21,14,"IntoMoney")," "),t.R7$(4),t.SpI(" ",t.bMT(25,16,"IncludedVAT")," "),t.R7$(3),t.Y8G("ngForOf",null!==(n=null==e.billInfo?null:e.billInfo.DetailBillDetails)&&void 0!==n?n:t.lJ4(20,k)),t.R7$(4),t.JRh(t.bMT(32,18,"Total")),t.R7$(7),t.SpI(" ",e.APP_FUNC_FormatMoney(e.billInfo.AftertaxBillValue),"\u0111 ")}}function G(o,a){if(1&o&&(t.qex(0),t.j41(1,"div",14)(2,"div",15)(3,"div",16),t.DNE(4,w,26,16,"table",17),t.j41(5,"div",18),t.DNE(6,N,39,21,"table",19),t.k0s()()()(),t.bVm()),2&o){const n=t.XpG();t.R7$(4),t.Y8G("ngIf",n.billInfo),t.R7$(2),t.Y8G("ngIf",n.billInfo)}}const S=[{path:"",component:(()=>{var o;class a{constructor(e,i,l,s,m){var b;this.router=e,this.loadingController=l,this.toastController=s,this.modalController=m,this.platform=I.Ii.getPlatform(),this.APP_ROUTE=E._,this.APP_FUNC_FormatMoney=h.xi,this.APP_FUNC_FormatDate=h.Rv,this.APP_FUNC_RoundNumber=h.Rw,this.v_einvoice_status=P.XM,this.v_sale_type=P.aD;let C=null!==(b=i.snapshot.params.id)&&void 0!==b?b:"";C&&(this.BillId=parseFloat(C))}ngOnInit(){var e=this;(0,c.A)(function*(){(yield(0,T.kU)())&&e.refreshData()})()}onIonRefresher(e){this.refreshData(()=>{e.target.complete()})}refreshData(e){var i=this;return(0,c.A)(function*(){i.BillId&&(0,D.q)({loadingController:i.loadingController,params:{BillId:i.BillId},callback:l=>{i.response=l,null!=l&&l.Succeeded?i.billInfo=l.Data:(0,v.cX)(i.toastController,{},l).then(s=>s.present()),e&&e()}})})()}fillterBillDetails(e){var i;return null!==(i=this.billInfo)&&void 0!==i&&i.DetailBillDetails?this.billInfo.DetailBillDetails.filter(l=>l.VSaleType==e):[]}navigateByUrl(e){this.router.navigateByUrl(e)}openLookupLink(e){var i=this;return(0,c.A)(function*(){var l,s,m,b;null!==(l=i.billInfo)&&void 0!==l&&l.LookupLink&&null!==(s=i.billInfo)&&void 0!==s&&s.LookupCode&&F.P.open({url:`${null===(m=i.billInfo)||void 0===m?void 0:m.LookupLink}?strFkey=${null===(b=i.billInfo)||void 0===b?void 0:b.LookupCode}`})})()}copyLookupCode(e){var i=this;return(0,c.A)(function*(){var l;null!==(l=i.billInfo)&&void 0!==l&&l.LookupCode&&(yield M.write({string:i.billInfo.LookupCode}),(0,v.cX)(i.toastController,{color:"success",message:"\u0110\xe3 ch\xe9p v\xe0o b\u1ed9 nh\u1edb t\u1ea1m!"}).then(s=>s.present()))})()}shareBill(e){var i=this;return(0,c.A)(function*(){(0,h.HU)(document.getElementById("billShare")).then(l=>{var s;l&&(0,y.C)(l,`${null===(s=i.billInfo)||void 0===s?void 0:s.BillCode}.png`)})})()}count_VElectricPriceTimeframe(e){var i,l;return this.currentcheck_VElectricPriceTimeframe=e,null!==(i=null===(l=this.billInfo)||void 0===l||null===(l=l.DetailBillDetails)||void 0===l?void 0:l.filter(s=>s.VElectricPriceTimeframe==e).length)&&void 0!==i?i:1}}return(o=a).\u0275fac=function(e){return new(e||o)(t.rXU(g.Ix),t.rXU(g.nX),t.rXU(d.Xi),t.rXU(d.K_),t.rXU(d.W3))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-bill-info-detail"]],decls:23,vars:10,consts:[["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","end","class","ion-no-margin",3,"click",4,"ngIf"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],[1,"container","py-3"],[1,"d-flex","align-items-center"],[1,"pr-3"],["color","primary",3,"click"],["name","home-outline",1,"fs-24"],[1,"flex-grow-1"],["slot","end",1,"ion-no-margin",3,"click"],["color","primary",1,"no-opacity"],["src","../../../assets/icon/ion-icon/share.svg"],[1,"container","px-0","mb-4"],["id","billShare"],[1,"card-bill-info","rounded","bg-white"],["class","table table-borderless table-bill m-0",4,"ngIf"],[1,"overflow-auto"],["class","table table-bill-detail mt-3 mb-0",4,"ngIf"],[1,"table","table-borderless","table-bill","m-0"],["class","cursor-pointer",3,"click",4,"ngIf"],[1,"cursor-pointer",3,"click"],[1,"text-tertiary"],[1,"table","table-bill-detail","mt-3","mb-0"],["width","60px",2,"min-width","60px"],["width","auto",2,"min-width","100px"],["width","80px",2,"min-width","80px"],[1,"text-left"],[1,"fw-400"],[4,"ngFor","ngForOf"],[1,"text-medium","text-left","fs-12",3,"rowSpan"],[1,"text-medium","text-left","fs-12"]],template:function(e,i){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t.nrm(3,"ion-back-button",1),t.k0s(),t.j41(4,"ion-title"),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.DNE(7,O,6,3,"ion-buttons",2),t.k0s()(),t.j41(8,"ion-content")(9,"ion-refresher",3),t.bIt("ionRefresh",function(s){return i.onIonRefresher(s)}),t.nrm(10,"ion-refresher-content"),t.k0s(),t.DNE(11,G,7,2,"ng-container",4),t.k0s(),t.j41(12,"ion-footer")(13,"ion-toolbar")(14,"div",5)(15,"div",6)(16,"div",7)(17,"ion-chip",8),t.bIt("click",function(){return i.navigateByUrl(i.APP_ROUTE.DEFAULT)}),t.nrm(18,"ion-icon",9),t.j41(19,"ion-label"),t.EFF(20),t.nI1(21,"translate"),t.k0s()()(),t.nrm(22,"div",10),t.k0s()()()()),2&e&&(t.R7$(3),t.Y8G("defaultHref",i.APP_ROUTE.DEFAULT),t.R7$(2),t.JRh(t.bMT(6,5,"BillInfo")),t.R7$(2),t.Y8G("ngIf",t.lJ4(9,B).includes(i.platform)),t.R7$(4),t.Y8G("ngIf",null==i.response?null:i.response.Succeeded),t.R7$(9),t.JRh(t.bMT(21,7,"Home")))},dependencies:[f.Sq,f.bT,d.QW,d.ZB,d.W9,d.M0,d.eU,d.iq,d.he,d.To,d.Ki,d.BC,d.ai,d.el,x.D9],styles:[".card-bill-info[_ngcontent-%COMP%]{padding:.5rem}.card-bill-info.rounded[_ngcontent-%COMP%]{border-radius:1.5rem!important}.card-bill[_ngcontent-%COMP%]{padding:1rem}.card-bill.rounded[_ngcontent-%COMP%]{border-radius:1.5rem!important}.table-bill[_ngcontent-%COMP%]{table-layout:fixed}.table-bill[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;vertical-align:top}.table-bill[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40%;padding-left:0;padding-right:.5rem;font-size:.875rem;color:var(--ion-color-medium-shade)}.table-bill[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child   b[_ngcontent-%COMP%]{color:var(--ion-color-dark)}.table-bill[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;text-align:right;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.table-bill-detail[_ngcontent-%COMP%]{border-radius:.75rem;overflow:hidden;font-size:.875rem}.table-bill-detail[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);color:var(--ion-color-primary-contrast)}.table-bill-detail[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle;font-size:.75rem}.table-bill-detail[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{background-color:var(--ion-background-color-primary);color:var(--ion-text-color)}.table-bill-detail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-bill-detail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem;text-align:right}.table-bill-detail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child, .table-bill-detail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:0;padding-right:.5rem;text-align:right}.table-bill-detail[_ngcontent-%COMP%]   th[rowspan][_ngcontent-%COMP%], .table-bill-detail[_ngcontent-%COMP%]   td[rowspan][_ngcontent-%COMP%]{vertical-align:middle;text-align:center!important}"]}),a})()}];let X=(()=>{var o;class a{}return(o=a).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[g.iI.forChild(S),g.iI]}),a})();var V=r(3890);let J=(()=>{var o;class a{}return(o=a).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[f.MD,p.YN,d.bv,X,V.x]}),a})()}}]);