"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7578],{7578:(X,f,s)=>{s.r(f),s.d(f,{WalletHistoryPageModule:()=>A});var m=s(177),_=s(9417),r=s(3092),d=s(7625),u=s(467),v=s(5312),y=s(6037);const P=function(){var n=(0,u.A)(function*(o){var i,e,a,l,c;o.params=o.params||{},(0,y.hm)({url:"api/WalletHistory/get-myhistory",params:{IsIn:null!==(i=o.params.IsIn)&&void 0!==i?i:null,StartDate:null!==(e=o.params.StartDate)&&void 0!==e?e:null,EndDate:null!==(a=o.params.EndDate)&&void 0!==a?a:null,PageNumber:null!==(l=o.params.PageNumber)&&void 0!==l?l:1,PageSize:null!==(c=o.params.PageSize)&&void 0!==c?c:10},success:g=>{"function"==typeof o.callback&&o.callback(g.data||null)},error:g=>{var p;"function"==typeof o.callback&&o.callback(null==g||null===(p=g.response)||void 0===p?void 0:p.data),console.error(g)},loading:o.loading,loadingController:o.loadingController})});return function(i){return n.apply(this,arguments)}}();var C=s(6539),h=s(8517),R=s(8650),H=s(8833),t=s(4438),I=s(5032),W=s(4842);const $=n=>({$implicit:n});function F(n,o){if(1&n&&(t.qex(0),t.j41(1,"div",11),t.eu8(2,12),t.k0s(),t.bVm()),2&n){const i=o.$implicit;t.XpG(2);const e=t.sdS(28);t.R7$(2),t.Y8G("ngTemplateOutlet",e)("ngTemplateOutletContext",t.eq3(2,$,i))}}function M(n,o){if(1&n&&(t.j41(0,"div",7)(1,"div",9),t.DNE(2,F,3,4,"ng-container",10),t.k0s()()),2&n){const i=t.XpG();t.R7$(2),t.Y8G("ngForOf",i.walletHistorys)}}function b(n,o){1&n&&(t.j41(0,"div",13),t.nrm(1,"img",14),t.j41(2,"div",15),t.EFF(3),t.nI1(4,"translate"),t.k0s()()),2&n&&(t.R7$(3),t.JRh(t.bMT(4,1,"NoPaymentHistory")))}function T(n,o){if(1&n){const i=t.RV6();t.j41(0,"ion-infinite-scroll",16),t.bIt("ionInfinite",function(a){t.eBV(i);const l=t.XpG();return t.Njj(l.onIonInfinite(a))}),t.nrm(1,"ion-infinite-scroll-content"),t.k0s()}}function j(n,o){if(1&n&&t.nrm(0,"img",22),2&n){const i=t.XpG(2).$implicit;t.Mz_("src","../../../assets/icon/payment/",i.Paymethod.toLowerCase(),".jpeg",t.B4B)}}function x(n,o){1&n&&t.nrm(0,"img",23)}function D(n,o){if(1&n&&(t.j41(0,"b"),t.EFF(1),t.k0s(),t.j41(2,"ion-chip")(3,"ion-label",20),t.EFF(4),t.k0s(),t.j41(5,"ion-avatar"),t.DNE(6,j,1,2,"img",22)(7,x,1,0),t.k0s()()),2&n){let i;const e=t.XpG().$implicit,a=t.XpG();t.R7$(),t.JRh(e.VWalletInMethodName),t.R7$(3),t.Lme(" +",a.APP_FUNC_FormatMoney(null!==(i=e.Amount)&&void 0!==i?i:0)," ",null!==(i=e.Units)&&void 0!==i?i:"\u0111"," "),t.R7$(2),t.vxM(6,e.Paymethod?6:7)}}function G(n,o){1&n&&(t.j41(0,"ion-avatar"),t.nrm(1,"img",24),t.k0s())}function E(n,o){1&n&&(t.j41(0,"ion-avatar"),t.nrm(1,"img",25),t.k0s())}function N(n,o){if(1&n&&(t.j41(0,"b"),t.EFF(1),t.k0s(),t.j41(2,"ion-chip")(3,"ion-label",20),t.EFF(4),t.k0s(),t.DNE(5,G,2,0,"ion-avatar")(6,E,2,0),t.k0s()),2&n){let i;const e=t.XpG().$implicit,a=t.XpG();t.R7$(),t.JRh(e.VPurposeUsedName),t.R7$(3),t.Lme(" -",a.APP_FUNC_FormatMoney(null!==(i=e.Amount)&&void 0!==i?i:0)," ",null!==(i=e.Units)&&void 0!==i?i:"\u0111"," "),t.R7$(),t.vxM(5,e.IsVehicleVipWallet?5:6)}}function O(n,o){if(1&n&&(t.j41(0,"div",17)(1,"div",18),t.DNE(2,D,8,4)(3,N,7,4),t.k0s(),t.j41(4,"div",19)(5,"small",20),t.EFF(6),t.k0s(),t.j41(7,"small")(8,"b",21),t.EFF(9),t.nI1(10,"translate"),t.k0s()()()()),2&n){const i=o.$implicit,e=t.XpG();t.HbH(i.OrderCode?"cursor-pointer":""),t.Y8G("routerLink",i.OrderCode?"/"+e.APP_ROUTE.ORDER_INFO_DETAIL_2.replace(":code",i.OrderCode):null),t.R7$(2),t.vxM(2,i.IsIn?2:3),t.R7$(4),t.JRh(e.APP_FUNC_FormatDate(i.CreatedDate)),t.R7$(3),t.JRh(t.bMT(10,6,"Completed"))}}const k=[{path:"",component:(()=>{var n;class o{constructor(e,a,l,c,g,p){this.router=e,this.platform=a,this.modalController=l,this.animationController=c,this.toastController=g,this.loadingController=p,this.APP_ROUTE=H._,this.APP_FUNC_FormatMoney=h.xi,this.APP_FUNC_FormatDate=h.Rv,this.readfile_url=v.c.readfile_url,this.paging={sortfield:null,sorttype:null,page:1,limit:20,loading:!1,active:!0},this.filter={},this.walletHistorys=[],this.limitLoad=0}ngOnInit(){(0,C.kU)().then(e=>{e&&this.refreshData()})}onIonRefresher(e){this.filter={},this.refreshData(()=>{e.target.complete()})}onIonInfinite(e){this.loadMore(()=>{e.target.complete()})}onIonSegmentChange(e){this.filter.type=e.detail.value,this.filterChange()}pushData(e){1==this.paging.page&&(this.walletHistorys.length=0),this.walletHistorys=this.walletHistorys.concat(e)}refreshData(e){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit(e)}loadMore(e){this.paging.page+=1,this.loadData_Paging_Limit(e)}searchChange(e){this.filter.search=e.target.value.replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}sortChange(e,a){this.paging.sortfield=e||null,this.paging.sorttype=a||null,this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}filterChange(){this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}loadData_Paging_Limit(e){var a=this;return(0,u.A)(function*(){if(a.limitLoad>0)return void(e&&e());a.limitLoad=300;let l=setInterval(()=>{a.limitLoad-=100,a.limitLoad<=0&&(clearInterval(l),a.loadData_Paging(e))},100)})()}loadData_Paging(e){var a=this;return(0,u.A)(function*(){a.paging.loading=!0,P({loadingController:a.loadingController,params:{IsIn:1==a.filter.type||2!=a.filter.type&&null,PageNumber:a.paging.page,PageSize:a.paging.limit},callback:l=>{var c;a.response=l,null!=l&&l.Succeeded?a.pushData(null!==(c=l.Data)&&void 0!==c?c:[]):(0,R.cX)(a.toastController,{},l).then(g=>g.present()),a.paging.loading=!1,a.paging.active=!(null==l||!l.HasNextPage),e&&e()}})})()}}return(n=o).\u0275fac=function(e){return new(e||n)(t.rXU(d.Ix),t.rXU(I.OD),t.rXU(r.W3),t.rXU(r.Hx),t.rXU(r.K_),t.rXU(r.Xi))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-wallet-history"]],decls:29,vars:19,consts:[["templateWallet",""],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],[1,"container","px-0"],["mode","md",3,"ionChange","value"],[3,"value"],[1,"container","pt-3","pb-4"],[3,"ionInfinite",4,"ngIf"],[1,"row"],[4,"ngFor","ngForOf"],[1,"col-12","col-lg-6","mb-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"container","py-5","text-center"],["src","../../../assets/image/default/no-info.svg"],[1,"text-muted","mt-4"],[3,"ionInfinite"],[1,"card-order",3,"routerLink"],[1,"d-flex","align-items-start","justify-content-between"],[1,"d-flex","align-items-start","justify-content-between","mt-2"],[1,"fw-300"],[1,"text-success"],[3,"src"],["src","../../../assets/icon/payment/money.svg"],["src","../../../assets/icon/payment/wallet-vip.svg"],["src","../../../assets/icon/payment/wallet-basic.svg"]],template:function(e,a){if(1&e){const l=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),t.nrm(3,"ion-back-button",2),t.k0s(),t.j41(4,"ion-title"),t.EFF(5),t.nI1(6,"translate"),t.k0s()()(),t.j41(7,"ion-content")(8,"ion-refresher",3),t.bIt("ionRefresh",function(g){return t.eBV(l),t.Njj(a.onIonRefresher(g))}),t.nrm(9,"ion-refresher-content"),t.k0s(),t.j41(10,"div",4)(11,"ion-segment",5),t.bIt("ionChange",function(g){return t.eBV(l),t.Njj(a.onIonSegmentChange(g))}),t.j41(12,"ion-segment-button",6)(13,"ion-label"),t.EFF(14),t.nI1(15,"translate"),t.k0s()(),t.j41(16,"ion-segment-button",6)(17,"ion-label"),t.EFF(18),t.nI1(19,"translate"),t.k0s()(),t.j41(20,"ion-segment-button",6)(21,"ion-label"),t.EFF(22),t.nI1(23,"translate"),t.k0s()()()(),t.DNE(24,M,3,1,"div",7)(25,b,5,3)(26,T,2,0,"ion-infinite-scroll",8),t.k0s(),t.DNE(27,O,11,8,"ng-template",null,0,t.C5r)}if(2&e){let l;t.R7$(3),t.Y8G("defaultHref",a.APP_ROUTE.USER),t.R7$(2),t.JRh(t.bMT(6,11,"TransactionHistory")),t.R7$(6),t.Y8G("value",null!==(l=a.filter.type)&&void 0!==l?l:0),t.R7$(),t.Y8G("value",0),t.R7$(2),t.JRh(t.bMT(15,13,"All")),t.R7$(2),t.Y8G("value",1),t.R7$(2),t.JRh(t.bMT(19,15,"IncreaseBalance")),t.R7$(2),t.Y8G("value",2),t.R7$(2),t.JRh(t.bMT(23,17,"Pay")),t.R7$(2),t.vxM(24,a.walletHistorys.length?24:a.response?25:-1),t.R7$(2),t.Y8G("ngIf",a.paging.active)}},dependencies:[m.Sq,m.bT,m.T3,r.mC,r.QW,r.ZB,r.W9,r.eU,r.Ax,r.Hp,r.he,r.To,r.Ki,r.Gp,r.eP,r.BC,r.ai,r.Je,r.el,r.N7,d.Wk,W.D9],styles:[".card-order[_ngcontent-%COMP%]{padding:1rem;border-radius:1rem;background-color:var(--ion-color-light);color:var(--ion-color-light-contrast)}.card-order[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{min-height:1.25rem;padding-top:.25rem;padding-bottom:.25rem;background:transparent}.card-order[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem;line-height:0;border:1px solid var(--ion-color-medium-tint)}.card-order[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{border-radius:50%;padding:2px;background:var(--ion-color-light-tint)}"]}),o})()}];let U=(()=>{var n;class o{}return(n=o).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[d.iI.forChild(k),d.iI]}),o})();var L=s(3890);let A=(()=>{var n;class o{}return(n=o).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[m.MD,_.YN,r.bv,U,L.x]}),o})()}}]);